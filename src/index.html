<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="favicon.png" />
    <title>Sygnal 2048</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      // import CSS (Vite automatically injects this properly on bundling)
      import '../public/style.css';

      // initialize the application
      import { run } from 'sygnal';
      import App from './app';

      // run() adds STATE, DOM, EVENTS, and LOG drivers automatically
      // and mounts to the #root element
      // to add additional Cycle.js drivers, provide them as the second parameter to run()
      //
      // run() returns an object with sinks, sources, dispose, and hmr:
      // - sinks and sources are the sinks and sources provided by the drivers to the component 
      //   and can be used for advanced debugging
      // - dispose is a function that will initiate cleanup and dispose the application
      // - hmr is a function that can be passed to Vite's hot.accept() function to preserve 
      //   state across HMR updates
      const { hmr } = run(App);

      // to preserve state across HMR updates, use Vite's hot.accept() and pass the path to your 
      // root component and the hmr function returned by run()
      if (import.meta.hot) {
        import.meta.hot.accept('./app', hmr)
      }
    </script>
  </body>
</html>
