var yo=Object.defineProperty,mo=Object.defineProperties;var go=Object.getOwnPropertyDescriptors;var Sr=Object.getOwnPropertySymbols;var bo=Object.prototype.hasOwnProperty,_o=Object.prototype.propertyIsEnumerable;var Or=(e,t,r)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Jt=(e,t)=>{for(var r in t||(t={}))bo.call(t,r)&&Or(e,r,t[r]);if(Sr)for(var r of Sr(t))_o.call(t,r)&&Or(e,r,t[r]);return e},ye=(e,t)=>mo(e,go(t));const wo=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};wo();var Et=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function de(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var mt={},Xr={},ft={},Vr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Vr);var So=Vr,Ar=Object.prototype.toString,Zr=function(t){var r=Ar.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Ar.call(t.callee)==="[object Function]"),n},Qr;if(!Object.keys){var me=Object.prototype.hasOwnProperty,Er=Object.prototype.toString,Oo=Zr,Pr=Object.prototype.propertyIsEnumerable,Ao=!Pr.call({toString:null},"toString"),Eo=Pr.call(function(){},"prototype"),ge=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],We=function(e){var t=e.constructor;return t&&t.prototype===e},Po={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},$o=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!Po["$"+e]&&me.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{We(window[e])}catch{return!0}}catch{return!0}return!1}(),No=function(e){if(typeof window=="undefined"||!$o)return We(e);try{return We(e)}catch{return!1}};Qr=function(t){var r=t!==null&&typeof t=="object",n=Er.call(t)==="[object Function]",o=Oo(t),i=r&&Er.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var s=Eo&&n;if(i&&t.length>0&&!me.call(t,0))for(var p=0;p<t.length;++p)a.push(String(p));if(o&&t.length>0)for(var _=0;_<t.length;++_)a.push(String(_));else for(var E in t)!(s&&E==="prototype")&&me.call(t,E)&&a.push(String(E));if(Ao)for(var A=No(t),M=0;M<ge.length;++M)!(A&&ge[M]==="constructor")&&me.call(t,ge[M])&&a.push(ge[M]);return a}}var Mo=Qr,Do=Array.prototype.slice,To=Zr,$r=Object.keys,_e=$r?function(t){return $r(t)}:Mo,Nr=Object.keys;_e.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return To(n)?Nr(Do.call(n)):Nr(n)})}else Object.keys=_e;return Object.keys||_e};var Io=_e,Co=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},Mr=typeof Symbol!="undefined"&&Symbol,xo=Co,jo=function(){return typeof Mr!="function"||typeof Symbol!="function"||typeof Mr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:xo()},ko="Function.prototype.bind called on incompatible ",qe=Array.prototype.slice,Lo=Object.prototype.toString,Ro="[object Function]",Fo=function(t){var r=this;if(typeof r!="function"||Lo.call(r)!==Ro)throw new TypeError(ko+r);for(var n=qe.call(arguments,1),o,i=function(){if(this instanceof o){var E=r.apply(this,n.concat(qe.call(arguments)));return Object(E)===E?E:this}else return r.apply(t,n.concat(qe.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],p=0;p<a;p++)s.push("$"+p);if(o=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var _=function(){};_.prototype=r.prototype,o.prototype=new _,_.prototype=null}return o},Bo=Fo,tn=Function.prototype.bind||Bo,Wo=tn,qo=Wo.call(Function.call,Object.prototype.hasOwnProperty),Y,fe=SyntaxError,en=Function,Vt=TypeError,Ue=function(e){try{return en('"use strict"; return ('+e+").constructor;")()}catch{}},Bt=Object.getOwnPropertyDescriptor;if(Bt)try{Bt({},"")}catch{Bt=null}var Ge=function(){throw new Vt},Uo=Bt?function(){try{return arguments.callee,Ge}catch{try{return Bt(arguments,"callee").get}catch{return Ge}}}():Ge,Yt=jo(),xt=Object.getPrototypeOf||function(e){return e.__proto__},Xt={},Go=typeof Uint8Array=="undefined"?Y:xt(Uint8Array),Zt={"%AggregateError%":typeof AggregateError=="undefined"?Y:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?Y:ArrayBuffer,"%ArrayIteratorPrototype%":Yt?xt([][Symbol.iterator]()):Y,"%AsyncFromSyncIteratorPrototype%":Y,"%AsyncFunction%":Xt,"%AsyncGenerator%":Xt,"%AsyncGeneratorFunction%":Xt,"%AsyncIteratorPrototype%":Xt,"%Atomics%":typeof Atomics=="undefined"?Y:Atomics,"%BigInt%":typeof BigInt=="undefined"?Y:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?Y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?Y:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?Y:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?Y:FinalizationRegistry,"%Function%":en,"%GeneratorFunction%":Xt,"%Int8Array%":typeof Int8Array=="undefined"?Y:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?Y:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?Y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yt?xt(xt([][Symbol.iterator]())):Y,"%JSON%":typeof JSON=="object"?JSON:Y,"%Map%":typeof Map=="undefined"?Y:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Yt?Y:xt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?Y:Promise,"%Proxy%":typeof Proxy=="undefined"?Y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?Y:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?Y:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Yt?Y:xt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?Y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yt?xt(""[Symbol.iterator]()):Y,"%Symbol%":Yt?Symbol:Y,"%SyntaxError%":fe,"%ThrowTypeError%":Uo,"%TypedArray%":Go,"%TypeError%":Vt,"%Uint8Array%":typeof Uint8Array=="undefined"?Y:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?Y:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?Y:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?Y:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?Y:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?Y:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?Y:WeakSet},zo=function e(t){var r;if(t==="%AsyncFunction%")r=Ue("async function () {}");else if(t==="%GeneratorFunction%")r=Ue("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Ue("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=xt(o.prototype))}return Zt[t]=r,r},Dr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Te=tn,Ee=qo,Ho=Te.call(Function.call,Array.prototype.concat),Ko=Te.call(Function.apply,Array.prototype.splice),Tr=Te.call(Function.call,String.prototype.replace),Pe=Te.call(Function.call,String.prototype.slice),Jo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Yo=/\\(\\)?/g,Xo=function(t){var r=Pe(t,0,1),n=Pe(t,-1);if(r==="%"&&n!=="%")throw new fe("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new fe("invalid intrinsic syntax, expected opening `%`");var o=[];return Tr(t,Jo,function(i,a,s,p){o[o.length]=s?Tr(p,Yo,"$1"):a||i}),o},Vo=function(t,r){var n=t,o;if(Ee(Dr,n)&&(o=Dr[n],n="%"+o[0]+"%"),Ee(Zt,n)){var i=Zt[n];if(i===Xt&&(i=zo(n)),typeof i=="undefined"&&!r)throw new Vt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new fe("intrinsic "+t+" does not exist!")},Zo=function(t,r){if(typeof t!="string"||t.length===0)throw new Vt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vt('"allowMissing" argument must be a boolean');var n=Xo(t),o=n.length>0?n[0]:"",i=Vo("%"+o+"%",r),a=i.name,s=i.value,p=!1,_=i.alias;_&&(o=_[0],Ko(n,Ho([0,1],_)));for(var E=1,A=!0;E<n.length;E+=1){var M=n[E],m=Pe(M,0,1),c=Pe(M,-1);if((m==='"'||m==="'"||m==="`"||c==='"'||c==="'"||c==="`")&&m!==c)throw new fe("property names with quotes must have matching quotes");if((M==="constructor"||!A)&&(p=!0),o+="."+M,a="%"+o+"%",Ee(Zt,a))s=Zt[a];else if(s!=null){if(!(M in s)){if(!r)throw new Vt("base intrinsic for "+t+" exists, but the property is not available.");return}if(Bt&&E+1>=n.length){var u=Bt(s,M);A=!!u,A&&"get"in u&&!("originalValue"in u.get)?s=u.get:s=s[M]}else A=Ee(s,M),s=s[M];A&&!p&&(Zt[a]=s)}}return s},Qo=Zo,Ze=Qo("%Object.defineProperty%",!0),Qe=function(){if(Ze)try{return Ze({},"a",{value:1}),!0}catch{return!1}return!1};Qe.hasArrayLengthDefineBug=function(){if(!Qe())return null;try{return Ze([],"length",{value:1}).length!==1}catch{return!0}};var ti=Qe,ei=Io,ri=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",ni=Object.prototype.toString,oi=Array.prototype.concat,rn=Object.defineProperty,ii=function(e){return typeof e=="function"&&ni.call(e)==="[object Function]"},ai=ti(),nn=rn&&ai,si=function(e,t,r,n){t in e&&(!ii(n)||!n())||(nn?rn(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},on=function(e,t){var r=arguments.length>2?arguments[2]:{},n=ei(t);ri&&(n=oi.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)si(e,n[o],t[n[o]],r[n[o]])};on.supportsDescriptors=!!nn;var an=on,se={exports:{}};typeof self!="undefined"?se.exports=self:typeof window!="undefined"?se.exports=window:se.exports=Function("return this")();var ui=se.exports,sn=function(){return typeof Et!="object"||!Et||Et.Math!==Math||Et.Array!==Array?ui:Et},fi=an,li=sn,ci=function(){var t=li();if(fi.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},pi=an,di=se.exports,un=sn,hi=ci,vi=un(),fn=function(){return vi};pi(fn,{getPolyfill:un,implementation:di,shim:hi});var yi=fn,mi=Et&&Et.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ft,"__esModule",{value:!0});ft.NO_IL=sr=ft.NO=ft.MemoryStream=Ie=ft.Stream=void 0;var gi=So,bi=yi,be=gi.default(bi.getPolyfill()),N={},sr=ft.NO=N;function ht(){}function we(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _i(e,t){return function(n){return e(n)&&t(n)}}function ur(e,t,r){try{return e.f(t)}catch(n){return r._e(n),N}}var Ft={_n:ht,_e:ht,_c:ht};ft.NO_IL=Ft;function Ir(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var wi=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Si=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Oi=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Si(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Ai=function(){function e(t){this.type="merge",this.insArr=t,this.out=N,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===N)return;t._c()}},e}(),Ei=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==N&&r.up(t,this.i)){var o=we(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==N&&--t.Nc===0&&t.out._c()},e}(),Pi=function(){function e(t){this.type="combine",this.insArr=t,this.out=N,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===N?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=N,r[i]._add(new Ei(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=N,this.ils=[],this.vals=[]},e}(),$i=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Ni=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(ht,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Mi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Di=function(){function e(t,r){this.type="debug",this.ins=t,this.out=N,this.s=ht,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this.s,o=this.l;if(n!==ht)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Ti=function(){function e(t,r){this.type="drop",this.ins=r,this.out=N,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Ii=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Ci=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=N,this.o=t,this.oil=Ft}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Ii(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=N,this.oil=Ft},e.prototype.end=function(){var t=this.out;t!==N&&t._c()},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ze=function(){function e(t,r){this.type="filter",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=ur(this,t,r);n===N||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),xi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=N,this.op.less()},e}(),ji=function(){function e(t){this.type="flatten",this.ins=t,this.out=N,this.open=!0,this.inner=N,this.il=Ft}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=N,this.il=Ft,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==N&&this.inner._remove(this.il),this.out=N,this.open=!0,this.inner=N,this.il=Ft},e.prototype.less=function(){var t=this.out;t!==N&&!this.open&&this.inner===N&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this,o=n.inner,i=n.il;o!==N&&i!==Ft&&o._remove(i),(this.inner=t)._add(this.il=new xi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),ki=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=N,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=ur(this,t,r);n!==N&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Li=function(){function e(t){this.type="last",this.ins=t,this.out=N,this.has=!1,this.val=N}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.val=N},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Ri=function(){function e(t,r){this.type="map",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=ur(this,t,r);n!==N&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Fi=function(){function e(t){this.type="remember",this.ins=t,this.out=N}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),Bi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==N)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Wi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=N,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),qi=function(){function e(t,r){this.type="take",this.ins=r,this.out=N,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),fr=function(){function e(t){this._prod=t||N,this._ils=[],this._stopID=N,this._dl=N,this._d=!1,this._target=null,this._err=N}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=we(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===N){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=we(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=we(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==N&&this._prod._stop(),this._err=N,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=N,this._stopID=N},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==N)clearTimeout(this._stopID),this._stopID=N;else{var o=this._prod;o!==N&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==N&&o.length<=0?(this._err=N,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==N)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof It?It:e},e.prototype.addListener=function(t){t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new wi(this,t)},e.prototype[be]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ir(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ir(t),new It(t)},e.never=function(){return new e({_start:ht,_stop:ht})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:ht})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:ht})},e.from=function(t){if(typeof t[be]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new $i(t))},e.fromPromise=function(t){return new e(new Ni(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[be]=="function"?t[be]():t;return new e(new Oi(r))},e.periodic=function(t){return new e(new Mi(t))},e.prototype._map=function(t){return new(this.ctor())(new Ri(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ze?new e(new ze(_i(r.f,t),r.ins)):new e(new ze(t,this))},e.prototype.take=function(t){return new(this.ctor())(new qi(t,this))},e.prototype.drop=function(t){return new e(new Ti(t,this))},e.prototype.last=function(){return new e(new Li(this))},e.prototype.startWith=function(t){return new It(new Wi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Ci(t,this))},e.prototype.fold=function(t,r){return new It(new ki(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Bi(t,this))},e.prototype.flatten=function(){return new e(new ji(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new It(new Fi(this))},e.prototype.debug=function(t){return new(this.ctor())(new Di(this,t))},e.prototype.imitate=function(t){if(t instanceof It)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||ht,t._e=t.error||ht,t._c=t.complete||ht,this._dl=t):(this._d=!1,this._dl=N)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ai(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Pi(r))},e}(),Ie=ft.Stream=fr,It=function(e){mi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==N)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=N;else if(this._has)r._n(this._v);else{var i=this._prod;i!==N&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(fr);ft.MemoryStream=It;var Ui=fr,nt=ft.default=Ui,Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});function ln(){var e;return typeof window!="undefined"?e=window:typeof Et!="undefined"?e=Et:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Gi(e){ln().adaptStream=e}Ce.setAdapt=Gi;function zi(e){return ln().adaptStream(e)}var dt=Ce.adapt=zi;function Hi(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Ki(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function Ji(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Yi(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=dt(i.isolateSink(nt.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var cn=0;function tr(){return"cycle"+ ++cn}function le(e,t){t===void 0&&(t=tr()),Hi(e,t);var r=typeof t=="object"?tr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];var p=Ki(i,n,r),_=Ji(i,p),E=e.apply(void 0,[_].concat(a)),A=Yi(i,E,p);return A}}le.reset=function(){return cn=0};function Xi(e){return e===void 0&&(e=tr()),function(t){return le(t,e)}}var Vi=Object.freeze(Object.defineProperty({__proto__:null,default:le,toIsolated:Xi},Symbol.toStringTag,{value:"Module"})),pn=de(Vi),lr={},Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.DropRepeatsOperator=void 0;var Zi=ft,He={},dn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=He,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=He},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==He&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();Ut.DropRepeatsOperator=dn;function Qi(e){return e===void 0&&(e=void 0),function(r){return new Zi.Stream(new dn(r,e))}}var ta=Ut.default=Qi,er=globalThis&&globalThis.__assign||function(){return er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},er.apply(this,arguments)};function ea(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function hn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function ra(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?ea(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):er({},r,(i={},i[e]=n,i))}:e.set}function vn(e,t){return e.select(t)}function yn(e,t){var r=hn(t),n=ra(t);return e.map(function(o){return function(a){var s=r(a),p=o(s);return s===p?a:n(a,p)}})}var mn=function(){function e(t,r){this.isolateSource=vn,this.isolateSink=yn,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(ta()).remember(),this._name=r,this.stream=dt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=hn(t);return new e(this._stream.map(r),this._name)},e}(),na=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),oa=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,s=0;s<a;++s){var p=r[s],_=p._key,E=nt.fromObservable(p[i]||nt.never());n.has(_)||(n.set(_,new na(o,this,E)),E._add(n.get(_)))}n.forEach(function(A,M){(!t.dict.has(M)||!t.dict.get(M))&&(A.ins._remove(A),A.ins=null,A.out=null,n.delete(M))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function ia(e){return function(r){return new Ie(new oa(e,r))}}var aa=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=sr,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),sa=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],s=a._key;if(!n.has(s))return;var p=n.get(s).val;if(p===sr)return;o[i]=p}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,s=r.length,p=!1;if(n.forEach(function(m,c){a.has(c)||(m.ins._remove(m),m.ins=null,m.out=null,m.val=null,n.delete(c),p=!0)}),s===0){o._n([]);return}for(var _=0;_<s;++_){var E=r[_],A=E._key;if(!E[i])throw new Error("pickCombine found an undefined child sink stream");var M=nt.fromObservable(E[i]);n.has(A)||(n.set(A,new aa(A,o,this,M)),M._add(n.get(A)))}p&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function ua(e){return function(r){return new Ie(new sa(e,r))}}var $e=globalThis&&globalThis.__assign||function(){return $e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$e.apply(this,arguments)},gn=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return dt(this._instances$.compose(ia(t)))},e.prototype.pickCombine=function(t){return dt(this._instances$.compose(ua(t)))},e}();function fa(e){return{"*":null}}function la(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var ca={get:function(e){return e},set:function(e,t){return t}};function pa(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||fa,a=nt.fromObservable(r[n].stream),s=a.fold(function(p,_){var E,A,M,m,c=p.dict;if(Array.isArray(_)){for(var u=Array(_.length),O=new Set,l=0,b=_.length;l<b;++l){var f=""+(o?o(_[l],l):l);if(O.add(f),c.has(f))u[l]=c.get(f);else{var h=o?la(o,f):""+l,w=i(f),d=typeof w=="string"?(E={"*":w},E[n]=h,E):$e({},w,(A={},A[n]=h,A)),g=e.itemFactory?e.itemFactory(_[l],l):e.item,S=le(g,d)(r);c.set(f,S),u[l]=S}u[l]._key=f}return c.forEach(function(T,R){O.has(R)||c.delete(R)}),O.clear(),{dict:c,arr:u}}else{c.clear();var f=""+(o?o(_,0):"this"),h=ca,w=i(f),d=typeof w=="string"?(M={"*":w},M[n]=h,M):$e({},w,(m={},m[n]=h,m)),g=e.itemFactory?e.itemFactory(_,0):e.item,S=le(g,d)(r);return c.set(f,S),{dict:c,arr:[S]}}},{dict:new Map,arr:[]});return e.collectSinks(new gn(s))}}var cr={};Object.defineProperty(cr,"__esModule",{value:!0});var da=ft,ha=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function va(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new da.Stream(new ha(e))}var bn=cr.default=va,_n={};Object.defineProperty(_n,"__esModule",{value:!0});function ya(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var wn=_n.default=ya,Ke=wn();function ma(e,t){return t===void 0&&(t="state"),function(n){var o=nt.create(),i=o.fold(function(_,E){return E(_)},void 0).drop(1),a=n;a[t]=new mn(i,t);var s=e(a);if(s[t]){var p=bn(nt.fromObservable(s[t]),nt.never());p.subscribe({next:function(_){return Ke(function(){return o._n(_)})},error:function(_){return Ke(function(){return o._e(_)})},complete:function(){return Ke(function(){return o._c()})}})}return s}}var ga=Object.freeze(Object.defineProperty({__proto__:null,StateSource:mn,isolateSource:vn,isolateSink:yn,Instances:gn,withState:ma,makeCollection:pa},Symbol.toStringTag,{value:"Module"})),pr=de(ga);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=A;var t=n(pn),r=pr;function n(m){return m&&m.__esModule?m:{default:m}}function o(m,c,u){return c in m?Object.defineProperty(m,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[c]=u,m}function i(m,c){return E(m)||_(m,c)||s(m,c)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(m,c){if(!!m){if(typeof m=="string")return p(m,c);var u=Object.prototype.toString.call(m).slice(8,-1);if(u==="Object"&&m.constructor&&(u=m.constructor.name),u==="Map"||u==="Set")return Array.from(m);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return p(m,c)}}function p(m,c){(c==null||c>m.length)&&(c=m.length);for(var u=0,O=new Array(c);u<c;u++)O[u]=m[u];return O}function _(m,c){var u=m==null?null:typeof Symbol!="undefined"&&m[Symbol.iterator]||m["@@iterator"];if(u!=null){var O=[],l=!0,b=!1,f,h;try{for(u=u.call(m);!(l=(f=u.next()).done)&&(O.push(f.value),!(c&&O.length===c));l=!0);}catch(w){b=!0,h=w}finally{try{!l&&u.return!=null&&u.return()}finally{if(b)throw h}}return O}}function E(m){if(Array.isArray(m))return m}function A(m,c){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=u.combineList,l=O===void 0?["DOM"]:O,b=u.globalList,f=b===void 0?["EVENTS"]:b,h=u.stateSourceName,w=h===void 0?"STATE":h,d=u.domSourceName,g=d===void 0?"DOM":d,S=u.container,T=S===void 0?"div":S,R=u.containerClass,C=R===void 0?"":R;return function(B){var F=Date.now(),H={item:m,itemKey:function(Z,ct){return typeof Z.id!="undefined"?Z.id:ct},itemScope:function(Z){return Z},channel:w,collectSinks:function(Z){return Object.entries(B).reduce(function(ct,At){var Ot=i(At,2),gt=Ot[0];if(Ot[1],l.includes(gt)){var Pt=Z.pickCombine(gt);gt===g&&T?ct.DOM=Pt.map(function(Re){return{sel:T,data:{props:{className:C}},children:Re,key:F,text:void 0,elm:void 0}}):(console.warn("Collections without wrapping containers will fail in unpredictable ways when used inside JSX fragments"),ct[gt]=Pt)}else ct[gt]=Z.pickMerge(gt);return ct},{})}},ut=o({},w,c);return f.forEach(function(it){return ut[it]=null}),l.forEach(function(it){return ut[it]=null}),M(H,ut,B)}}function M(m,c,u){return(0,t.default)((0,r.makeCollection)(m),c)(u)}})(lr);var dr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var t=i(ft),r=n(Ut);function n(d){return d&&d.__esModule?d:{default:d}}function o(d){if(typeof WeakMap!="function")return null;var g=new WeakMap,S=new WeakMap;return(o=function(R){return R?S:g})(d)}function i(d,g){if(!g&&d&&d.__esModule)return d;if(d===null||f(d)!=="object"&&typeof d!="function")return{default:d};var S=o(g);if(S&&S.has(d))return S.get(d);var T={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in d)if(C!=="default"&&Object.prototype.hasOwnProperty.call(d,C)){var B=R?Object.getOwnPropertyDescriptor(d,C):null;B&&(B.get||B.set)?Object.defineProperty(T,C,B):T[C]=d[C]}return T.default=d,S&&S.set(d,T),T}function a(d){return _(d)||p(d)||u(d)||s()}function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function _(d){if(Array.isArray(d))return O(d)}function E(d,g){var S=Object.keys(d);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(d);g&&(T=T.filter(function(R){return Object.getOwnPropertyDescriptor(d,R).enumerable})),S.push.apply(S,T)}return S}function A(d){for(var g=1;g<arguments.length;g++){var S=arguments[g]!=null?arguments[g]:{};g%2?E(Object(S),!0).forEach(function(T){M(d,T,S[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(S)):E(Object(S)).forEach(function(T){Object.defineProperty(d,T,Object.getOwnPropertyDescriptor(S,T))})}return d}function M(d,g,S){return g in d?Object.defineProperty(d,g,{value:S,enumerable:!0,configurable:!0,writable:!0}):d[g]=S,d}function m(d,g){return b(d)||l(d,g)||u(d,g)||c()}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(d,g){if(!!d){if(typeof d=="string")return O(d,g);var S=Object.prototype.toString.call(d).slice(8,-1);if(S==="Object"&&d.constructor&&(S=d.constructor.name),S==="Map"||S==="Set")return Array.from(d);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return O(d,g)}}function O(d,g){(g==null||g>d.length)&&(g=d.length);for(var S=0,T=new Array(g);S<g;S++)T[S]=d[S];return T}function l(d,g){var S=d==null?null:typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(S!=null){var T=[],R=!0,C=!1,B,F;try{for(S=S.call(d);!(R=(B=S.next()).done)&&(T.push(B.value),!(g&&T.length===g));R=!0);}catch(H){C=!0,F=H}finally{try{!R&&S.return!=null&&S.return()}finally{if(C)throw F}}return T}}function b(d){if(Array.isArray(d))return d}function f(d){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},f(d)}function h(d,g,S){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",C=f(g);if(!g)throw new Error("Missing 'name$' parameter for switchable()");if(!(C==="string"||C==="function"||g instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(g instanceof t.Stream){var B=g.compose((0,r.default)()).startWith(S).remember();return function(H){return w(d,H,B,T)}}else{var F=C==="function"&&g||function(H){return H[g]};return function(H){var ut=H&&(typeof R=="string"&&H[R]||H.STATE||H.state).stream;if(!ut instanceof t.Stream)throw new Error("Could not find the state source: ".concat(R));var it=ut.map(F).filter(function(Z){return typeof Z=="string"}).compose((0,r.default)()).startWith(S).remember();return w(d,H,it,T,R)}}}function w(d,g,S){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof T=="string"&&(T=[T]);var C=Object.entries(d).map(function(F){var H=m(F,2),ut=H[0],it=H[1];if(g[R]){var Z=g[R].stream,ct=t.default.combine(S,Z).filter(function(Ot){var gt=m(Ot,2),Pt=gt[0];return gt[1],Pt==ut}).map(function(Ot){var gt=m(Ot,2);gt[0];var Pt=gt[1];return Pt}).remember(),At=new g[R].constructor(ct,g[R]._name);return[ut,it(A(A({},g),{},{state:At}))]}return[ut,it(g)]}),B=Object.keys(g).reduce(function(F,H){if(T.includes(H))F[H]=S.map(function(it){var Z=C.find(function(ct){var At=m(ct,2),Ot=At[0];return At[1],Ot===it});return Z&&Z[1][H]||t.default.never()}).flatten().remember().startWith("");else{var ut=C.filter(function(it){var Z=m(it,2);Z[0];var ct=Z[1];return ct[H]!==void 0}).map(function(it){var Z=m(it,2);Z[0];var ct=Z[1];return ct[H]});F[H]=t.default.merge.apply(t.default,a(ut))}return F},{});return B}})(dr);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});var ba=ft,_a=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function wa(e){return function(r){return new ba.Stream(new _a(e,r))}}xe.default=wa;var je={};Object.defineProperty(je,"__esModule",{value:!0});var ie=ft,Sa=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=ie.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=ie.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=ie.NO&&t._n(this.t),this.t=ie.NO,t._c())},e}();function Oa(e){return function(r){return new ie.Stream(new Sa(e,r))}}je.default=Oa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=gt;var t=M(pn),r=M(lr),n=M(dr),o=pr,i=A(ft),a=M(xe),s=M(cr),p=M(je),_=M(Ut);function E(y){if(typeof WeakMap!="function")return null;var D=new WeakMap,v=new WeakMap;return(E=function(I){return I?v:D})(y)}function A(y,D){if(!D&&y&&y.__esModule)return y;if(y===null||F(y)!=="object"&&typeof y!="function")return{default:y};var v=E(D);if(v&&v.has(y))return v.get(y);var $={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in y)if(j!=="default"&&Object.prototype.hasOwnProperty.call(y,j)){var x=I?Object.getOwnPropertyDescriptor(y,j):null;x&&(x.get||x.set)?Object.defineProperty($,j,x):$[j]=y[j]}return $.default=y,v&&v.set(y,$),$}function M(y){return y&&y.__esModule?y:{default:y}}function m(y){return O(y)||u(y)||f(y)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(y){if(typeof Symbol!="undefined"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function O(y){if(Array.isArray(y))return h(y)}function l(y,D){return d(y)||w(y,D)||f(y,D)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(y,D){if(!!y){if(typeof y=="string")return h(y,D);var v=Object.prototype.toString.call(y).slice(8,-1);if(v==="Object"&&y.constructor&&(v=y.constructor.name),v==="Map"||v==="Set")return Array.from(y);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return h(y,D)}}function h(y,D){(D==null||D>y.length)&&(D=y.length);for(var v=0,$=new Array(D);v<D;v++)$[v]=y[v];return $}function w(y,D){var v=y==null?null:typeof Symbol!="undefined"&&y[Symbol.iterator]||y["@@iterator"];if(v!=null){var $=[],I=!0,j=!1,x,z;try{for(v=v.call(y);!(I=(x=v.next()).done)&&($.push(x.value),!(D&&$.length===D));I=!0);}catch(q){j=!0,z=q}finally{try{!I&&v.return!=null&&v.return()}finally{if(j)throw z}}return $}}function d(y){if(Array.isArray(y))return y}function g(y,D){if(!(y instanceof D))throw new TypeError("Cannot call a class as a function")}function S(y,D){for(var v=0;v<D.length;v++){var $=D[v];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(y,$.key,$)}}function T(y,D,v){return D&&S(y.prototype,D),v&&S(y,v),Object.defineProperty(y,"prototype",{writable:!1}),y}function R(y,D){var v=Object.keys(y);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(y);D&&($=$.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),v.push.apply(v,$)}return v}function C(y){for(var D=1;D<arguments.length;D++){var v=arguments[D]!=null?arguments[D]:{};D%2?R(Object(v),!0).forEach(function($){B(y,$,v[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):R(Object(v)).forEach(function($){Object.defineProperty(y,$,Object.getOwnPropertyDescriptor(v,$))})}return y}function B(y,D,v){return D in y?Object.defineProperty(y,D,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[D]=v,y}function F(y){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},F(y)}var H=typeof window!="undefined"&&window||process&&process.env||{},ut="request",it="BOOTSTRAP",Z="INITIALIZE",ct="HYDRATE",At=!0,Ot="~#~#~ABORT~#~#~";e.ABORT=Ot;function gt(y){var D=y.name,v=y.sources,$=y.isolateOpts,I=y.stateSourceName,j=I===void 0?"STATE":I;if(v&&F(v)!=="object")throw new Error("Sources must be a Cycle.js sources object:",D);var x;typeof $=="string"?x=B({},j,$):$===!0?x={}:x=$;var z=typeof v=="undefined";if(F(x)=="object"){var q=function(k){var L=C(C({},y),{},{sources:k});return new Pt(L).sinks};return z?(0,t.default)(q,x):(0,t.default)(q,x)(v)}else return z?function(W){return new Pt(C(C({},y),{},{sources:W})).sinks}:new Pt(y).sinks}var Pt=function(){function y(D){var v=this,$=D.name,I=$===void 0?"NO NAME":$,j=D.sources,x=D.intent,z=D.request,q=D.model,W=D.response,k=D.view,L=D.children,U=L===void 0?{}:L,G=D.components,et=G===void 0?{}:G,tt=D.initialState,rt=D.calculated,at=D.storeCalculatedInState,K=at===void 0?!0:at,V=D.DOMSourceName,Q=V===void 0?"DOM":V,X=D.stateSourceName,lt=X===void 0?"STATE":X,st=D.requestSourceName,J=st===void 0?"HTTP":st;if(g(this,y),!j||F(j)!="object")throw new Error("Missing or invalid sources");this.name=I,this.sources=j,this.intent=x,this.request=z,this.model=q,this.response=W,this.view=k,this.children=U,this.components=et,this.initialState=tt,this.calculated=rt,this.storeCalculatedInState=K,this.DOMSourceName=Q,this.stateSourceName=lt,this.requestSourceName=J,this.sourceNames=Object.keys(j),this.isSubComponent=this.sourceNames.includes("props$");var bt=j[lt]&&j[lt].stream;bt&&(this.currentState=tt||{},this.sources[this.stateSourceName]=new o.StateSource(bt.map(function(Dt){return v.currentState=Dt,Dt}))),At&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=tt||!0,this.intent=function(Dt){return{__NOOP_ACTION__:i.default.never()}},this.model={__NOOP_ACTION__:function(jt){return jt}}),At=!1,this.log=Re(I),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return T(y,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof i.Stream)&&F(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var v=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=i.default.never();return}var $;if(this.intent$ instanceof i.Stream)$=this.intent$;else{var I=Object.entries(this.intent$).map(function(W){var k=l(W,2),L=k[0],U=k[1];return U.map(function(G){return{type:L,data:G}})});$=i.default.merge.apply(i.default,[i.default.never()].concat(m(I)))}var j=$ instanceof i.Stream?$:$.apply&&$(this.sources)||i.default.never(),x=(0,s.default)(i.default.of({type:it}),j).compose((0,a.default)(10)),z;v&&typeof v.select=="function"?z=v.select("initial").flatten():z=i.default.never();var q=z.map(function(W){return{type:ct,data:W}});this.action$=i.default.merge(x,q).compose(this.log(function(W){var k=W.type;return"Action triggered: <".concat(k,">")}))}},{key:"initResponse$",value:function(){var v=this;if(typeof this.request!="undefined"){if(F(this.request)!="object")throw new Error("The request parameter must be an object");var $=this.sources[this.requestSourceName],I=Object.entries(this.request),j=I.reduce(function(x,z){var q=l(z,2),W=q[0],k=q[1],L=W.toLowerCase();if(typeof $[L]!="function")throw new Error("Invalid method in request object:",W);var U=Object.entries(k),G=U.reduce(function(tt,rt){var at=l(rt,2),K=at[0],V=at[1],Q="[".concat(L.toUpperCase(),"]:").concat(K||"none"),X=F(V);if(X==="undefined")throw new Error("Action for '".concat(K,"' route in request object not specified"));if(X!=="string"&&X!=="function")throw new Error("Invalid action for '".concat(K,"' route: expecting string or function"));var lt=X==="function"?"[ FUNCTION ]":"< ".concat(V," >");console.log("[".concat(v.name,"] Adding ").concat(v.requestSourceName," route:"),L.toUpperCase(),"'".concat(K,"' <").concat(lt,">"));var st=$[L](K).compose((0,_.default)(function(J,bt){return J.id==bt.id})).map(function(J){if(!J||!J.id)throw new Error("No id found in request: ".concat(Q));try{var bt=J.id,Dt=J.params,jt=J.body,he=J.cookies,Gt=X==="function"?"FUNCTION":V,Fe={params:Dt,body:jt,cookies:he,req:J},$t={type:Gt,data:jt,req:J,_reqId:bt,_action:Gt},zt=new Date().toISOString(),Nt=J.get?J.get("host"):"0.0.0.0";if(console.log("".concat(zt," ").concat(Nt," ").concat(J.method," ").concat(J.url)),H.DEBUG&&v.action$.setDebugListener({next:function(re){var Ht=re.type;return console.log("[".concat(v.name,"] Action from ").concat(v.requestSourceName," request: <").concat(Ht,">"))}}),X==="function"){var Tt=v.addCalculated(v.currentState),kt=V(Tt,J);return i.default.of(C(C({},$t),{},{data:kt}))}else{v.action$.shamefullySendNext($t);var te=Object.entries(v.sources),ee=te.reduce(function(Lt,re){var Ht=l(re,2),Kt=Ht[0],Rt=Ht[1];if(!Rt||typeof Rt[ut]!="function")return Lt;var Be=Rt[ut](bt);return[].concat(m(Lt),[Be])},[]);return i.default.merge.apply(i.default,m(ee))}}catch(Lt){console.error(Lt)}}).flatten();return[].concat(m(tt),[st])},[]),et=i.default.merge.apply(i.default,m(G));return[].concat(m(x),[et])},[]);if(this.response$=i.default.merge.apply(i.default,m(j)).compose(this.log(function(x){return x._action?"[".concat(v.requestSourceName,"] response data received for Action: <").concat(x._action,">"):"[".concat(v.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var v=this;this.model!=null&&(this.model[Z]===void 0?this.model[Z]=B({},this.stateSourceName,function($,I){return C({},v.addCalculated(I))}):Object.keys(this.model[Z]).forEach(function($){$!==v.stateSourceName&&(console.warn("".concat(Z," can only be used with the ").concat(v.stateSourceName," source... disregarding ").concat($)),delete v.model[Z][$])}))}},{key:"initModel$",value:function(){var v=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(k,L){return k[L]=i.default.never(),k},{});return}var $={type:Z,data:this.initialState},I=this.initialState?(0,s.default)(i.default.of($),this.action$).compose((0,a.default)(0)):this.action$,j=this.makeOnAction(I,!0,this.action$),x=this.makeOnAction(this.action$,!1,this.action$),z=Object.entries(this.model),q={};z.forEach(function(k){var L=l(k,2),U=L[0],G=L[1];if(typeof G=="function"&&(G=B({},v.stateSourceName,G)),F(G)!=="object")throw new Error("Entry for each action must be an object: ".concat(v.name," ").concat(U));var et=Object.entries(G);et.forEach(function(tt){var rt=l(tt,2),at=rt[0],K=rt[1],V=at==v.stateSourceName,Q=V?j:x,X=Q(U,K),lt=X.compose(v.log(function(st){if(V)return"State reducer added: <".concat(U,">");var J=st&&(st.type||st.command||st.name||st.key||Array.isArray(st)&&"Array"||st);return"Data sent to [".concat(at,"]: <").concat(U,"> ").concat(J)}));Array.isArray(q[at])?q[at].push(lt):q[at]=[lt]})});var W=Object.entries(q).reduce(function(k,L){var U=l(L,2),G=U[0],et=U[1];return k[G]=i.default.merge.apply(i.default,[i.default.never()].concat(m(et))),k},{});this.model$=W}},{key:"initSendResponse$",value:function(){var v=this,$=F(this.response);if($!="function"&&$!="undefined")throw new Error("The response parameter must be a function");if($=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(q){var W=q._reqId,k=q._action;return"Unhandled response for request: ".concat(k," ").concat(W)})}),this.sendResponse$=i.default.never();return}var I={select:function(W){return typeof W=="undefined"?v.response$:(Array.isArray(W)||(W=[W]),v.response$.filter(function(k){var L=k._action;return W.length>0?L==="FUNCTION"||W.includes(L):!0}))}},j=this.response(I);if(F(j)!="object")throw new Error("The response function must return an object");var x=Object.entries(j),z=x.reduce(function(q,W){var k=l(W,2),L=k[0],U=k[1],G=U.map(function(et){var tt=et._reqId,rt=et._action,at=et.data;if(!tt)throw new Error("No request id found for response for: ".concat(L));return{_reqId:tt,_action:rt,command:L,data:at}});return[].concat(m(q),[G])},[]);this.sendResponse$=i.default.merge.apply(i.default,m(z)).compose(this.log(function(q){q._reqId;var W=q._action;return"[".concat(v.requestSourceName,"] response sent for: <").concat(W,">")}))}},{key:"initChildren$",value:function(){var v=this,$=this.sourceNames.reduce(function(I,j){return j==v.DOMSourceName?I[j]={}:I[j]=[],I},{});this.children$=Object.entries(this.children).reduce(function(I,j){var x=l(j,2),z=x[0],q=x[1],W=q(v.sources);return v.sourceNames.forEach(function(k){k==v.DOMSourceName?I[k][z]=W[k]:I[k].push(W[k])}),I},$)}},{key:"initSubComponentSink$",value:function(){var v=this,$=i.default.create({start:function(j){v.newSubComponentSinks=j.next.bind(j)},stop:function(j){}});$.subscribe({next:function(j){return j}}),this.subComponentSink$=$.filter(function(I){return Object.keys(I).length>0})}},{key:"initVdom$",value:function(){var v=this;if(typeof this.view!="function"){this.vdom$=i.default.of(null);return}var $=this.sources[this.stateSourceName],I=C({},this.children$[this.DOMSourceName]),j=$&&$.isolateSource($,{get:function(U){return v.addCalculated(U)}}),x=j&&j.stream||i.default.never();I.state=x,I[this.stateSourceName]=x,this.sources.props$&&(I.props=this.sources.props$),this.sources.children$&&(I.children=this.sources.children$);var z=Object.entries(I).reduce(function(L,U){var G=l(U,2),et=G[0],tt=G[1];return L.names.push(et),L.streams.push(tt),L},{names:[],streams:[]}),q=i.default.combine.apply(i.default,m(z.streams)),W=q.compose((0,p.default)(1)).map(function(L){return z.names.reduce(function(U,G,et){return U[G]=L[et],U},{})}),k=Object.keys(this.components);this.vdom$=W.fold(function(L,U){var G=v.view(U)||{sel:"div",data:{},children:[]},et=gr(G,k),tt=Object.entries(et),rt={"::ROOT::":G};if(tt.length===0)return rt;var at=tt.reduce(function(K,V){var Q=l(V,2),X=Q[0],lt=Q[1],st=lt.sel,J=lt.data,bt=J.props||{},Dt=lt.children||[],jt=J.isCollection||!1,he=J.isSwitchable||!1;if(L[X]){var Gt=L[X];return K[X]=Gt,Gt.props$.shamefullySendNext(bt),Gt.children$.shamefullySendNext(Dt),K}var Fe=st==="sygnal-factory"?bt.sygnalFactory:v.components[st]||bt.sygnalFactory;if(!Fe&&!jt&&!he)throw st==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error("Component not found: ".concat(st));var $t=i.default.create().startWith(bt),zt=i.default.create().startWith(Dt),Nt,Tt;if(jt){var kt,te,ee;typeof J.props.for=="string"?(ee=J.props.for,te=v.sources[v.stateSourceName].stream):(ee="for",te=$t),Nt=new o.StateSource(te.map(function(Mt){var St=Mt[ee];return Array.isArray(St)?St:(console.warn("Collection of ".concat(J.props.of," does not have a valid array in the 'for' property: expects either an array or a string of the name of an array property on the state")),[])}).remember());var Lt=C(C({},v.sources),{},(kt={},B(kt,v.stateSourceName,Nt),B(kt,"props$",$t),B(kt,"children$",zt),kt)),re=v.components[J.props.of],Ht={get:function(St){return St},set:function(St){return St}};Tt=(0,r.default)(re,Ht)(Lt)}else if(he){var Kt,Rt=J.props.state;if(typeof Rt=="string"){var Be=v.sources[v.stateSourceName].stream;Nt=new o.StateSource(Be.map(function(Mt){if(F(Mt)!=="object"){console.error("Switchable Error: Invalid or undefined state");return}var St=Mt[Rt];if(typeof St=="undefined"){console.warn("Specified state field '".concat(Rt,"' for switchable element not found"));return}return St}))}else Nt=v.sources[v.stateSourceName];var lo=J.props.of,co=C(C({},v.sources),{},(Kt={},B(Kt,v.stateSourceName,Nt),B(Kt,"props$",$t),B(Kt,"children$",zt),Kt));Tt=(0,n.default)(lo,$t.map(function(Mt){return Mt.current}))(co)}else{var ne,po=function(St){var ve=St.state;if(typeof ve=="undefined")return St;if(F(ve)!=="object")return ve;var wr=C({},St);return delete wr.state,C(C({},wr),ve)};Nt=new o.StateSource($t.map(po));var ho=C(C({},v.sources),{},(ne={},B(ne,v.stateSourceName,Nt),B(ne,"props$",$t),B(ne,"children$",zt),ne));Tt=Fe(ho)}var vo=Tt[v.DOMSourceName];return Tt[v.DOMSourceName]=Nt.stream.map(function(Mt){return vo.compose((0,p.default)(10))}).flatten(),K[X]={sink$:Tt,props$:$t,children$:zt},K},rt);return at},{}).map(function(L){var U=L["::ROOT::"],G=[],et=Object.entries(L).filter(function(K){var V=l(K,1),Q=V[0];return Q!=="::ROOT::"});if(et.length===0)return i.default.of(U);var tt=et.reduce(function(K,V){var Q=l(V,2);Q[0];var X=Q[1];return Object.entries(X.sink$).forEach(function(lt){var st=l(lt,2),J=st[0],bt=st[1];K[J]||(K[J]=[]),J!==v.DOMSourceName&&K[J].push(bt)}),K},{}),rt=Object.entries(tt).reduce(function(K,V){var Q=l(V,2),X=Q[0],lt=Q[1];return K[X]=i.default.merge.apply(i.default,m(lt)),K},{});v.newSubComponentSinks(rt);var at=et.map(function(K){var V=l(K,2),Q=V[0],X=V[1];return G.push(Q),X.sink$[v.DOMSourceName]});return at.length===0?i.default.of(U):i.default.combine.apply(i.default,m(at)).map(function(K){var V=K.reduce(function(X,lt,st){return X[G[st]]=lt,X},{}),Q=br(U,V,k);return Q})}).flatten().filter(function(L){return!!L}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var v=this;this.sinks=this.sourceNames.reduce(function($,I){if(I==v.DOMSourceName)return $;var j=v.subComponentSink$?v.subComponentSink$.map(function(x){return x[I]}).filter(function(x){return!!x}).flatten():i.default.never();return I===v.stateSourceName?$[I]=i.default.merge.apply(i.default,[v.model$[I]||i.default.never(),v.sources[v.stateSourceName].stream.filter(function(x){return!1})].concat(m(v.children$[I]))):$[I]=i.default.merge.apply(i.default,[v.model$[I]||i.default.never(),j].concat(m(v.children$[I]))),$},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=i.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(v){var $=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=arguments.length>2?arguments[2]:void 0;return j=j||v,function(x,z){var q=v.filter(function(L){var U=L.type;return U==x}),W;if(typeof z=="function")W=q.map(function(L){var U=function(V,Q){var X=L._reqId||L.req&&L.req.id,lt=X?F(Q)=="object"?C(C({},Q),{},{_reqId:X,_action:x}):{data:Q,_reqId:X,_action:x}:Q;setTimeout(function(){j.shamefullySendNext({type:V,data:lt})},10)},G=L.data;if(G&&G.data&&G._reqId&&(G=G.data),I)return function(K){var V=$.isSubComponent?$.currentState:K,Q=$.addCalculated(V),X=z(Q,G,U,L.req);return X==Ot?V:$.cleanupCalculated(X)};var et=$.addCalculated($.currentState),tt=z(et,G,U,L.req),rt=F(tt),at=L._reqId||L.req&&L.req.id;if(["string","number","boolean","function"].includes(rt))return tt;if(rt=="object")return C(C({},tt),{},{_reqId:at,_action:x});if(rt=="undefined")return console.warn("'undefined' value sent to ".concat(x)),tt;throw new Error("Invalid reducer type for ".concat(x," ").concat(rt))}).filter(function(L){return L!=Ot});else if(z===void 0||z===!0)W=q.map(function(L){var U=L.data;return U});else{var k=z;W=q.mapTo(k)}return W}}},{key:"addCalculated",value:function(v){if(!this.calculated||F(v)!=="object")return v;if(F(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var $=Object.entries(this.calculated),I=$.reduce(function(j,x){var z=l(x,2),q=z[0],W=z[1];if(typeof W!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(q));try{j[q]=W(v)}catch(k){console.warn("Calculated field '".concat(q,"' threw an error during calculation: ").concat(k.message))}return j},{});return C(C({},v),I)}},{key:"cleanupCalculated",value:function(v){var $=this;if(this.storeCalculatedInState)return this.addCalculated(v);if(!this.calculated||!v||F(v)!=="object")return v;var I=Object.keys(this.calculated),j=C({},v);return I.forEach(function(x){$.initialState&&typeof $.initialState[x]!="undefined"?j[x]=$.initialState[x]:delete j[x]}),j}}]),y}();function Re(y){return function(D){var v=typeof D=="function"?D:function($){return D};return function($){return $.debug(function(I){(H.DEBUG=="true"||H.DEBUG===!0)&&console.log("[".concat(y,"] ").concat(v(I)))})}}}function gr(y,D){var v,$,I,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!y)return{};if((v=y.data)!==null&&v!==void 0&&v.componentsProcessed)return{};j||(y.data.componentsProcessed=!0);var x=y.sel,z=x&&x.toLowerCase()==="collection",q=x&&x.toLowerCase()==="switchable",W=x&&["collection","switchable","sygnal-factory"].concat(m(D)).includes(y.sel)||typeof(($=y.data)===null||$===void 0||(I=$.props)===null||I===void 0?void 0:I.sygnalFactory)=="function",k=y.data&&y.data.props||{},L=y.children||[],U={};if(W){var G=_r(y);if(z){if(!k.of)throw new Error("Collection element missing required 'component' property");if(typeof k.of!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(F(k.of)," requires string"));if(!D.includes(k.of))throw new Error("Specified component for collection not found: ".concat(k.of));(!k.for||!(typeof k.for=="string"||Array.isArray(k.for)))&&console.warn("No valid array found in the 'value' property of collection ".concat(k.of,": no collection components will be created")),y.data.isCollection=!0}else if(q){if(!k.of)throw new Error("Switchable element missing required 'of' property");if(F(k.of)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(F(k.of)," requires object mapping names to component factories"));var et=Object.values(k.of);if(!et.every(function(rt){return typeof rt=="function"}))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!k.current||typeof k.current!="string"&&typeof k.current!="function")throw new Error("Missing or invalid 'current' property for switchable element: found '".concat(F(k.current),"' requires string or function"));var tt=Object.keys(k.of);if(!tt.includes(k.current))throw new Error("Component '".concat(k.current,"' not found in switchable element"));y.data.isSwitchable=!0}U[G]=y}return L.length>0&&L.map(function(rt){return gr(rt,D,!0)}).forEach(function(rt){Object.entries(rt).forEach(function(at){var K=l(at,2),V=K[0],Q=K[1];return U[V]=Q})}),U}function br(y,D,v){var $,I,j,x,z,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!y){if(($=y.data)!==null&&$!==void 0&&$.componentsInjected)return y;!q&&y.data&&(y.data.componentsInjected=!0);var W=y.sel||"NO SELECTOR",k=["collection","switchable","sygnal-factory"].concat(m(v)).includes(W)||typeof((I=y.data)===null||I===void 0||(j=I.props)===null||j===void 0?void 0:j.sygnalFactory)=="function",L=y==null||(x=y.data)===null||x===void 0?void 0:x.isCollection,U=y==null||(z=y.data)===null||z===void 0?void 0:z.isSwitchable;y.data&&y.data.props;var G=y.children||[];if(k){var et=_r(y),tt=D[et];return L?(y.sel="div",delete y.elm,y.children=tt,y):tt}else return G.length>0&&(y.children=G.map(function(rt){return br(rt,D,v)}).flat()),y}}function _r(y){var D=y.sel,v=y.data&&y.data.props||{},$=v.id&&JSON.stringify(v.id)||JSON.stringify(v);return"".concat(D,"::").concat($)}})(Xr);var Sn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=r(ft);function r(u){return u&&u.__esModule?u:{default:u}}function n(u,O){return a(u)||i(u,O)||E(u,O)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(u,O){var l=u==null?null:typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(l!=null){var b=[],f=!0,h=!1,w,d;try{for(l=l.call(u);!(f=(w=l.next()).done)&&(b.push(w.value),!(O&&b.length===O));f=!0);}catch(g){h=!0,d=g}finally{try{!f&&l.return!=null&&l.return()}finally{if(h)throw d}}return b}}function a(u){if(Array.isArray(u))return u}function s(u,O){var l=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!l){if(Array.isArray(u)||(l=E(u))||O&&u&&typeof u.length=="number"){l&&(u=l);var b=0,f=function(){};return{s:f,n:function(){return b>=u.length?{done:!0}:{done:!1,value:u[b++]}},e:function(S){throw S},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h=!0,w=!1,d;return{s:function(){l=l.call(u)},n:function(){var S=l.next();return h=S.done,S},e:function(S){w=!0,d=S},f:function(){try{!h&&l.return!=null&&l.return()}finally{if(w)throw d}}}}function p(u){return M(u)||A(u)||E(u)||_()}function _(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(u,O){if(!!u){if(typeof u=="string")return m(u,O);var l=Object.prototype.toString.call(u).slice(8,-1);if(l==="Object"&&u.constructor&&(l=u.constructor.name),l==="Map"||l==="Set")return Array.from(u);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return m(u,O)}}function A(u){if(typeof Symbol!="undefined"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function M(u){if(Array.isArray(u))return m(u)}function m(u,O){(O==null||O>u.length)&&(O=u.length);for(var l=0,b=new Array(O);l<O;l++)b[l]=u[l];return b}function c(u){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=O.events,b=l===void 0?["input","submit"]:l,f=O.preventDefault,h=f===void 0?!0:f;typeof b=="string"&&(b=[b]);var w=b.map(function(g){return u.events(g)}),d=t.default.merge.apply(t.default,p(w));return d.map(function(g){h&&g.preventDefault();var S=g.type==="submit"?g.srcElement:g.currentTarget,T=new FormData(S),R={};R.event=g,R.eventType=g.type;var C=S.querySelector("input[type=submit]:focus");if(C){var B=C.name,F=C.value;R[B||"submit"]=F}var H=s(T.entries()),ut;try{for(H.s();!(ut=H.n()).done;){var it=n(ut.value,2),Z=it[0],ct=it[1];R[Z]=ct}}catch(At){H.e(At)}finally{H.f()}return R})}})(Sn);var On={};function Aa(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ea(e){return Aa().adaptStream(e)}function Pa(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=nt.create());return t}function $a(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Na(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Ea(e[t]));return e}function Ma(e,t){var r=wn(),n=Object.keys(e).filter(function(s){return!!t[s]}),o={},i={};n.forEach(function(s){o[s]={_n:[],_e:[]},i[s]={next:function(p){return o[s]._n.push(p)},error:function(p){return o[s]._e.push(p)},complete:function(){}}});var a=n.map(function(s){return nt.fromObservable(e[s]).subscribe(i[s])});return n.forEach(function(s){var p=t[s],_=function(A){r(function(){return p._n(A)})},E=function(A){r(function(){(console.error||console.log)(A),p._e(A)})};o[s]._n.forEach(_),o[s]._e.forEach(E),i[s].next=_,i[s].error=E,i[s]._n=_,i[s]._e=E}),o=null,function(){a.forEach(function(p){return p.unsubscribe()})}}function Da(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Ta(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function An(e){return Object.keys(e).length===0}function En(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(An(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Pn(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Pn(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(An(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=Pa(e),r=$a(e,t),n=Na(r);function o(a){return Ma(a,t)}function i(){Ta(n),Da(t)}return{sources:n,run:o,dispose:i}}function Cr(e,t){var r=En(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var Ia=Object.freeze(Object.defineProperty({__proto__:null,setup:En,setupReusable:Pn,run:Cr,default:Cr},Symbol.toStringTag,{value:"Module"})),Ca=de(Ia);function xa(e,t){return document.createElement(e,t)}function ja(e,t,r){return document.createElementNS(e,t,r)}function ka(){return document.createDocumentFragment()}function La(e){return document.createTextNode(e)}function Ra(e){return document.createComment(e)}function Fa(e,t,r){e.insertBefore(t,r)}function Ba(e,t){e.removeChild(t)}function Wa(e,t){e.appendChild(t)}function qa(e){return e.parentNode}function Ua(e){return e.nextSibling}function Ga(e){return e.tagName}function za(e,t){e.textContent=t}function Ha(e){return e.textContent}function Ka(e){return e.nodeType===1}function Ja(e){return e.nodeType===3}function Ya(e){return e.nodeType===8}function Xa(e){return e.nodeType===11}const hr={createElement:xa,createElementNS:ja,createTextNode:La,createDocumentFragment:ka,createComment:Ra,insertBefore:Fa,removeChild:Ba,appendChild:Wa,parentNode:qa,nextSibling:Ua,tagName:Ga,setTextContent:za,getTextContent:Ha,isElement:Ka,isText:Ja,isComment:Ya,isDocumentFragment:Xa};function yt(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const ce=Array.isArray;function Wt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Je(e){return e===void 0}function _t(e){return e!==void 0}const Ye=yt("",{},[],void 0,void 0);function oe(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function Va(){throw new Error("The document fragment is not supported on this platform.")}function Za(e,t){return e.isElement(t)}function Qa(e,t){return e.isDocumentFragment(t)}function ts(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const es=["create","update","remove","destroy","pre","post"];function $n(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:hr;for(const c of es)for(const u of e){const O=u[c];O!==void 0&&n[c].push(O)}function i(c){const u=c.id?"#"+c.id:"",O=c.getAttribute("class"),l=O?"."+O.split(" ").join("."):"";return yt(o.tagName(c).toLowerCase()+u+l,{},[],void 0,c)}function a(c){return yt(void 0,{},[],void 0,c)}function s(c,u){return function(){if(--u===0){const l=o.parentNode(c);o.removeChild(l,c)}}}function p(c,u){var O,l,b,f;let h,w=c.data;if(w!==void 0){const S=(O=w.hook)===null||O===void 0?void 0:O.init;_t(S)&&(S(c),w=c.data)}const d=c.children,g=c.sel;if(g==="!")Je(c.text)&&(c.text=""),c.elm=o.createComment(c.text);else if(g!==void 0){const S=g.indexOf("#"),T=g.indexOf(".",S),R=S>0?S:g.length,C=T>0?T:g.length,B=S!==-1||T!==-1?g.slice(0,Math.min(R,C)):g,F=c.elm=_t(w)&&_t(h=w.ns)?o.createElementNS(h,B,w):o.createElement(B,w);for(R<C&&F.setAttribute("id",g.slice(R+1,C)),T>0&&F.setAttribute("class",g.slice(C+1).replace(/\./g," ")),h=0;h<n.create.length;++h)n.create[h](Ye,c);if(ce(d))for(h=0;h<d.length;++h){const ut=d[h];ut!=null&&o.appendChild(F,p(ut,u))}else Wt(c.text)&&o.appendChild(F,o.createTextNode(c.text));const H=c.data.hook;_t(H)&&((l=H.create)===null||l===void 0||l.call(H,Ye,c),H.insert&&u.push(c))}else if(((b=r==null?void 0:r.experimental)===null||b===void 0?void 0:b.fragments)&&c.children){const S=c.children;for(c.elm=((f=o.createDocumentFragment)!==null&&f!==void 0?f:Va)(),h=0;h<n.create.length;++h)n.create[h](Ye,c);for(h=0;h<S.length;++h){const T=S[h];T!=null&&o.appendChild(c.elm,p(T,u))}}else c.elm=o.createTextNode(c.text);return c.elm}function _(c,u,O,l,b,f){for(;l<=b;++l){const h=O[l];h!=null&&o.insertBefore(c,p(h,f),u)}}function E(c){var u,O;const l=c.data;if(l!==void 0){(O=(u=l==null?void 0:l.hook)===null||u===void 0?void 0:u.destroy)===null||O===void 0||O.call(u,c);for(let b=0;b<n.destroy.length;++b)n.destroy[b](c);if(c.children!==void 0)for(let b=0;b<c.children.length;++b){const f=c.children[b];f!=null&&typeof f!="string"&&E(f)}}}function A(c,u,O,l){for(var b,f;O<=l;++O){let h,w;const d=u[O];if(d!=null)if(_t(d.sel)){E(d),h=n.remove.length+1,w=s(d.elm,h);for(let S=0;S<n.remove.length;++S)n.remove[S](d,w);const g=(f=(b=d==null?void 0:d.data)===null||b===void 0?void 0:b.hook)===null||f===void 0?void 0:f.remove;_t(g)?g(d,w):w()}else o.removeChild(c,d.elm)}}function M(c,u,O,l){let b=0,f=0,h=u.length-1,w=u[0],d=u[h],g=O.length-1,S=O[0],T=O[g],R,C,B,F;for(;b<=h&&f<=g;)w==null?w=u[++b]:d==null?d=u[--h]:S==null?S=O[++f]:T==null?T=O[--g]:oe(w,S)?(m(w,S,l),w=u[++b],S=O[++f]):oe(d,T)?(m(d,T,l),d=u[--h],T=O[--g]):oe(w,T)?(m(w,T,l),o.insertBefore(c,w.elm,o.nextSibling(d.elm)),w=u[++b],T=O[--g]):oe(d,S)?(m(d,S,l),o.insertBefore(c,d.elm,w.elm),d=u[--h],S=O[++f]):(R===void 0&&(R=ts(u,b,h)),C=R[S.key],Je(C)?o.insertBefore(c,p(S,l),w.elm):(B=u[C],B.sel!==S.sel?o.insertBefore(c,p(S,l),w.elm):(m(B,S,l),u[C]=void 0,o.insertBefore(c,B.elm,w.elm))),S=O[++f]);f<=g&&(F=O[g+1]==null?null:O[g+1].elm,_(c,F,O,f,g,l)),b<=h&&A(c,u,b,h)}function m(c,u,O){var l,b,f,h,w,d,g,S;const T=(l=u.data)===null||l===void 0?void 0:l.hook;(b=T==null?void 0:T.prepatch)===null||b===void 0||b.call(T,c,u);const R=u.elm=c.elm,C=c.children,B=u.children;if(c!==u){if(u.data!==void 0||_t(u.text)&&u.text!==c.text){(f=u.data)!==null&&f!==void 0||(u.data={}),(h=c.data)!==null&&h!==void 0||(c.data={});for(let F=0;F<n.update.length;++F)n.update[F](c,u);(g=(d=(w=u.data)===null||w===void 0?void 0:w.hook)===null||d===void 0?void 0:d.update)===null||g===void 0||g.call(d,c,u)}Je(u.text)?_t(C)&&_t(B)?C!==B&&M(R,C,B,O):_t(B)?(_t(c.text)&&o.setTextContent(R,""),_(R,null,B,0,B.length-1,O)):_t(C)?A(R,C,0,C.length-1):_t(c.text)&&o.setTextContent(R,""):c.text!==u.text&&(_t(C)&&A(R,C,0,C.length-1),o.setTextContent(R,u.text)),(S=T==null?void 0:T.postpatch)===null||S===void 0||S.call(T,c,u)}}return function(u,O){let l,b,f;const h=[];for(l=0;l<n.pre.length;++l)n.pre[l]();for(Za(o,u)?u=i(u):Qa(o,u)&&(u=a(u)),oe(u,O)?m(u,O,h):(b=u.elm,f=o.parentNode(b),p(O,h),f!==null&&(o.insertBefore(f,O.elm,o.nextSibling(b)),A(f,[u],0,0))),l=0;l<h.length;++l)h[l].data.hook.insert(h[l]);for(l=0;l<n.post.length;++l)n.post[l]();return O}}function ke(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&ke(i,o.children,o.sel)}}function wt(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),ce(r)?o=r:Wt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(ce(t)?o=t:Wt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)Wt(o[a])&&(o[a]=yt(void 0,void 0,void 0,o[a],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&ke(n,o,e),yt(e,n,o,i,void 0)}function rs(e){let t,r;if(ce(e)?t=e:Wt(t)?r=e:t&&t.sel&&(t=[e]),t!==void 0)for(let n=0;n<t.length;++n)Wt(t[n])&&(t[n]=yt(void 0,void 0,void 0,t[n],void 0));return yt(void 0,{},t,r,void 0)}function Se(e,t){var r;const n=(r=t.data)===null||r===void 0?void 0:r.ns;e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm,n&&ke(t.data,t.children,t.sel)}function ns(e){const t=e.data,r=t.fn(...t.args);Se(r,e)}function os(e,t){let r;const n=e.data,o=t.data,i=n.args,a=o.args;if(n.fn!==o.fn||i.length!==a.length){Se(o.fn(...a),t);return}for(r=0;r<a.length;++r)if(i[r]!==a[r]){Se(o.fn(...a),t);return}Se(e,t)}const is=function(t,r,n,o){return o===void 0&&(o=n,n=r,r=void 0),wt(t,{key:r,hook:{init:ns,prepatch:os},fn:n,args:o})};function as(e,t){const r=e.data.attachData;t.data.attachData.placeholder=r.placeholder,t.data.attachData.real=r.real,e.elm=e.data.attachData.real}function ss(e,t){t.elm=t.data.attachData.placeholder}function us(e){e.elm!==void 0&&e.elm.parentNode.removeChild(e.elm),e.elm=e.data.attachData.real}function fs(e,t){const r=t.elm,n=t.data.attachData,o=document.createElement("span");t.elm=o,n.target.appendChild(r),n.real=r,n.placeholder=o}function ls(e,t){t.data===void 0&&(t.data={}),t.data.hook===void 0&&(t.data.hook={});const r=t.data,n=t.data.hook;return r.attachData={target:e,placeholder:void 0,real:void 0},n.create=fs,n.prepatch=as,n.postpatch=ss,n.destroy=us,t}function Ne(e,t){const r=t!==void 0?t:hr;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",s=r.tagName(e).toLowerCase()+o+a,p={},_={},E={},A=[];let M,m,c;const u=e.attributes,O=e.childNodes;for(m=0,c=u.length;m<c;m++)M=u[m].nodeName,M[0]==="d"&&M[1]==="a"&&M[2]==="t"&&M[3]==="a"&&M[4]==="-"?_[M.slice(5)]=u[m].nodeValue||"":M!=="id"&&M!=="class"&&(p[M]=u[m].nodeValue);for(m=0,c=O.length;m<c;m++)A.push(Ne(O[m],t));return Object.keys(p).length>0&&(E.attrs=p),Object.keys(_).length>0&&(E.datasets=_),s[0]==="s"&&s[1]==="v"&&s[2]==="g"&&(s.length===3||s[3]==="."||s[3]==="#")&&ke(E,A,s),yt(s,E,A,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),yt(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),yt("!",{},[],n,e)):yt("",{},[],void 0,e)}const cs="http://www.w3.org/1999/xlink",ps="http://www.w3.org/XML/1998/namespace",xr=58,ds=120;function jr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==ds?n.setAttribute(r,a):r.charCodeAt(3)===xr?n.setAttributeNS(ps,r,a):r.charCodeAt(5)===xr?n.setAttributeNS(cs,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Nn={create:jr,update:jr};function kr(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Mn={create:kr,update:kr},Lr=/[A-Z]/g;function Rr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(Lr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(Lr,"-$&").toLowerCase(),o[i]))}const Dn={create:Rr,update:Rr};function Tn(e,t,r){if(typeof e=="function")e.call(t,r,t);else if(typeof e=="object")for(let n=0;n<e.length;n++)Tn(e[n],t,r)}function hs(e,t){const r=e.type,n=t.data.on;n&&n[r]&&Tn(n[r],t,e)}function vs(){return function e(t){hs(t,e.vnode)}}function Xe(e,t){const r=e.data.on,n=e.listener,o=e.elm,i=t&&t.data.on,a=t&&t.elm;let s;if(r!==i){if(r&&n)if(i)for(s in r)i[s]||o.removeEventListener(s,n,!1);else for(s in r)o.removeEventListener(s,n,!1);if(i){const p=t.listener=e.listener||vs();if(p.vnode=t,r)for(s in i)r[s]||a.addEventListener(s,p,!1);else for(s in i)a.addEventListener(s,p,!1)}}}const ys={create:Xe,update:Xe,destroy:Xe};function Fr(e,t){let r,n,o;const i=t.elm;let a=e.data.props,s=t.data.props;if(!(!a&&!s)&&a!==s){a=a||{},s=s||{};for(r in s)n=s[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const In={create:Fr,update:Fr},Br=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,ms=function(e){Br(function(){Br(e)})};let rr=!1;function gs(e,t,r){ms(function(){e[t]=r})}function Wr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const s="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const p in a.delayed)r=a.delayed[p],(!s||r!==i.delayed[p])&&gs(o.style,p,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function bs(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function _s(e,t){const r=e.data.style;if(!r||!r.remove){t();return}rr||(e.elm.offsetLeft,rr=!0);let n;const o=e.elm;let i=0;const a=r.remove;let s=0;const p=[];for(n in a)p.push(n),o.style[n]=a[n];const E=getComputedStyle(o)["transition-property"].split(", ");for(;i<E.length;++i)p.indexOf(E[i])!==-1&&s++;o.addEventListener("transitionend",function(A){A.target===o&&--s,s===0&&t()})}function ws(){rr=!1}const Cn={pre:ws,create:Wr,update:Wr,destroy:bs,remove:_s};function Ss(e,...t){const r=vr(t,[]);return r.length===1&&!r[0].sel&&r[0].text?yt(void 0,void 0,void 0,r[0].text,void 0):yt(void 0,e!=null?e:{},r,void 0,void 0)}function vr(e,t){for(const r of e)r!=null&&r!==!1&&r!==""&&(Array.isArray(r)?vr(r,t):typeof r=="string"||typeof r=="number"||typeof r=="boolean"?t.push(yt(void 0,void 0,void 0,String(r),void 0)):t.push(r));return t}function nr(e,t,...r){const n=vr(r,[]);return typeof e=="function"?e(t,n):n.length===1&&!n[0].sel&&n[0].text?wt(e,t,n[0].text):wt(e,t,n)}(function(e){})(nr||(nr={}));var Os=Object.freeze(Object.defineProperty({__proto__:null,htmlDomApi:hr,init:$n,thunk:is,vnode:yt,attachTo:ls,array:ce,primitive:Wt,toVNode:Ne,h:wt,fragment:rs,attributesModule:Nn,classModule:Mn,datasetModule:Dn,eventListenersModule:ys,propsModule:In,styleModule:Cn,get jsx(){return nr},Fragment:Ss},Symbol.toStringTag,{value:"Module"}));function Oe(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function As(e){var t=e.data,r=t.fn.apply(void 0,t.args);Oe(r,e)}function Es(e,t){var r=e.data,n=t.data,o,i=r.args,a=n.args;for((r.fn!==n.fn||i.length!==a.length)&&Oe(n.fn.apply(void 0,a),t),o=0;o<a.length;++o)if(i[o]!==a[o]){Oe(n.fn.apply(void 0,a),t);return}Oe(e,t)}function Ps(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),wt(e,{key:t,hook:{init:As,prepatch:Es},fn:r,args:n})}function Me(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return Ie.create({start:function(s){n?i=function(_){jn(_,n),s.next(_)}:i=function(_){s.next(_)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function xn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!xn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function jn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if($s(t))t(e)&&e.preventDefault();else if(typeof t=="object")xn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function $s(e){return typeof e=="function"}var Ns=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=dt(nt.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=dt(nt.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Me(document,t,r.useCapture,r.preventDefault);var i=dt(o);return i._isCycleSource=this._name,i},e}(),Ms=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=dt(nt.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=dt(nt.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=Me(document.body,t,r.useCapture,r.preventDefault);var i=dt(o);return i._isCycleSource=this._name,i},e}();function Ds(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function Ts(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function Is(e){return e.nodeType===11}function Cs(e){if(typeof e!="string"&&!Ds(e))throw new Error("Given container is not a DOM element neither a selector string.")}function xs(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function kn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function yr(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var Ln=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!yr(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function js(e){return Array.prototype.slice.call(e)}var Rn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=kn(t),n=new Ln(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:js(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),ue=globalThis&&globalThis.__assign||function(){return ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ue.apply(this,arguments)};function ks(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=Fn(r),i=ue({},n,{data:ue({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return ue({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function Fn(e){return{type:Ts(e)?"sibling":"total",scope:e}}var Bn=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(s,p){return new e(s._rootElement$,s._sanitation$,s._namespace.concat(Fn(p)),s._isolateModule,s._eventDelegator,s._name)},this.isolateSink=ks(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Rn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=dt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=dt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Ns(this._name);if(t==="body")return new Ms(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=dt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),qt={},Ls=Et&&Et.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};Object.defineProperty(qt,"__esModule",{value:!0});qt.SampleCombineOperator=qt.SampleCombineListener=void 0;var Rs=ft,Ct={},Wn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Ct&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();qt.SampleCombineListener=Wn;var qn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Ct,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Ct,r[i]._add(new Wn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Ct,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Ct&&(this.Nn>0||r._n(Ls([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Ct&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Ct&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Ct&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();qt.SampleCombineOperator=qn;var Un;Un=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Rs.Stream(new qn(o,t))}};var Fs=qt.default=Un;globalThis&&globalThis.__assign;function Gn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,s=o<i?t.slice(o+1,i):void 0,p=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:s,className:p}}function Bs(e){var t=Gn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(s){return o[s]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var ae;typeof self!="undefined"?ae=self:typeof window!="undefined"?ae=window:typeof global!="undefined"?ae=global:ae=Function("return this")();var qr=ae.Symbol;typeof qr=="function"&&qr("parent");var Ws=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(Is(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Gn(t),n=r.tagName,o=r.id,i=Bs(t),a=t.data||{},s=a.props||{},p=s.id,_=p===void 0?o:p,E=typeof _=="string"&&_.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return E?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return yt("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",s=i?"."+i.split(" ").join("."):"",p=wt(""+n.toLowerCase()+a+s,{},t);return p.data=p.data||{},p.data.isolate=p.data.isolate||[],p},e}(),qs=[Cn,Mn,In,Nn,Dn],zn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var s=this.mapper(t[a]),p=o[1][s];p||(p=[void 0,{}],o[1][s]=p),o=p}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var s=this.mapper(t[a]),p=o[1][s];if(!p)if(r)p=[void 0,{}],o[1][s]=p;else return;o=p}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Us=function(){function e(){this.namespaceTree=new zn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,s=a.isolate;Array.isArray(s)&&t.insertElement(s,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,s=n.elm,p=n.data,_=p===void 0?{}:p,E=a.isolate,A=_.isolate;yr(E,A)||Array.isArray(E)&&t.removeElement(o),Array.isArray(A)&&t.insertElement(A,s)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Gs=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),De=globalThis&&globalThis.__assign||function(){return De=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},De.apply(this,arguments)},zs=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Hs=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new zn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=nt.never(),a,s=new Ln(r,this.isolateModule),p=o===void 0?zs.indexOf(t)===-1:o;if(p)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,s,t,n),i;var _=[];this.nonBubblingListenersToAdd.forEach(function(w){return _.push(w)});for(var E=void 0,A=0,M=_.length,m=function(w){w[0];var d=w[1],g=w[2];return w[3],t===d&&yr(g.namespace,r)};!E&&A<M;){var c=_[A];E=m(c)?c:E,A++}var u=E,O;if(u){var b=u[0];O=b}else{var l=new Rn(r,this.isolateModule);a=this.insertListener(i,s,t,n),u=[i,t,l,a],O=i,this.nonBubblingListenersToAdd.add(u),this.setupNonBubblingListener(u)}var f=this,h=null;return nt.create({start:function(w){h=O.subscribe(w)},stop:function(){u[0];var w=u[1],d=u[2];u[3];var g=d.call();g.forEach(function(S){var T=S.subs;T&&T[w]&&(T[w].unsubscribe(),delete T[w])}),f.nonBubblingListenersToAdd.delete(u),h.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,s){if(a.has(t)){n.push([s,t]);var p=t.subs;p&&Object.keys(p).forEach(function(_){p[_].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,s=a.length;do i.push(this.getVirtualListeners(n,a,!0,s)),s--;while(s>=0&&a[s].type!=="total");for(var p=De({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),_=0;_<i.length;_++)i[_].add(p,a.length);return p},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var s=this.virtualListeners.getDefault(r,function(){return new Map},i);return s.has(t)||s.set(t,new Gs),s.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=Me(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(s){var p,_=s.subs;if(!_||!_[r]){var E=Me(s,r,!1,!1,o.passive).subscribe({next:function(M){return a.onEvent(r,M,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var A=a.nonBubblingListeners.get(r);if(!A)return;A.set(s,{sub:E,destination:o}),s.subs=De({},_,(p={},p[r]=E,p))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,s=i.passive;a.unsubscribe(),this.setupDOMListener(o,s),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var s=this.isolateModule.getNamespace(r.target);if(!s)return;var p=this.getVirtualListeners(t,s);this.bubble(t,r.target,a,i,p,s,s.length-1,!0,n),this.bubble(t,r.target,a,i,p,s,s.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,s,p,_){!p&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,p,_);var E=n,A=s;if(r===n)if(s>=0&&a[s].type==="sibling")E=this.isolateModule.getElement(a,s),A--;else return;r.parentNode&&E&&this.bubble(t,r.parentNode,E,o,i,a,A,p,_),p&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,p,_)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,s){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(p){if(p.passive===s&&p.useCapture===a){var _=kn(p.scopeChecker.namespace);!o.propagationHasBeenStopped&&p.scopeChecker.isDirectlyInScope(r)&&(_!==""&&r.matches(_)||_===""&&r===n)&&(jn(o,p.preventDefault),p.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Ks(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Js(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ys(e){return nt.merge(e,nt.never())}function Xs(e){return e.elm}function Vs(e){(console.error||console.log)(e)}function Zs(){return nt.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Qs(e){return e.data=e.data||{},e.data.isolate=[],e}function tu(e,t){t===void 0&&(t={}),Cs(e);var r=t.modules||qs;Ks(r);var n=new Us,o=t&&t.snabbdomOptions||void 0,i=$n([n.createModule()].concat(r),void 0,o),a=Zs(),s,p,_=nt.create({start:function(A){p=new MutationObserver(function(){return A.next(null)})},stop:function(){p.disconnect()}});function E(A,M){M===void 0&&(M="DOM"),Js(A);var m=nt.create(),c=a.map(function(){var f=xs(e)||document.body;return s=new Ws(f),f}),u=A.remember();u.addListener({}),_.addListener({});var O=c.map(function(f){return nt.merge(u.endWhen(m),m).map(function(h){return s.call(h)}).startWith(Qs(Ne(f))).fold(i,Ne(f)).drop(1).map(Xs).startWith(f).map(function(h){return p.observe(h,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),h}).compose(Ys)}).flatten(),l=bn(a,_).endWhen(m).compose(Fs(O)).map(function(f){return f[1]}).remember();l.addListener({error:t.reportSnabbdomError||Vs});var b=new Hs(l,n);return new Bn(l,m,[],n,b,M)}return E}var Ve="___",Hn=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=dt(nt.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=dt(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=dt(o||nt.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+Ve+r)},e.prototype.isolateSink=function(t,r){return dt(nt.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(Ve+r)!==-1||(n.sel+="."+Ve+r),n}))},e}();function eu(e){return new Hn(e)}function ru(e){return typeof e=="string"&&e.length>0}function Kn(e){return ru(e)&&(e[0]==="."||e[0]==="#")}function Le(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",s=typeof o!="undefined";return Kn(r)?a&&s?wt(e+r,n,o):a?wt(e+r,n):wt(e+r,{}):s?wt(e+r,n,o):a?wt(e,r,n):i?wt(e,r):wt(e,{})}}var Jn=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Yn=Le("svg");Jn.forEach(function(e){Yn[e]=Le(e)});var Xn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],P={SVG_TAG_NAMES:Jn,TAG_NAMES:Xn,svg:Yn,isSelector:Kn,createTagFunction:Le};Xn.forEach(function(e){P[e]=Le(e)});var nu=P.svg,ou=P.a,iu=P.abbr,au=P.address,su=P.area,uu=P.article,fu=P.aside,lu=P.audio,cu=P.b,pu=P.base,du=P.bdi,hu=P.bdo,vu=P.blockquote,yu=P.body,mu=P.br,gu=P.button,bu=P.canvas,_u=P.caption,wu=P.cite,Su=P.code,Ou=P.col,Au=P.colgroup,Eu=P.dd,Pu=P.del,$u=P.dfn,Nu=P.dir,Mu=P.div,Du=P.dl,Tu=P.dt,Iu=P.em,Cu=P.embed,xu=P.fieldset,ju=P.figcaption,ku=P.figure,Lu=P.footer,Ru=P.form,Fu=P.h1,Bu=P.h2,Wu=P.h3,qu=P.h4,Uu=P.h5,Gu=P.h6,zu=P.head,Hu=P.header,Ku=P.hgroup,Ju=P.hr,Yu=P.html,Xu=P.i,Vu=P.iframe,Zu=P.img,Qu=P.input,tf=P.ins,ef=P.kbd,rf=P.keygen,nf=P.label,of=P.legend,af=P.li,sf=P.link,uf=P.main,ff=P.map,lf=P.mark,cf=P.menu,pf=P.meta,df=P.nav,hf=P.noscript,vf=P.object,yf=P.ol,mf=P.optgroup,gf=P.option,bf=P.p,_f=P.param,wf=P.pre,Sf=P.progress,Of=P.q,Af=P.rp,Ef=P.rt,Pf=P.ruby,$f=P.s,Nf=P.samp,Mf=P.script,Df=P.section,Tf=P.select,If=P.small,Cf=P.source,xf=P.span,jf=P.strong,kf=P.style,Lf=P.sub,Rf=P.sup,Ff=P.table,Bf=P.tbody,Wf=P.td,qf=P.textarea,Uf=P.tfoot,Gf=P.th,zf=P.thead,Hf=P.title,Kf=P.tr,Jf=P.u,Yf=P.ul,Xf=P.video,Vf=Object.freeze(Object.defineProperty({__proto__:null,svg:nu,a:ou,abbr:iu,address:au,area:su,article:uu,aside:fu,audio:lu,b:cu,base:pu,bdi:du,bdo:hu,blockquote:vu,body:yu,br:mu,button:gu,canvas:bu,caption:_u,cite:wu,code:Su,col:Ou,colgroup:Au,dd:Eu,del:Pu,dfn:$u,dir:Nu,div:Mu,dl:Du,dt:Tu,em:Iu,embed:Cu,fieldset:xu,figcaption:ju,figure:ku,footer:Lu,form:Ru,h1:Fu,h2:Bu,h3:Wu,h4:qu,h5:Uu,h6:Gu,head:zu,header:Hu,hgroup:Ku,hr:Ju,html:Yu,i:Xu,iframe:Vu,img:Zu,input:Qu,ins:tf,kbd:ef,keygen:rf,label:nf,legend:of,li:af,link:sf,main:uf,map:ff,mark:lf,menu:cf,meta:pf,nav:df,noscript:hf,object:vf,ol:yf,optgroup:mf,option:gf,p:bf,param:_f,pre:wf,progress:Sf,q:Of,rp:Af,rt:Ef,ruby:Pf,s:$f,samp:Nf,script:Mf,section:Df,select:Tf,small:If,source:Cf,span:xf,strong:jf,style:kf,sub:Lf,sup:Rf,table:Ff,tbody:Bf,td:Wf,textarea:qf,tfoot:Uf,th:Gf,thead:zf,title:Hf,tr:Kf,u:Jf,ul:Yf,video:Xf,thunk:Ps,MainDOMSource:Bn,makeDOMDriver:tu,mockDOMSource:eu,MockedDOMSource:Hn,h:wt},Symbol.toStringTag,{value:"Module"})),Vn=de(Vf),Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(ft),r=Ce;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var a=new EventTarget;return i.subscribe({next:function(p){return a.dispatchEvent(new CustomEvent("data",{detail:p}))}}),{select:function(p){var _=!p,E=Array.isArray(p)?p:[p],A,M=t.default.create({start:function(c){A=function(O){var l=O.detail,b=l&&l.data||null;(_||E.includes(l.type))&&c.next(b)},a.addEventListener("data",A)},stop:function(c){return a.removeEventListener("data",A)}});return(0,r.adapt)(M)}}}})(Zn);var Qn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(Qn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=E;var t=Ca,r=pr,n=Vn,o=a(Zn),i=a(Qn);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,M){var m=Object.keys(A);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(A);M&&(c=c.filter(function(u){return Object.getOwnPropertyDescriptor(A,u).enumerable})),m.push.apply(m,c)}return m}function p(A){for(var M=1;M<arguments.length;M++){var m=arguments[M]!=null?arguments[M]:{};M%2?s(Object(m),!0).forEach(function(c){_(A,c,m[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(m)):s(Object(m)).forEach(function(c){Object.defineProperty(A,c,Object.getOwnPropertyDescriptor(m,c))})}return A}function _(A,M,m){return M in A?Object.defineProperty(A,M,{value:m,enumerable:!0,configurable:!0,writable:!0}):A[M]=m,A}function E(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=m.mountPoint,u=c===void 0?"#root":c,O=m.fragments,l=O===void 0?!0:O,b=(0,r.withState)(A,"STATE"),f={EVENTS:o.default,DOM:(0,n.makeDOMDriver)(u,{snabbdomOptions:{experimental:{fragments:l}}}),LOG:i.default},h=p(p({},f),M);return(0,t.run)(b,h)}})(On);var to={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=M;function t(l,b){return o(l)||n(l,b)||p(l,b)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(l,b){var f=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(f!=null){var h=[],w=!0,d=!1,g,S;try{for(f=f.call(l);!(w=(g=f.next()).done)&&(h.push(g.value),!(b&&h.length===b));w=!0);}catch(T){d=!0,S=T}finally{try{!w&&f.return!=null&&f.return()}finally{if(d)throw S}}return h}}function o(l){if(Array.isArray(l))return l}function i(l){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},i(l)}function a(l){return E(l)||_(l)||p(l)||s()}function s(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(l,b){if(!!l){if(typeof l=="string")return A(l,b);var f=Object.prototype.toString.call(l).slice(8,-1);if(f==="Object"&&l.constructor&&(f=l.constructor.name),f==="Map"||f==="Set")return Array.from(l);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return A(l,b)}}function _(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function E(l){if(Array.isArray(l))return A(l)}function A(l,b){(b==null||b>l.length)&&(b=l.length);for(var f=0,h=new Array(b);f<b;f++)h[f]=l[f];return h}function M(){for(var l=arguments.length,b=new Array(l),f=0;f<l;f++)b[f]=arguments[f];return b.reduce(function(h,w){return typeof w=="string"&&!h.includes(w)?h.push.apply(h,a(c(w))):Array.isArray(w)?h.push.apply(h,a(u(w))):i(w)==="object"&&h.push.apply(h,a(O(w))),h},[]).join(" ")}function m(l){return/^[a-zA-Z0-9-_]+$/.test(l)}function c(l){if(typeof l!="string")throw new Error("Class name must be a string");return l.trim().split(" ").reduce(function(b,f){if(f.trim().length===0)return b;if(!m(f))throw new Error("".concat(f," is not a valid CSS class name"));return b.push(f),b},[])}function u(l){return l.map(c).flat()}function O(l){var b=Object.entries(l).filter(function(f){var h=t(f,2);h[0];var w=h[1];return typeof w=="function"?w():!!w}).map(function(f){var h=t(f,2),w=h[0];h[1];var d=w.trim();if(!m(d))throw new Error("".concat(d," is not a valid CSS class name"));return d});return b}})(to);var mr={};Object.defineProperty(mr,"__esModule",{value:!0});var Zf=ft,Qf=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function tl(e){return function(r){return new Zf.Stream(new Qf(e,r))}}mr.default=tl;(function(e){function t(f){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t(f)}Object.defineProperty(e,"__esModule",{value:!0});var r={component:!0,ABORT:!0,collection:!0,switchable:!0,processForm:!0,run:!0,classes:!0,xs:!0,debounce:!0,throttle:!0,delay:!0,dropRepeats:!0,sampleCombine:!0};Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return n.ABORT}}),Object.defineProperty(e,"classes",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"dropRepeats",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"sampleCombine",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"xs",{enumerable:!0,get:function(){return E.default}});var n=b(Xr),o=O(lr),i=O(dr),a=O(Sn),s=O(On),p=O(to),_=Vn;Object.keys(_).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(r,f)||f in e&&e[f]===_[f]||Object.defineProperty(e,f,{enumerable:!0,get:function(){return _[f]}})});var E=O(ft),A=O(je),M=O(mr),m=O(xe),c=O(Ut),u=O(qt);function O(f){return f&&f.__esModule?f:{default:f}}function l(f){if(typeof WeakMap!="function")return null;var h=new WeakMap,w=new WeakMap;return(l=function(g){return g?w:h})(f)}function b(f,h){if(!h&&f&&f.__esModule)return f;if(f===null||t(f)!=="object"&&typeof f!="function")return{default:f};var w=l(h);if(w&&w.has(f))return w.get(f);var d={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in f)if(S!=="default"&&Object.prototype.hasOwnProperty.call(f,S)){var T=g?Object.getOwnPropertyDescriptor(f,S):null;T&&(T.get||T.set)?Object.defineProperty(d,S,T):d[S]=f[S]}return d.default=f,w&&w.set(f,d),d}})(mt);var pt={},eo={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.vnode=ot.undefinedv=ot.text=ot.svg=ot.string=ot.object=ot.number=ot.nullv=ot.fun=ot.array=void 0;function or(e){return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(e)}var el=function(t){return t===null};ot.nullv=el;var rl=function(t){return t===void 0};ot.undefinedv=rl;var ro=function(t){return typeof t=="number"};ot.number=ro;var no=function(t){return typeof t=="string"};ot.string=no;var nl=function(t){return no(t)||ro(t)};ot.text=nl;var ol=function(t){return Array.isArray(t)};ot.array=ol;var oo=function(t){return or(t)==="object"&&t!==null};ot.object=oo;var il=function(t){return typeof t=="function"};ot.fun=il;var al=function(t){return oo(t)&&"sel"in t&&"data"in t&&"children"in t&&"text"in t};ot.vnode=al;var sl={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},ul=function(t){return t.sel in sl};ot.svg=ul;var vt={},Ae=Object.prototype.hasOwnProperty,io=Object.prototype.toString,Ur=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,zr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):io.call(t)==="[object Array]"},Hr=function(t){if(!t||io.call(t)!=="[object Object]")return!1;var r=Ae.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Ae.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||Ae.call(t,o)},Kr=function(t,r){Ur&&r.name==="__proto__"?Ur(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Jr=function(t,r){if(r==="__proto__")if(Ae.call(t,r)){if(Gr)return Gr(t,r).value}else return;return t[r]},fl=function e(){var t,r,n,o,i,a,s=arguments[0],p=1,_=arguments.length,E=!1;for(typeof s=="boolean"&&(E=s,s=arguments[1]||{},p=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});p<_;++p)if(t=arguments[p],t!=null)for(r in t)n=Jr(s,r),o=Jr(t,r),s!==o&&(E&&o&&(Hr(o)||(i=zr(o)))?(i?(i=!1,a=n&&zr(n)?n:[]):a=n&&Hr(n)?n:{},Kr(s,{name:r,newValue:e(E,a,o)})):typeof o!="undefined"&&Kr(s,{name:r,newValue:o}));return s};function ir(e){return ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(e)}Object.defineProperty(vt,"__esModule",{value:!0});vt.reduceDeep=vt.omit=vt.mapObject=vt.flatifyKeys=vt.extend=vt.deepifyKeys=vt.assign=void 0;var ao=cl(fl),so=ll(ot);function uo(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(uo=function(o){return o?r:t})(e)}function ll(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ir(e)!=="object"&&typeof e!="function")return{default:e};var r=uo(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function cl(e){return e&&e.__esModule?e:{default:e}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fo=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ao.default.apply(void 0,[!0].concat(r))};vt.extend=fo;var pl=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ao.default.apply(void 0,[!1].concat(r))};vt.assign=pl;var dl=function e(t,r,n){for(var o=n,i=0;i<t.length;i++){var a=t[i];so.array(a)?o=e(a,r,o):o=r(o,a)}return o};vt.reduceDeep=dl;var pe=function(t,r){return Object.keys(t).map(function(n){return r(n,t[n])}).reduce(function(n,o){return fo(n,o)},{})};vt.mapObject=pe;var hl=function(t,r){return pe(t,function(n,o){var i=n.indexOf("-");if(i>-1&&r[n.slice(0,i)]!==void 0){var a=Qt({},n.slice(i+1),o);return Qt({},n.slice(0,i),a)}return Qt({},n,o)})};vt.deepifyKeys=hl;var vl=function e(t){return pe(t,function(r,n){return so.object(n)?pe(e(n),function(o,i){return Qt({},"".concat(r,"-").concat(o),i)}):Qt({},r,n)})};vt.flatifyKeys=vl;var yl=function(t,r){return pe(r,function(n,o){return n!==t?Qt({},n,o):{}})};vt.omit=yl;(function(e){function t(b){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t(b)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.createElementWithModules=e.createElement=void 0;var r=i(ot),n=i(vt);function o(b){if(typeof WeakMap!="function")return null;var f=new WeakMap,h=new WeakMap;return(o=function(d){return d?h:f})(b)}function i(b,f){if(!f&&b&&b.__esModule)return b;if(b===null||t(b)!=="object"&&typeof b!="function")return{default:b};var h=o(f);if(h&&h.has(b))return h.get(b);var w={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in b)if(g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)){var S=d?Object.getOwnPropertyDescriptor(b,g):null;S&&(S.get||S.set)?Object.defineProperty(w,g,S):w[g]=b[g]}return w.default=b,h&&h.set(b,w),w}function a(b,f,h){return f in b?Object.defineProperty(b,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):b[f]=h,b}var s=function(f){return r.text(f)?{text:f,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},p=function b(f){return r.svg(f)?n.assign(f,{data:n.omit("props",n.extend(f.data,{ns:"http://www.w3.org/2000/svg",attrs:n.omit("className",n.extend(f.data.props,{class:f.data.props?f.data.props.className:void 0}))}))},{children:r.undefinedv(f.children)?void 0:f.children.map(function(h){return b(h)})}):f},_={role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},E=function(f,h){return n.mapObject(f,function(w,d){var g=a({},w,d);if(_[w]&&h[_[w]]!==void 0)return a({},_[w],g);if(_[w]===null)return{};for(var S=Object.keys(_),T=0;T<S.length;T++){var R=S[T];if(R.charAt(R.length-1)==="*"&&w.indexOf(R.slice(0,-1))===0&&h[_[R]]!==void 0)return a({},_[R],g)}return h[w]!==void 0?a({},h[w]?h[w]:w,d):h.props!==void 0?{props:g}:g})},A=function(f,h){return p(E(n.deepifyKeys(f,h),h))},M=function(f){return f.length>1||!r.text(f[0])?void 0:f[0].toString()},m=function(f){return n.reduceDeep(f,function(h,w){var d=r.vnode(w)?w:s(w);return h.push(d),h},[])},c={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},u=function(f){return function(h,w){typeof h=="undefined"&&(h="UNDEFINED",cnosole.error("JSX Error: Capitalized HTML element without corresponding Sygnal factory.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope."));for(var d=arguments.length,g=new Array(d>2?d-2:0),S=2;S<d;S++)g[S-2]=arguments[S];if(r.fun(h)){if(h.name==="Fragment")return h(w||{},g);var T=h;h=h.name||"sygnal-factory",w||(w={}),w.sygnalFactory=T}var R=M(g);return p({sel:h,data:w?A(w,f):{},children:typeof R!="undefined"?void 0:m(g),text:R,elm:void 0,key:w?w.key:void 0})}};e.createElementWithModules=u;var O=u(c);e.createElement=O;var l={createElement:O,createElementWithModules:u};e.default=l})(eo);var ml=de(Os);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Fragment",{enumerable:!0,get:function(){return r.Fragment}}),Object.defineProperty(e,"jsx",{enumerable:!0,get:function(){return t.createElement}});var t=eo,r=ml})(pt);let gl=0;function bl(e){const t=new Array(16).fill().map((_,E)=>E),r=e.filter(_=>!_.deleted).map(_=>_.row*4+_.column),n=t.filter(_=>!r.includes(_));if(n.length===0)return e;const o=Math.floor(Math.random()*n.length),i=n[o],a=i%4,s=Math.floor(i/4),p=Math.ceil(Math.random()*1e3)<900?2:4;return[...e,{id:gl++,value:p,row:s,column:a,new:!0}]}function ar(e,t){let r,n,o,i,a;t=="UP"||t=="DOWN"?(r="column",n="row"):(r="row",n="column"),t=="UP"||t=="LEFT"?(o=0,i=3,a=1):(o=3,i=0,a=-1);const s=e.filter(E=>!E.deleted),p=[];let _=!1;for(let E=0;E<=3;E++){let A=null,M=o;for(let m=o;a==1?m<=i:m>=i;m+=a){const c=s.find(u=>u[r]===E&&u[n]===m);if(c){const u=c[n];if(c[n]=M,A!==null&&!A.merged&&c.value===A.value){const l=c.value*2;c.value=l,A.value=l,c[n]-=a,c.merged=!0,_=!0}else _=_||M!==u,M+=a;const O={id:c.id,value:c.value,row:c.row,column:c.column,merged:c.merged};A=O,p.push(O)}}}if(_){const E=e.map(A=>p.find(M=>M.id===A.id)||A);return E.forEach(A=>{A.deleted=A.deleted||A.merged,delete A.merged}),E}return!1}function _l(e){const t=e.map(o=>Jt({},o));let r=ar(t,"UP"),n=ar(t,"LEFT");return!(!r&&!n)}const wl=1e3;var Sl=mt.component({name:"TILE",model:{HIDE:(e,t,r)=>e.deleted?(setTimeout(n=>r("DELETE"),wl),{id:e.id,value:0,row:e.row,column:e.column,deleted:!0,hidden:!0}):mt.ABORT,DELETE:e=>{}},intent:({STATE:e,DOM:t})=>{const r=e.stream.filter(i=>i.deleted&&!i.hidden),n=t.select(".tile").events("transitionend");return{HIDE:r.map(i=>{const a=mt.xs.of(null).compose(mt.delay(500));return mt.xs.merge(a,n).take(1)}).flatten()}},view:({state:e})=>{const{id:t,value:r,row:n,column:o,hidden:i,deleted:a}=e,s=mt.classes("tile",`tile-${t}`,{new:!!e.new}),p=Math.log2(e.value||0),_=Math.floor(50*p/11+30),E={"--row":`       ${n}`,"--col":`       ${o}`,"--tile-color":`${_}%`,zIndex:a?10:1,display:i?"none":"inherit"};return pt.jsx("div",{className:s,id:`tile-${t}`,style:E},r)}});const Ol="ArrowUp",Al="ArrowDown",El="ArrowLeft",Pl="ArrowRight",$l=100,Yr={tiles:[],over:!1,max:2,score:0,locked:!1};var Nl=mt.component({name:"BOARD",initialState:Yr,calculated:{max:e=>e.tiles.filter(t=>t&&!t.deleted).reduce((t,r)=>t>r.value?t:r.value,0),lost:e=>!e.over&&e.tiles.filter(t=>!t.deleted).length===16&&!_l(e.tiles)},model:{RESTART:(e,t,r)=>(r("ADD_TILE"),r("ADD_TILE"),Jt({},Yr)),MOVE:(e,t,r)=>{if(e.locked||e.over)return mt.ABORT;const n=ar(e.tiles,t);if(!n)return mt.ABORT;const o=n.filter(i=>i.deleted).reduce((i,a)=>i+a.value,0);return setTimeout(i=>{r("ADD_TILE")},$l),ye(Jt({},e),{tiles:n,score:e.score+o,locked:!0})},ADD_TILE:(e,t)=>{const r=bl(e.tiles);return ye(Jt({},e),{tiles:r,locked:!1})},GAME_OVER:(e,t)=>ye(Jt({},e),{over:!0,won:t})},intent:({STATE:e,DOM:t})=>{const r=t.select("document").events("keydown").map(c=>c.key),n=c=>u=>u===c,o=r.filter(n(Ol)).mapTo("UP"),i=r.filter(n(Al)).mapTo("DOWN"),a=r.filter(n(El)).mapTo("LEFT"),s=r.filter(n(Pl)).mapTo("RIGHT"),p=mt.xs.merge(o,i,a,s),_=e.stream.filter(c=>!c.over&&c.max===2048).mapTo(!0),E=e.stream.filter(c=>c.lost===!0).mapTo(!1),A=mt.xs.merge(_,E),M=t.select(".restart, .gameover").events("click"),m=mt.xs.fromArray([1,2]);return{RESTART:M,GAME_OVER:A,MOVE:p,ADD_TILE:m}},view:({state:e,tiles:t})=>{const{score:r,max:n,over:o,won:i}=e;return pt.jsx("div",{className:"container"},pt.jsx("h1",null,"Sygnal 2048"),pt.jsx("div",{className:"info"},pt.jsx("div",{className:"largest"},"Largest: ",n),pt.jsx("div",{className:"score"},"Score: ",r)),pt.jsx("div",{className:"board-container"},pt.jsx("div",{className:"slot-board"},Array(16).fill().map(a=>pt.jsx("div",{className:"slot"}))),pt.jsx("div",{className:"tile-board"},t),o&&i&&pt.jsx("div",{className:"gameover won"},pt.jsx("span",{className:"won-message"},"YOU WON!!")),o&&!i&&pt.jsx("div",{className:"gameover lost"},pt.jsx("span",{className:"lost-message"},"GAME OVER"))),pt.jsx("div",{className:"restart-container"},pt.jsx("input",{type:"button",className:"restart",value:"Start Over"})))},children:{tiles:mt.collection(Sl,"tiles",{container:null})}});mt.run(Nl);
