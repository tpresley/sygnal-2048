(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H={},Fr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Fr);var uo=Fr,ze=Object.prototype.toString,jr=function(t){var r=ze.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&ze.call(t.callee)==="[object Function]"),n},le,Je;function co(){if(Je)return le;Je=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=jr,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(y){var l=y.constructor;return l&&l.prototype===y},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var y in window)try{if(!c["$"+y]&&t.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{u(window[y])}catch{return!0}}catch{return!0}return!1}(),h=function(y){if(typeof window>"u"||!d)return u(y);try{return u(y)}catch{return!1}};e=function(l){var f=l!==null&&typeof l=="object",p=r.call(l)==="[object Function]",m=n(l),v=f&&r.call(l)==="[object String]",O=[];if(!f&&!p&&!m)throw new TypeError("Object.keys called on a non-object");var g=s&&p;if(v&&l.length>0&&!t.call(l,0))for(var _=0;_<l.length;++_)O.push(String(_));if(m&&l.length>0)for(var A=0;A<l.length;++A)O.push(String(A));else for(var $ in l)!(g&&$==="prototype")&&t.call(l,$)&&O.push(String($));if(i)for(var N=h(l),E=0;E<a.length;++E)!(N&&a[E]==="constructor")&&t.call(l,a[E])&&O.push(a[E]);return O}}return le=e,le}var fo=Array.prototype.slice,lo=jr,Ye=Object.keys,Rt=Ye?function(t){return Ye(t)}:co(),Ke=Object.keys;Rt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return lo(n)?Ke(fo.call(n)):Ke(n)})}else Object.keys=Rt;return Object.keys||Rt};var po=Rt,ho=Error,yo=EvalError,mo=RangeError,vo=ReferenceError,Lr=SyntaxError,Rr=TypeError,_o=URIError,go=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Xe=typeof Symbol<"u"&&Symbol,bo=go,wo=function(){return typeof Xe!="function"||typeof Symbol!="function"||typeof Xe("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bo()},pe={__proto__:null,foo:{}},So=Object,Ao=function(){return{__proto__:pe}.foo===pe.foo&&!(pe instanceof So)},$o="Function.prototype.bind called on incompatible ",Oo=Object.prototype.toString,Eo=Math.max,Po="[object Function]",Ze=function(t,r){for(var n=[],o=0;o<t.length;o+=1)n[o]=t[o];for(var i=0;i<r.length;i+=1)n[i+t.length]=r[i];return n},No=function(t,r){for(var n=[],o=r,i=0;o<t.length;o+=1,i+=1)n[i]=t[o];return n},Co=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},Io=function(t){var r=this;if(typeof r!="function"||Oo.apply(r)!==Po)throw new TypeError($o+r);for(var n=No(arguments,1),o,i=function(){if(this instanceof o){var d=r.apply(this,Ze(n,arguments));return Object(d)===d?d:this}return r.apply(t,Ze(n,arguments))},s=Eo(0,r.length-n.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(o=Function("binder","return function ("+Co(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},To=Io,Br=Function.prototype.bind||To,xo=Function.prototype.call,Do=Object.prototype.hasOwnProperty,ko=Br,Mo=ko.call(xo,Do),I,Fo=ho,jo=yo,Lo=mo,Ro=vo,At=Lr,wt=Rr,Bo=_o,Ur=Function,he=function(e){try{return Ur('"use strict"; return ('+e+").constructor;")()}catch{}},ft=Object.getOwnPropertyDescriptor;if(ft)try{ft({},"")}catch{ft=null}var de=function(){throw new wt},Uo=ft?function(){try{return arguments.callee,de}catch{try{return ft(arguments,"callee").get}catch{return de}}}():de,mt=wo(),Go=Ao(),F=Object.getPrototypeOf||(Go?function(e){return e.__proto__}:null),gt={},Wo=typeof Uint8Array>"u"||!F?I:F(Uint8Array),lt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":mt&&F?F([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":gt,"%AsyncGenerator%":gt,"%AsyncGeneratorFunction%":gt,"%AsyncIteratorPrototype%":gt,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Fo,"%eval%":eval,"%EvalError%":jo,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":Ur,"%GeneratorFunction%":gt,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mt&&F?F(F([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map>"u"||!mt||!F?I:F(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":Lo,"%ReferenceError%":Ro,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set>"u"||!mt||!F?I:F(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mt&&F?F(""[Symbol.iterator]()):I,"%Symbol%":mt?Symbol:I,"%SyntaxError%":At,"%ThrowTypeError%":Uo,"%TypedArray%":Wo,"%TypeError%":wt,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":Bo,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet};if(F)try{null.error}catch(e){var Ho=F(F(e));lt["%Error.prototype%"]=Ho}var qo=function e(t){var r;if(t==="%AsyncFunction%")r=he("async function () {}");else if(t==="%GeneratorFunction%")r=he("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=he("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&F&&(r=F(o.prototype))}return lt[t]=r,r},Qe={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Dt=Br,Xt=Mo,Vo=Dt.call(Function.call,Array.prototype.concat),zo=Dt.call(Function.apply,Array.prototype.splice),tr=Dt.call(Function.call,String.prototype.replace),Zt=Dt.call(Function.call,String.prototype.slice),Jo=Dt.call(Function.call,RegExp.prototype.exec),Yo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ko=/\\(\\)?/g,Xo=function(t){var r=Zt(t,0,1),n=Zt(t,-1);if(r==="%"&&n!=="%")throw new At("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new At("invalid intrinsic syntax, expected opening `%`");var o=[];return tr(t,Yo,function(i,s,a,u){o[o.length]=a?tr(u,Ko,"$1"):s||i}),o},Zo=function(t,r){var n=t,o;if(Xt(Qe,n)&&(o=Qe[n],n="%"+o[0]+"%"),Xt(lt,n)){var i=lt[n];if(i===gt&&(i=qo(n)),typeof i>"u"&&!r)throw new wt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new At("intrinsic "+t+" does not exist!")},Gr=function(t,r){if(typeof t!="string"||t.length===0)throw new wt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new wt('"allowMissing" argument must be a boolean');if(Jo(/^%?[^%]*%?$/,t)===null)throw new At("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Xo(t),o=n.length>0?n[0]:"",i=Zo("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],zo(n,Vo([0,1],c)));for(var d=1,h=!0;d<n.length;d+=1){var y=n[d],l=Zt(y,0,1),f=Zt(y,-1);if((l==='"'||l==="'"||l==="`"||f==='"'||f==="'"||f==="`")&&l!==f)throw new At("property names with quotes must have matching quotes");if((y==="constructor"||!h)&&(u=!0),o+="."+y,s="%"+o+"%",Xt(lt,s))a=lt[s];else if(a!=null){if(!(y in a)){if(!r)throw new wt("base intrinsic for "+t+" exists, but the property is not available.");return}if(ft&&d+1>=n.length){var p=ft(a,y);h=!!p,h&&"get"in p&&!("originalValue"in p.get)?a=p.get:a=a[y]}else h=Xt(a,y),a=a[y];h&&!u&&(lt[s]=a)}}return a},Qo=Gr,Bt=Qo("%Object.defineProperty%",!0)||!1;if(Bt)try{Bt({},"a",{value:1})}catch{Bt=!1}var Wr=Bt,ti=Gr,Ut=ti("%Object.getOwnPropertyDescriptor%",!0);if(Ut)try{Ut([],"length")}catch{Ut=null}var Hr=Ut,er=Wr,ei=Lr,vt=Rr,rr=Hr,ri=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new vt("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new vt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new vt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new vt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new vt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new vt("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!rr&&rr(t,r);if(er)er(t,r,{configurable:s===null&&u?u.configurable:!s,enumerable:o===null&&u?u.enumerable:!o,value:n,writable:i===null&&u?u.writable:!i});else if(a||!o&&!i&&!s)t[r]=n;else throw new ei("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Pe=Wr,qr=function(){return!!Pe};qr.hasArrayLengthDefineBug=function(){if(!Pe)return null;try{return Pe([],"length",{value:1}).length!==1}catch{return!0}};var ni=qr,oi=po,ii=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",si=Object.prototype.toString,ai=Array.prototype.concat,nr=ri,ui=function(e){return typeof e=="function"&&si.call(e)==="[object Function]"},Vr=ni(),ci=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!ui(n)||!n())return}Vr?nr(e,t,r,!0):nr(e,t,r)},zr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=oi(t);ii&&(n=ai.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)ci(e,n[o],t[n[o]],r[n[o]])};zr.supportsDescriptors=!!Vr;var Jr=zr,Gt={exports:{}};typeof self<"u"?Gt.exports=self:typeof window<"u"?Gt.exports=window:Gt.exports=Function("return this")();var Yr=Gt.exports,fi=Yr,Kr=function(){return typeof z!="object"||!z||z.Math!==Math||z.Array!==Array?fi:z},li=Jr,pi=Hr,hi=Kr,di=function(){var t=hi();if(li.supportsDescriptors){var r=pi(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},yi=Jr,mi=Yr,Xr=Kr,vi=di,_i=Xr(),Zr=function(){return _i};yi(Zr,{getPolyfill:Xr,implementation:mi,shim:vi});var gi=Zr,bi=z&&z.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(H,"__esModule",{value:!0});H.NO_IL=Me=H.NO=H.MemoryStream=X=H.Stream=void 0;var wi=uo,Si=gi,Mt=wi.default(Si.getPolyfill()),w={},Me=H.NO=w;function B(){}function Wt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Ai(e,t){return function(n){return e(n)&&t(n)}}function Fe(e,t,r){try{return e.f(t)}catch(n){return r._e(n),w}}var ut={_n:B,_e:B,_c:B};H.NO_IL=ut;function or(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var $i=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Oi=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Ei=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Oi(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Pi=function(){function e(t){this.type="merge",this.insArr=t,this.out=w,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===w)return;t._c()}},e}(),Ni=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==w&&r.up(t,this.i)){var o=Wt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==w&&--t.Nc===0&&t.out._c()},e}(),Ci=function(){function e(t){this.type="combine",this.insArr=t,this.out=w,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===w?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=w,r[i]._add(new Ni(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=w,this.ils=[],this.vals=[]},e}(),Ii=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Ti=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(B,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),xi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Di=function(){function e(t,r){this.type="debug",this.ins=t,this.out=w,this.s=B,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this.s,o=this.l;if(n!==B)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),ki=function(){function e(t,r){this.type="drop",this.ins=r,this.out=w,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Mi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Fi=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=w,this.o=t,this.oil=ut}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Mi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=w,this.oil=ut},e.prototype.end=function(){var t=this.out;t!==w&&t._c()},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ye=function(){function e(t,r){this.type="filter",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Fe(this,t,r);n===w||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),ji=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=w,this.op.less()},e}(),Li=function(){function e(t){this.type="flatten",this.ins=t,this.out=w,this.open=!0,this.inner=w,this.il=ut}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=w,this.il=ut,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==w&&this.inner._remove(this.il),this.out=w,this.open=!0,this.inner=w,this.il=ut},e.prototype.less=function(){var t=this.out;t!==w&&!this.open&&this.inner===w&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this,o=n.inner,i=n.il;o!==w&&i!==ut&&o._remove(i),(this.inner=t)._add(this.il=new ji(r,this))}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Ri=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=w,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Fe(this,t,r);n!==w&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Bi=function(){function e(t){this.type="last",this.ins=t,this.out=w,this.has=!1,this.val=w}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.val=w},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Ui=function(){function e(t,r){this.type="map",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Fe(this,t,r);n!==w&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Gi=function(){function e(t){this.type="remember",this.ins=t,this.out=w}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),Wi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==w)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Hi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=w,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),qi=function(){function e(t,r){this.type="take",this.ins=r,this.out=w,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),je=function(){function e(t){this._prod=t||w,this._ils=[],this._stopID=w,this._dl=w,this._d=!1,this._target=null,this._err=w}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Wt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===w){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Wt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Wt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==w&&this._prod._stop(),this._err=w,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=w,this._stopID=w},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==w)clearTimeout(this._stopID),this._stopID=w;else{var o=this._prod;o!==w&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==w&&o.length<=0?(this._err=w,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==w)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof tt?tt:e},e.prototype.addListener=function(t){t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new $i(this,t)},e.prototype[Mt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");or(t)}return new e(t)},e.createWithMemory=function(t){return t&&or(t),new tt(t)},e.never=function(){return new e({_start:B,_stop:B})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:B})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:B})},e.from=function(t){if(typeof t[Mt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Ii(t))},e.fromPromise=function(t){return new e(new Ti(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Mt]=="function"?t[Mt]():t;return new e(new Ei(r))},e.periodic=function(t){return new e(new xi(t))},e.prototype._map=function(t){return new(this.ctor())(new Ui(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ye?new e(new ye(Ai(r.f,t),r.ins)):new e(new ye(t,this))},e.prototype.take=function(t){return new(this.ctor())(new qi(t,this))},e.prototype.drop=function(t){return new e(new ki(t,this))},e.prototype.last=function(){return new e(new Bi(this))},e.prototype.startWith=function(t){return new tt(new Hi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Fi(t,this))},e.prototype.fold=function(t,r){return new tt(new Ri(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Wi(t,this))},e.prototype.flatten=function(){return new e(new Li(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new tt(new Gi(this))},e.prototype.debug=function(t){return new(this.ctor())(new Di(this,t))},e.prototype.imitate=function(t){if(t instanceof tt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._dl=t):(this._d=!1,this._dl=w)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Pi(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ci(r))},e}(),X=H.Stream=je,tt=function(e){bi(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==w)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=w;else if(this._has)r._n(this._v);else{var i=this._prod;i!==w&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(je);H.MemoryStream=tt;var Vi=je,P=H.default=Vi,Le={};Object.defineProperty(Le,"__esModule",{value:!0});function Qr(){var e;return typeof window<"u"?e=window:typeof z<"u"?e=z:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function zi(e){Qr().adaptStream=e}Le.setAdapt=zi;function Ji(e){return Qr().adaptStream(e)}var q=Le.adapt=Ji;function Yi(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Ki(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i<"u"){n[o]=i;return}var s=t["*"];if(typeof s<"u"){n[o]=s;return}n[o]=r}),n}function Xi(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Zi(e,t,r){var n={};for(var o in t){var i=e[o],s=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=q(i.isolateSink(P.fromObservable(s),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var tn=0;function ir(){return"cycle"+ ++tn}function it(e,t){t===void 0&&(t=ir()),Yi(e,t);var r=typeof t=="object"?ir():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=Ki(i,n,r),c=Xi(i,u),d=e.apply(void 0,[c].concat(s)),h=Zi(i,d,u);return h}}it.reset=function(){return tn=0};var se={};Object.defineProperty(se,"__esModule",{value:!0});se.DropRepeatsOperator=void 0;var Qi=H,me={},en=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=me,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=me},e.prototype._n=function(t){var r=this.out;if(r){var n=this.v;n!==me&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;t&&t._c()},e}();se.DropRepeatsOperator=en;function ts(e){return e===void 0&&(e=void 0),function(r){return new Qi.Stream(new en(r,e))}}var es=se.default=ts,Ne=function(){return Ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ne.apply(this,arguments)};function rs(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r>"u"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function rn(e){return typeof e=="string"||typeof e=="number"?function(r){if(!(typeof r>"u"))return r[e]}:e.get}function ns(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?rs(r,e,n):typeof r>"u"?(o={},o[e]=n,o):Ne({},r,(i={},i[e]=n,i))}:e.set}function os(e,t){return e.select(t)}function is(e,t){var r=rn(t),n=ns(t);return e.map(function(o){return function(s){var a=r(s),u=o(a);return a===u?s:n(s,u)}})}var Ct=function(){function e(t,r){this.isolateSource=os,this.isolateSink=is,this._stream=t.filter(function(n){return typeof n<"u"}).compose(es()).remember(),this._name=r,this.stream=q(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=rn(t);return new e(this._stream.map(r),this._name)},e}(),ss=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),as=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=r.length,a=0;a<s;++a){var u=r[a],c=u._key,d=P.fromObservable(u[i]||P.never());n.has(c)||(n.set(c,new ss(o,this,d)),d._add(n.get(c)))}n.forEach(function(h,y){(!t.dict.has(y)||!t.dict.get(y))&&(h.ins._remove(h),h.ins=null,h.out=null,n.delete(y))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function us(e){return function(r){return new X(new as(e,r))}}var cs=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Me,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),fs=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var s=t[i],a=s._key;if(!n.has(a))return;var u=n.get(a).val;if(u===Me)return;o[i]=u}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=t.dict,a=r.length,u=!1;if(n.forEach(function(l,f){s.has(f)||(l.ins._remove(l),l.ins=null,l.out=null,l.val=null,n.delete(f),u=!0)}),a===0){o._n([]);return}for(var c=0;c<a;++c){var d=r[c],h=d._key;if(!d[i])throw new Error("pickCombine found an undefined child sink stream");var y=P.fromObservable(d[i]);n.has(h)||(n.set(h,new cs(h,o,this,y)),y._add(n.get(h)))}u&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function ls(e){return function(r){return new X(new fs(e,r))}}var Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qt.apply(this,arguments)},ps=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return q(this._instances$.compose(us(t)))},e.prototype.pickCombine=function(t){return q(this._instances$.compose(ls(t)))},e}();function hs(e){return{"*":null}}function ds(e,t){return{get:function(r){if(!(typeof r>"u")){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r>"u"?[n]:typeof n>"u"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var ys={get:function(e){return e},set:function(e,t){return t}};function ms(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||hs,s=P.fromObservable(r[n].stream),a=s.fold(function(u,c){var d,h,y,l,f=u.dict;if(Array.isArray(c)){for(var p=Array(c.length),m=new Set,v=0,O=c.length;v<O;++v){var g=""+(o?o(c[v],v):v);if(m.add(g),f.has(g))p[v]=f.get(g);else{var _=o?ds(o,g):""+v,A=i(g),$=typeof A=="string"?(d={"*":A},d[n]=_,d):Qt({},A,(h={},h[n]=_,h)),N=e.itemFactory?e.itemFactory(c[v],v):e.item,E=it(N,$)(r);f.set(g,E),p[v]=E}p[v]._key=g}return f.forEach(function(C,D){m.has(D)||f.delete(D)}),m.clear(),{dict:f,arr:p}}else{f.clear();var g=""+(o?o(c,0):"this"),_=ys,A=i(g),$=typeof A=="string"?(y={"*":A},y[n]=_,y):Qt({},A,(l={},l[n]=_,l)),N=e.itemFactory?e.itemFactory(c,0):e.item,E=it(N,$)(r);return f.set(g,E),{dict:f,arr:[E]}}},{dict:new Map,arr:[]});return e.collectSinks(new ps(a))}}var nn={};Object.defineProperty(nn,"__esModule",{value:!0});var vs=H,_s=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;r&&r._n(t)},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;if(t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function gs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new vs.Stream(new _s(e))}var on=nn.default=gs,sn={};Object.defineProperty(sn,"__esModule",{value:!0});function bs(){return typeof queueMicrotask<"u"?queueMicrotask:typeof setImmediate<"u"?setImmediate:typeof process<"u"?process.nextTick:setTimeout}var an=sn.default=bs,ve=an();function ws(e,t){return function(n){var o=P.create(),i=o.fold(function(c,d){return d(c)},void 0).drop(1),s=n;s[t]=new Ct(i,t);var a=e(s);if(a[t]){var u=on(P.fromObservable(a[t]),P.never());u.subscribe({next:function(c){return ve(function(){return o._n(c)})},error:function(c){return ve(function(){return o._e(c)})},complete:function(){return ve(function(){return o._c()})}})}return a}}function Ss(){var e;return typeof window<"u"?e=window:typeof global<"u"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function As(e){return Ss().adaptStream(e)}function $s(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=P.create());return t}function Os(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Es(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=As(e[t]));return e}function Ps(e,t){var r=an(),n=Object.keys(e).filter(function(a){return!!t[a]}),o={},i={};n.forEach(function(a){o[a]={_n:[],_e:[]},i[a]={next:function(u){return o[a]._n.push(u)},error:function(u){return o[a]._e.push(u)},complete:function(){}}});var s=n.map(function(a){return P.fromObservable(e[a]).subscribe(i[a])});return n.forEach(function(a){var u=t[a],c=function(h){r(function(){return u._n(h)})},d=function(h){r(function(){(console.error||console.log)(h),u._e(h)})};o[a]._n.forEach(c),o[a]._e.forEach(d),i[a].next=c,i[a].error=d,i[a]._n=c,i[a]._e=d}),o=null,function(){s.forEach(function(u){return u.unsubscribe()})}}function Ns(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Cs(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function un(e){return Object.keys(e).length===0}function Is(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(un(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Ts(t),n=e(r.sources);typeof window<"u"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Ts(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(un(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=$s(e),r=Os(e,t),n=Es(r);function o(s){return Ps(s,t)}function i(){Cs(n),Ns(t)}return{sources:n,run:o,dispose:i}}function xs(e,t){return document.createElement(e,t)}function Ds(e,t,r){return document.createElementNS(e,t,r)}function ks(){return pt(document.createDocumentFragment())}function Ms(e){return document.createTextNode(e)}function Fs(e){return document.createComment(e)}function js(e,t,r){if(Z(e)){let n=e;for(;n&&Z(n);)n=pt(n).parent;e=n??e}Z(t)&&(t=pt(t,e)),r&&Z(r)&&(r=pt(r).firstChildNode),e.insertBefore(t,r)}function Ls(e,t){e.removeChild(t)}function Rs(e,t){Z(t)&&(t=pt(t,e)),e.appendChild(t)}function cn(e){if(Z(e)){for(;e&&Z(e);)e=pt(e).parent;return e??null}return e.parentNode}function Bs(e){var t;if(Z(e)){const r=pt(e),n=cn(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function Us(e){return e.tagName}function Gs(e,t){e.textContent=t}function Ws(e){return e.textContent}function Hs(e){return e.nodeType===1}function qs(e){return e.nodeType===3}function Vs(e){return e.nodeType===8}function Z(e){return e.nodeType===11}function pt(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t??null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const fn={createElement:xs,createElementNS:Ds,createTextNode:Ms,createDocumentFragment:ks,createComment:Fs,insertBefore:js,removeChild:Ls,appendChild:Rs,parentNode:cn,nextSibling:Bs,tagName:Us,setTextContent:Gs,getTextContent:Ws,isElement:Hs,isText:qs,isComment:Vs,isDocumentFragment:Z};function K(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const te=Array.isArray;function Ht(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Ft(e){return e===void 0}function W(e){return e!==void 0}const _e=K("",{},[],void 0,void 0);function Pt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),s=e.sel===t.sel,a=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return s&&o&&i&&a}function zs(){throw new Error("The document fragment is not supported on this platform.")}function Js(e,t){return e.isElement(t)}function Ys(e,t){return e.isDocumentFragment(t)}function Ks(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const s=(n=e[i])===null||n===void 0?void 0:n.key;s!==void 0&&(o[s]=i)}return o}const Xs=["create","update","remove","destroy","pre","post"];function Zs(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=fn;for(const f of Xs)for(const p of e){const m=p[f];m!==void 0&&n[f].push(m)}function i(f){const p=f.id?"#"+f.id:"",m=f.getAttribute("class"),v=m?"."+m.split(" ").join("."):"";return K(o.tagName(f).toLowerCase()+p+v,{},[],void 0,f)}function s(f){return K(void 0,{},[],void 0,f)}function a(f,p){return function(){if(--p===0){const v=o.parentNode(f);v!==null&&o.removeChild(v,f)}}}function u(f,p){var m,v,O,g;let _,A=f.data;if(A!==void 0){const E=(m=A.hook)===null||m===void 0?void 0:m.init;W(E)&&(E(f),A=f.data)}const $=f.children,N=f.sel;if(N==="!")Ft(f.text)&&(f.text=""),f.elm=o.createComment(f.text);else if(N==="")f.elm=o.createTextNode(f.text);else if(N!==void 0){const E=N.indexOf("#"),C=N.indexOf(".",E),D=E>0?E:N.length,k=C>0?C:N.length,M=E!==-1||C!==-1?N.slice(0,Math.min(D,k)):N,L=f.elm=W(A)&&W(_=A.ns)?o.createElementNS(_,M,A):o.createElement(M,A);for(D<k&&L.setAttribute("id",N.slice(D+1,k)),C>0&&L.setAttribute("class",N.slice(k+1).replace(/\./g," ")),_=0;_<n.create.length;++_)n.create[_](_e,f);if(Ht(f.text)&&(!te($)||$.length===0)&&o.appendChild(L,o.createTextNode(f.text)),te($))for(_=0;_<$.length;++_){const yt=$[_];yt!=null&&o.appendChild(L,u(yt,p))}const Q=f.data.hook;W(Q)&&((v=Q.create)===null||v===void 0||v.call(Q,_e,f),Q.insert&&p.push(f))}else if(!((O=r==null?void 0:r.experimental)===null||O===void 0)&&O.fragments&&f.children){for(f.elm=((g=o.createDocumentFragment)!==null&&g!==void 0?g:zs)(),_=0;_<n.create.length;++_)n.create[_](_e,f);for(_=0;_<f.children.length;++_){const E=f.children[_];E!=null&&o.appendChild(f.elm,u(E,p))}}else f.elm=o.createTextNode(f.text);return f.elm}function c(f,p,m,v,O,g){for(;v<=O;++v){const _=m[v];_!=null&&o.insertBefore(f,u(_,g),p)}}function d(f){var p,m;const v=f.data;if(v!==void 0){(m=(p=v==null?void 0:v.hook)===null||p===void 0?void 0:p.destroy)===null||m===void 0||m.call(p,f);for(let O=0;O<n.destroy.length;++O)n.destroy[O](f);if(f.children!==void 0)for(let O=0;O<f.children.length;++O){const g=f.children[O];g!=null&&typeof g!="string"&&d(g)}}}function h(f,p,m,v){for(var O,g;m<=v;++m){let _,A;const $=p[m];if($!=null)if(W($.sel)){d($),_=n.remove.length+1,A=a($.elm,_);for(let E=0;E<n.remove.length;++E)n.remove[E]($,A);const N=(g=(O=$==null?void 0:$.data)===null||O===void 0?void 0:O.hook)===null||g===void 0?void 0:g.remove;W(N)?N($,A):A()}else $.children?(d($),h(f,$.children,0,$.children.length-1)):o.removeChild(f,$.elm)}}function y(f,p,m,v){let O=0,g=0,_=p.length-1,A=p[0],$=p[_],N=m.length-1,E=m[0],C=m[N],D,k,M,L;for(;O<=_&&g<=N;)A==null?A=p[++O]:$==null?$=p[--_]:E==null?E=m[++g]:C==null?C=m[--N]:Pt(A,E)?(l(A,E,v),A=p[++O],E=m[++g]):Pt($,C)?(l($,C,v),$=p[--_],C=m[--N]):Pt(A,C)?(l(A,C,v),o.insertBefore(f,A.elm,o.nextSibling($.elm)),A=p[++O],C=m[--N]):Pt($,E)?(l($,E,v),o.insertBefore(f,$.elm,A.elm),$=p[--_],E=m[++g]):(D===void 0&&(D=Ks(p,O,_)),k=D[E.key],Ft(k)?(o.insertBefore(f,u(E,v),A.elm),E=m[++g]):Ft(D[C.key])?(o.insertBefore(f,u(C,v),o.nextSibling($.elm)),C=m[--N]):(M=p[k],M.sel!==E.sel?o.insertBefore(f,u(E,v),A.elm):(l(M,E,v),p[k]=void 0,o.insertBefore(f,M.elm,A.elm)),E=m[++g]));g<=N&&(L=m[N+1]==null?null:m[N+1].elm,c(f,L,m,g,N,v)),O<=_&&h(f,p,O,_)}function l(f,p,m){var v,O,g,_,A,$,N,E;const C=(v=p.data)===null||v===void 0?void 0:v.hook;(O=C==null?void 0:C.prepatch)===null||O===void 0||O.call(C,f,p);const D=p.elm=f.elm;if(f===p)return;if(p.data!==void 0||W(p.text)&&p.text!==f.text){(g=p.data)!==null&&g!==void 0||(p.data={}),(_=f.data)!==null&&_!==void 0||(f.data={});for(let L=0;L<n.update.length;++L)n.update[L](f,p);(N=($=(A=p.data)===null||A===void 0?void 0:A.hook)===null||$===void 0?void 0:$.update)===null||N===void 0||N.call($,f,p)}const k=f.children,M=p.children;Ft(p.text)?W(k)&&W(M)?k!==M&&y(D,k,M,m):W(M)?(W(f.text)&&o.setTextContent(D,""),c(D,null,M,0,M.length-1,m)):W(k)?h(D,k,0,k.length-1):W(f.text)&&o.setTextContent(D,""):f.text!==p.text&&(W(k)&&h(D,k,0,k.length-1),o.setTextContent(D,p.text)),(E=C==null?void 0:C.postpatch)===null||E===void 0||E.call(C,f,p)}return function(p,m){let v,O,g;const _=[];for(v=0;v<n.pre.length;++v)n.pre[v]();for(Js(o,p)?p=i(p):Ys(o,p)&&(p=s(p)),Pt(p,m)?l(p,m,_):(O=p.elm,g=o.parentNode(O),u(m,_),g!==null&&(o.insertBefore(g,m.elm,o.nextSibling(O)),h(g,[p],0,0))),v=0;v<_.length;++v)_[v].data.hook.insert(_[v]);for(v=0;v<n.post.length;++v)n.post[v]();return m}}function Re(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Re(i,o.children,o.sel)}}function et(e,t,r){let n={},o,i,s;if(r!==void 0?(t!==null&&(n=t),te(r)?o=r:Ht(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(te(t)?o=t:Ht(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(s=0;s<o.length;++s)Ht(o[s])&&(o[s]=K(void 0,void 0,void 0,o[s],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&Re(n,o,e),K(e,n,o,i,void 0)}function Ce(e,t){const r=fn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),s=i?"."+i.split(" ").join("."):"",a=r.tagName(e).toLowerCase()+o+s,u={},c={},d={},h=[];let y,l,f;const p=e.attributes,m=e.childNodes;for(l=0,f=p.length;l<f;l++)y=p[l].nodeName,y.startsWith("data-")?c[y.slice(5)]=p[l].nodeValue||"":y!=="id"&&y!=="class"&&(u[y]=p[l].nodeValue);for(l=0,f=m.length;l<f;l++)h.push(Ce(m[l]));return Object.keys(u).length>0&&(d.attrs=u),Object.keys(c).length>0&&(d.dataset=c),a.startsWith("svg")&&(a.length===3||a[3]==="."||a[3]==="#")&&Re(d,h,a),K(a,d,h,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),K(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),K("!",{},[],n,e)):K("",{},[],void 0,e)}const Qs="http://www.w3.org/1999/xlink",ta="http://www.w3.org/2000/xmlns/",ea="http://www.w3.org/XML/1998/namespace",sr=58,ra=120,na=109;function ar(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const s=i[r];o[r]!==s&&(s===!0?n.setAttribute(r,""):s===!1?n.removeAttribute(r):r.charCodeAt(0)!==ra?n.setAttribute(r,s):r.charCodeAt(3)===sr?n.setAttributeNS(ea,r,s):r.charCodeAt(5)===sr?r.charCodeAt(1)===na?n.setAttributeNS(ta,r,s):n.setAttributeNS(Qs,r,s):n.setAttribute(r,s))}for(r in o)r in i||n.removeAttribute(r)}}const oa={create:ar,update:ar};function ur(e,t){let r,n;const o=t.elm;let i=e.data.class,s=t.data.class;if(!(!i&&!s)&&i!==s){i=i||{},s=s||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(s,n)&&o.classList.remove(n);for(n in s)r=s[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const ia={create:ur,update:ur},cr=/[A-Z]/g;function fr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const s=r.dataset;for(i in n)i in o||(s?i in s&&delete s[i]:r.removeAttribute("data-"+i.replace(cr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(s?s[i]=o[i]:r.setAttribute("data-"+i.replace(cr,"-$&").toLowerCase(),o[i]))}const sa={create:fr,update:fr};function lr(e,t){let r,n,o;const i=t.elm;let s=e.data.props,a=t.data.props;if(!(!s&&!a)&&s!==a){s=s||{},a=a||{};for(r in a)n=a[r],o=s[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const aa={create:lr,update:lr},pr=typeof(window==null?void 0:window.requestAnimationFrame)=="function"?window.requestAnimationFrame.bind(window):setTimeout,ua=function(e){pr(function(){pr(e)})};let Ie=!1;function ca(e,t,r){ua(function(){e[t]=r})}function hr(e,t){let r,n;const o=t.elm;let i=e.data.style,s=t.data.style;if(!i&&!s||i===s)return;i=i||{},s=s||{};const a="delayed"in i;for(n in i)n in s||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in s)if(r=s[n],n==="delayed"&&s.delayed)for(const u in s.delayed)r=s.delayed[u],(!a||r!==i.delayed[u])&&ca(o.style,u,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function fa(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function la(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ie||(e.elm.offsetLeft,Ie=!0);let n;const o=e.elm;let i=0;const s=r.remove;let a=0;const u=[];for(n in s)u.push(n),o.style[n]=s[n];const d=getComputedStyle(o)["transition-property"].split(", ");for(;i<d.length;++i)u.indexOf(d[i])!==-1&&a++;o.addEventListener("transitionend",function(h){h.target===o&&--a,a===0&&t()})}function pa(){Ie=!1}const ha={pre:pa,create:hr,update:hr,destroy:fa,remove:la};function ee(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return X.create({start:function(a){n?i=function(c){pn(c,n),a.next(c)}:i=function(c){a.next(c)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function ln(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!ln(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function pn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(da(t))t(e)&&e.preventDefault();else if(typeof t=="object")ln(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function da(e){return typeof e=="function"}var ya=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=q(P.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(P.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ee(document,t,r.useCapture,r.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},e}(),ma=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=q(P.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(P.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ee(document.body,t,r.useCapture,r.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},e}();function va(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function _a(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function ga(e){return e.nodeType===11}function ba(e){if(typeof e!="string"&&!va(e))throw new Error("Given container is not a DOM element neither a selector string.")}function wa(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function hn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Be(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var dn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Be(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function Sa(e){return Array.prototype.slice.call(e)}var yn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=hn(t),n=new dn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:Sa(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),xt=function(){return xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xt.apply(this,arguments)};function Aa(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=mn(r),i=xt({},n,{data:xt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return xt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function mn(e){return{type:_a(e)?"sibling":"total",scope:e}}var $a=function(){function e(t,r,n,o,i,s){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(a,u){return new e(a._rootElement$,a._sanitation$,a._namespace.concat(mn(u)),a._isolateModule,a._eventDelegator,a._name)},this.isolateSink=Aa(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new yn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=q(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new ya(this._name);if(t==="body")return new ma(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=q(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),$t={},Oa=z&&z.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty($t,"__esModule",{value:!0});$t.SampleCombineOperator=$t.SampleCombineListener=void 0;var Ea=H,rt={},vn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==rt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();$t.SampleCombineListener=vn;var _n=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=rt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=rt,r[i]._add(new vn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=rt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==rt&&(this.Nn>0||r._n(Oa([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==rt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==rt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===rt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();$t.SampleCombineOperator=_n;var gn;gn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Ea.Stream(new _n(o,t))}};var Pa=$t.default=gn;function bn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,s=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,a=o<i?t.slice(o+1,i):void 0,u=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:s,id:a,className:u}}function Na(e){var t=bn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var s=Object.keys(o).filter(function(a){return o[a]});r+=" "+s.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var It;typeof self<"u"?It=self:typeof window<"u"?It=window:typeof global<"u"?It=global:It=Function("return this")();var dr=It.Symbol;typeof dr=="function"&&dr("parent");var Ca=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(ga(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=bn(t),n=r.tagName,o=r.id,i=Na(t),s=t.data||{},a=s.props||{},u=a.id,c=u===void 0?o:u,d=typeof c=="string"&&c.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return d?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return K("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,s=o?"#"+o:"",a=i?"."+i.split(" ").join("."):"",u=et(""+n.toLowerCase()+s+a,{},t);return u.data=u.data||{},u.data.isolate=u.data.isolate||[],u},e}(),Ia=[ha,ia,aa,oa,sa],wn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];u||(u=[void 0,{}],o[1][a]=u),o=u}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];if(!u)if(r)u=[void 0,{}],o[1][a]=u;else return;o=u}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),Ta=function(){function e(){this.namespaceTree=new wn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,s=i===void 0?{}:i,a=s.isolate;Array.isArray(a)&&t.insertElement(a,o)},update:function(r,n){var o=r.elm,i=r.data,s=i===void 0?{}:i,a=n.elm,u=n.data,c=u===void 0?{}:u,d=s.isolate,h=c.isolate;Be(d,h)||Array.isArray(d)&&t.removeElement(o),Array.isArray(h)&&t.insertElement(h,a)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),xa=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),re=function(){return re=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},re.apply(this,arguments)},Da=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],ka=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new wn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,s){return n.setupDOMListener(s,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=P.never(),s,a=new dn(r,this.isolateModule),u=o===void 0?Da.indexOf(t)===-1:o;if(u)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),s=this.insertListener(i,a,t,n),i;var c=[];this.nonBubblingListenersToAdd.forEach(function(A){return c.push(A)});for(var d=void 0,h=0,y=c.length,l=function(A){A[0];var $=A[1],N=A[2];return A[3],t===$&&Be(N.namespace,r)};!d&&h<y;){var f=c[h];d=l(f)?f:d,h++}var p=d,m;if(p){var O=p[0];m=O}else{var v=new yn(r,this.isolateModule);s=this.insertListener(i,a,t,n),p=[i,t,v,s],m=i,this.nonBubblingListenersToAdd.add(p),this.setupNonBubblingListener(p)}var g=this,_=null;return P.create({start:function(A){_=m.subscribe(A)},stop:function(){p[0];var A=p[1],$=p[2];p[3];var N=$.call();N.forEach(function(E){var C=E.subs;C&&C[A]&&(C[A].unsubscribe(),delete C[A])}),g.nonBubblingListenersToAdd.delete(p),_.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(s,a){if(s.has(t)){n.push([a,t]);var u=t.subs;u&&Object.keys(u).forEach(function(c){u[c].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);i&&(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],s=r._namespace,a=s.length;do i.push(this.getVirtualListeners(n,s,!0,a)),a--;while(a>=0&&s[a].type!=="total");for(var u=re({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),c=0;c<i.length;c++)i[c].add(u,s.length);return u},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var s=i-1;s>=0;s--){if(r[s].type==="total"){i=s+1;break}i=s}var a=this.virtualListeners.getDefault(r,function(){return new Map},i);return a.has(t)||a.set(t,new xa),a.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=ee(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(this.origin){var i=n.call();if(i.length){var s=this;i.forEach(function(a){var u,c=a.subs;if(!c||!c[r]){var d=ee(a,r,!1,!1,o.passive).subscribe({next:function(y){return s.onEvent(r,y,!!o.passive,!1)},error:function(){},complete:function(){}});s.nonBubblingListeners.has(r)||s.nonBubblingListeners.set(r,new Map);var h=s.nonBubblingListeners.get(r);if(!h)return;h.set(a,{sub:d,destination:o}),a.subs=re({},c,(u={},u[r]=d,u))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],s=i.sub,a=i.passive;s.unsubscribe(),this.setupDOMListener(o,a),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(i){var s=i.get(r);s&&s.destination.passive===o&&s.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=s.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),s=this.isolateModule.getRootElement(r.target);if(o){var a=this.isolateModule.getNamespace(r.target);if(!a)return;var u=this.getVirtualListeners(t,a);this.bubble(t,r.target,s,i,u,a,a.length-1,!0,n),this.bubble(t,r.target,s,i,u,a,a.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,s,a,u,c){!u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c);var d=n,h=a;if(r===n)if(a>=0&&s[a].type==="sibling")d=this.isolateModule.getElement(s,a),h--;else return;r.parentNode&&d&&this.bubble(t,r.parentNode,d,o,i,s,h,u,c),u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c)},e.prototype.doBubbleStep=function(t,r,n,o,i,s,a){n&&(this.mutateEventCurrentTarget(o,r),i.forEach(function(u){if(u.passive===a&&u.useCapture===s){var c=hn(u.scopeChecker.namespace);!o.propagationHasBeenStopped&&u.scopeChecker.isDirectlyInScope(r)&&(c!==""&&r.matches(c)||c===""&&r===n)&&(pn(o,u.preventDefault),u.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Ma(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Fa(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function ja(e){return P.merge(e,P.never())}function La(e){return e.elm}function Ra(e){(console.error||console.log)(e)}function Ba(){return P.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Ua(e){return e.data=e.data||{},e.data.isolate=[],e}function Ga(e,t){t===void 0&&(t={}),ba(e);var r=t.modules||Ia;Ma(r);var n=new Ta,o=t&&t.snabbdomOptions||void 0,i=Zs([n.createModule()].concat(r),void 0,o),s=Ba(),a,u,c=P.create({start:function(h){u=new MutationObserver(function(){return h.next(null)})},stop:function(){u.disconnect()}});function d(h,y){y===void 0&&(y="DOM"),Fa(h);var l=P.create(),f=s.map(function(){var g=wa(e)||document.body;return a=new Ca(g),g}),p=h.remember();p.addListener({}),c.addListener({});var m=f.map(function(g){return P.merge(p.endWhen(l),l).map(function(_){return a.call(_)}).startWith(Ua(Ce(g))).fold(i,Ce(g)).drop(1).map(La).startWith(g).map(function(_){return u.observe(_,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),_}).compose(ja)}).flatten(),v=on(s,c).endWhen(l).compose(Pa(m)).map(function(g){return g[1]}).remember();v.addListener({error:t.reportSnabbdomError||Ra});var O=new ka(v,n);return new $a(v,l,[],n,O,y)}return d}function Wa(e){return typeof e=="string"&&e.length>0}function Sn(e){return Wa(e)&&(e[0]==="."||e[0]==="#")}function ae(e){return function(r,n,o){var i=typeof r<"u",s=typeof n<"u",a=typeof o<"u";return Sn(r)?s&&a?et(e+r,n,o):s?et(e+r,n):et(e+r,{}):a?et(e+r,n,o):s?et(e,r,n):i?et(e,r):et(e,{})}}var An=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],$n=ae("svg");An.forEach(function(e){$n[e]=ae(e)});var On=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],b={SVG_TAG_NAMES:An,TAG_NAMES:On,svg:$n,isSelector:Sn,createTagFunction:ae};On.forEach(function(e){b[e]=ae(e)});b.svg;b.a;b.abbr;b.address;b.area;b.article;b.aside;b.audio;b.b;b.base;b.bdi;b.bdo;b.blockquote;b.body;b.br;b.button;b.canvas;b.caption;b.cite;b.code;b.col;b.colgroup;b.dd;b.del;b.dfn;b.dir;b.div;b.dl;b.dt;b.em;b.embed;b.fieldset;b.figcaption;b.figure;b.footer;b.form;b.h1;b.h2;b.h3;b.h4;b.h5;b.h6;b.head;b.header;b.hgroup;b.hr;b.html;b.i;b.iframe;b.img;b.input;b.ins;b.kbd;b.keygen;b.label;b.legend;b.li;b.link;b.main;b.map;b.mark;b.menu;b.meta;b.nav;b.noscript;b.object;b.ol;b.optgroup;b.option;b.p;b.param;b.pre;b.progress;b.q;b.rp;b.rt;b.ruby;b.s;b.samp;b.script;b.section;b.select;b.small;b.source;b.span;b.strong;b.style;b.sub;b.sup;b.table;b.tbody;b.td;b.textarea;b.tfoot;b.th;b.thead;b.title;b.tr;b.u;b.ul;b.video;var Ha={};function qa(e,t,r={}){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:s="DOM",container:a="div",containerClass:u}=r;return c=>{const d=Date.now(),h={item:e,itemKey:(l,f)=>typeof l.id<"u"?l.id:f,itemScope:l=>l,channel:i,collectSinks:l=>Object.entries(c).reduce((f,[p,m])=>{if(n.includes(p)){const v=l.pickCombine(p);p===s&&a?f[s]=v.map(O=>({sel:a,data:u?{props:{className:u}}:{},children:O,key:d,text:void 0,elm:void 0})):f[p]=v}else f[p]=l.pickMerge(p);return f},{})},y={[i]:t};return o.forEach(l=>y[l]=null),n.forEach(l=>y[l]=null),Va(h,y,c)}}function Va(e,t,r){return it(ms(e),t)(r)}var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ue={},G={},En={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(En);var za=En,yr=Object.prototype.toString,Pn=function(t){var r=yr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&yr.call(t.callee)==="[object Function]"),n},ge,mr;function Ja(){if(mr)return ge;mr=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Pn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(y){var l=y.constructor;return l&&l.prototype===y},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var y in window)try{if(!c["$"+y]&&t.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{u(window[y])}catch{return!0}}catch{return!0}return!1}(),h=function(y){if(typeof window>"u"||!d)return u(y);try{return u(y)}catch{return!1}};e=function(l){var f=l!==null&&typeof l=="object",p=r.call(l)==="[object Function]",m=n(l),v=f&&r.call(l)==="[object String]",O=[];if(!f&&!p&&!m)throw new TypeError("Object.keys called on a non-object");var g=s&&p;if(v&&l.length>0&&!t.call(l,0))for(var _=0;_<l.length;++_)O.push(String(_));if(m&&l.length>0)for(var A=0;A<l.length;++A)O.push(String(A));else for(var $ in l)!(g&&$==="prototype")&&t.call(l,$)&&O.push(String($));if(i)for(var N=h(l),E=0;E<a.length;++E)!(N&&a[E]==="constructor")&&t.call(l,a[E])&&O.push(a[E]);return O}}return ge=e,ge}var Ya=Array.prototype.slice,Ka=Pn,vr=Object.keys,qt=vr?function(t){return vr(t)}:Ja(),_r=Object.keys;qt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Ka(n)?_r(Ya.call(n)):_r(n)})}else Object.keys=qt;return Object.keys||qt};var Xa=qt,Za=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},gr=typeof Symbol<"u"&&Symbol,Qa=Za,tu=function(){return typeof gr!="function"||typeof Symbol!="function"||typeof gr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Qa()},br={foo:{}},eu=Object,ru=function(){return{__proto__:br}.foo===br.foo&&!({__proto__:null}instanceof eu)},nu="Function.prototype.bind called on incompatible ",be=Array.prototype.slice,ou=Object.prototype.toString,iu="[object Function]",su=function(t){var r=this;if(typeof r!="function"||ou.call(r)!==iu)throw new TypeError(nu+r);for(var n=be.call(arguments,1),o,i=function(){if(this instanceof o){var d=r.apply(this,n.concat(be.call(arguments)));return Object(d)===d?d:this}else return r.apply(t,n.concat(be.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},au=su,Nn=Function.prototype.bind||au,uu=Nn,cu=uu.call(Function.call,Object.prototype.hasOwnProperty),T,Ot=SyntaxError,Cn=Function,St=TypeError,we=function(e){try{return Cn('"use strict"; return ('+e+").constructor;")()}catch{}},ht=Object.getOwnPropertyDescriptor;if(ht)try{ht({},"")}catch{ht=null}var Se=function(){throw new St},fu=ht?function(){try{return arguments.callee,Se}catch{try{return ht(arguments,"callee").get}catch{return Se}}}():Se,_t=tu(),lu=ru(),j=Object.getPrototypeOf||(lu?function(e){return e.__proto__}:null),bt={},pu=typeof Uint8Array>"u"||!j?T:j(Uint8Array),dt={"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":_t&&j?j([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":bt,"%AsyncGenerator%":bt,"%AsyncGeneratorFunction%":bt,"%AsyncIteratorPrototype%":bt,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":Cn,"%GeneratorFunction%":bt,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_t&&j?j(j([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_t||!j?T:j(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_t||!j?T:j(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_t&&j?j(""[Symbol.iterator]()):T,"%Symbol%":_t?Symbol:T,"%SyntaxError%":Ot,"%ThrowTypeError%":fu,"%TypedArray%":pu,"%TypeError%":St,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};if(j)try{null.error}catch(e){var hu=j(j(e));dt["%Error.prototype%"]=hu}var du=function e(t){var r;if(t==="%AsyncFunction%")r=we("async function () {}");else if(t==="%GeneratorFunction%")r=we("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=we("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&j&&(r=j(o.prototype))}return dt[t]=r,r},wr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},kt=Nn,ne=cu,yu=kt.call(Function.call,Array.prototype.concat),mu=kt.call(Function.apply,Array.prototype.splice),Sr=kt.call(Function.call,String.prototype.replace),oe=kt.call(Function.call,String.prototype.slice),vu=kt.call(Function.call,RegExp.prototype.exec),_u=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,gu=/\\(\\)?/g,bu=function(t){var r=oe(t,0,1),n=oe(t,-1);if(r==="%"&&n!=="%")throw new Ot("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ot("invalid intrinsic syntax, expected opening `%`");var o=[];return Sr(t,_u,function(i,s,a,u){o[o.length]=a?Sr(u,gu,"$1"):s||i}),o},wu=function(t,r){var n=t,o;if(ne(wr,n)&&(o=wr[n],n="%"+o[0]+"%"),ne(dt,n)){var i=dt[n];if(i===bt&&(i=du(n)),typeof i>"u"&&!r)throw new St("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ot("intrinsic "+t+" does not exist!")},Su=function(t,r){if(typeof t!="string"||t.length===0)throw new St("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new St('"allowMissing" argument must be a boolean');if(vu(/^%?[^%]*%?$/,t)===null)throw new Ot("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=bu(t),o=n.length>0?n[0]:"",i=wu("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],mu(n,yu([0,1],c)));for(var d=1,h=!0;d<n.length;d+=1){var y=n[d],l=oe(y,0,1),f=oe(y,-1);if((l==='"'||l==="'"||l==="`"||f==='"'||f==="'"||f==="`")&&l!==f)throw new Ot("property names with quotes must have matching quotes");if((y==="constructor"||!h)&&(u=!0),o+="."+y,s="%"+o+"%",ne(dt,s))a=dt[s];else if(a!=null){if(!(y in a)){if(!r)throw new St("base intrinsic for "+t+" exists, but the property is not available.");return}if(ht&&d+1>=n.length){var p=ht(a,y);h=!!p,h&&"get"in p&&!("originalValue"in p.get)?a=p.get:a=a[y]}else h=ne(a,y),a=a[y];h&&!u&&(dt[s]=a)}}return a},Au=Su,Te=Au("%Object.defineProperty%",!0),xe=function(){if(Te)try{return Te({},"a",{value:1}),!0}catch{return!1}return!1};xe.hasArrayLengthDefineBug=function(){if(!xe())return null;try{return Te([],"length",{value:1}).length!==1}catch{return!0}};var $u=xe,Ou=Xa,Eu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Pu=Object.prototype.toString,Nu=Array.prototype.concat,In=Object.defineProperty,Cu=function(e){return typeof e=="function"&&Pu.call(e)==="[object Function]"},Iu=$u(),Tn=In&&Iu,Tu=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Cu(n)||!n())return}Tn?In(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},xn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Ou(t);Eu&&(n=Nu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Tu(e,n[o],t[n[o]],r[n[o]])};xn.supportsDescriptors=!!Tn;var Dn=xn,kn=V,xu=kn,Mn=function(){return typeof V!="object"||!V||V.Math!==Math||V.Array!==Array?xu:V},Du=Dn,ku=Mn,Mu=function(){var t=ku();if(Du.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Fu=Dn,ju=kn,Fn=Mn,Lu=Mu,Ru=Fn(),jn=function(){return Ru};Fu(jn,{getPolyfill:Fn,implementation:ju,shim:Lu});var Bu=jn,Uu=V&&V.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(G,"__esModule",{value:!0});G.NO_IL=G.NO=G.MemoryStream=G.Stream=void 0;var Gu=za,Wu=Bu,jt=Gu.default(Wu.getPolyfill()),S={};G.NO=S;function U(){}function Vt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Hu(e,t){return function(n){return e(n)&&t(n)}}function Ue(e,t,r){try{return e.f(t)}catch(n){return r._e(n),S}}var ct={_n:U,_e:U,_c:U};G.NO_IL=ct;function Ar(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var qu=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Vu=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),zu=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Vu(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Ju=function(){function e(t){this.type="merge",this.insArr=t,this.out=S,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=S},e.prototype._n=function(t){var r=this.out;r!==S&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===S)return;t._c()}},e}(),Yu=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==S&&r.up(t,this.i)){var o=Vt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==S&&--t.Nc===0&&t.out._c()},e}(),Ku=function(){function e(t){this.type="combine",this.insArr=t,this.out=S,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===S?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=S,r[i]._add(new Yu(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=S,this.ils=[],this.vals=[]},e}(),Xu=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Zu=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(U,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),Qu=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),tc=function(){function e(t,r){this.type="debug",this.ins=t,this.out=S,this.s=U,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=this.s,o=this.l;if(n!==U)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),ec=function(){function e(t,r){this.type="drop",this.ins=r,this.out=S,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;r!==S&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),rc=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),nc=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=S,this.o=t,this.oil=ct}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new rc(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=S,this.oil=ct},e.prototype.end=function(){var t=this.out;t!==S&&t._c()},e.prototype._n=function(t){var r=this.out;r!==S&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ae=function(){function e(t,r){this.type="filter",this.ins=r,this.out=S,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=Ue(this,t,r);n===S||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),oc=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=S,this.op.less()},e}(),ic=function(){function e(t){this.type="flatten",this.ins=t,this.out=S,this.open=!0,this.inner=S,this.il=ct}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=S,this.il=ct,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==S&&this.inner._remove(this.il),this.out=S,this.open=!0,this.inner=S,this.il=ct},e.prototype.less=function(){var t=this.out;t!==S&&!this.open&&this.inner===S&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=this,o=n.inner,i=n.il;o!==S&&i!==ct&&o._remove(i),(this.inner=t)._add(this.il=new oc(r,this))}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),sc=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=S,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=Ue(this,t,r);n!==S&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),ac=function(){function e(t){this.type="last",this.ins=t,this.out=S,this.has=!1,this.val=S}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S,this.val=S},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),uc=function(){function e(t,r){this.type="map",this.ins=r,this.out=S,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=Ue(this,t,r);n!==S&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),cc=function(){function e(t){this.type="remember",this.ins=t,this.out=S}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=S},e}(),fc=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=S,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;r!==S&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==S)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),lc=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=S,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=S},e}(),pc=function(){function e(t,r){this.type="take",this.ins=r,this.out=S,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=S},e.prototype._n=function(t){var r=this.out;if(r!==S){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==S&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==S&&t._c()},e}(),Ge=function(){function e(t){this._prod=t||S,this._ils=[],this._stopID=S,this._dl=S,this._d=!1,this._target=null,this._err=S}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Vt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===S){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Vt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Vt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==S&&this._prod._stop(),this._err=S,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=S,this._stopID=S},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==S)clearTimeout(this._stopID),this._stopID=S;else{var o=this._prod;o!==S&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==S&&o.length<=0?(this._err=S,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==S)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof nt?nt:e},e.prototype.addListener=function(t){t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new qu(this,t)},e.prototype[jt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ar(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ar(t),new nt(t)},e.never=function(){return new e({_start:U,_stop:U})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:U})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:U})},e.from=function(t){if(typeof t[jt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Xu(t))},e.fromPromise=function(t){return new e(new Zu(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[jt]=="function"?t[jt]():t;return new e(new zu(r))},e.periodic=function(t){return new e(new Qu(t))},e.prototype._map=function(t){return new(this.ctor())(new uc(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ae?new e(new Ae(Hu(r.f,t),r.ins)):new e(new Ae(t,this))},e.prototype.take=function(t){return new(this.ctor())(new pc(t,this))},e.prototype.drop=function(t){return new e(new ec(t,this))},e.prototype.last=function(){return new e(new ac(this))},e.prototype.startWith=function(t){return new nt(new lc(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new nc(t,this))},e.prototype.fold=function(t,r){return new nt(new sc(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new fc(t,this))},e.prototype.flatten=function(){return new e(new ic(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new nt(new cc(this))},e.prototype.debug=function(t){return new(this.ctor())(new tc(this,t))},e.prototype.imitate=function(t){if(t instanceof nt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._dl=t):(this._d=!1,this._dl=S)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ju(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ku(r))},e}();G.Stream=Ge;var nt=function(e){Uu(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==S)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=S;else if(this._has)r._n(this._v);else{var i=this._prod;i!==S&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Ge);G.MemoryStream=nt;var hc=Ge;G.default=hc;Object.defineProperty(ue,"__esModule",{value:!0});ue.DropRepeatsOperator=void 0;var dc=G,$e={},Ln=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=$e,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=$e},e.prototype._n=function(t){var r=this.out;if(r){var n=this.v;n!==$e&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;t&&t._c()},e}();ue.DropRepeatsOperator=Ln;function yc(e){return e===void 0&&(e=void 0),function(r){return new dc.Stream(new Ln(r,e))}}var J=ue.default=yc;function mc(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,s=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(s==="string"||s==="function"||t instanceof X))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof X){const a=t.compose(J()).startWith(r).remember();return u=>$r(e,u,a,o)}else{const a=s==="function"&&t||(u=>u[t]);return u=>{const c=u&&(typeof i=="string"&&u[i]||u.STATE||u.state).stream;if(!c instanceof X)throw new Error(`Could not find the state source: ${i}`);const d=c.map(a).filter(h=>typeof h=="string").compose(J()).startWith(r).remember();return $r(e,u,d,o,i)}}}function $r(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([a,u])=>{if(t[o]){const c=t[o].stream,d=P.combine(r,c).filter(([y,l])=>y==a).map(([y,l])=>l).remember(),h=new t[o].constructor(d,t[o]._name);return[a,u({...t,state:h})]}return[a,u(t)]});return Object.keys(t).reduce((a,u)=>{if(n.includes(u))a[u]=r.map(c=>{const d=i.find(([h,y])=>h===c);return d&&d[1][u]||P.never()}).flatten().remember().startWith(void 0);else{const c=i.filter(([d,h])=>h[u]!==void 0).map(([d,h])=>h[u]);a[u]=P.merge(...c)}return a},{})}var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});var vc=G,_c=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function gc(e){return function(r){return new vc.Stream(new _c(e,r))}}var zt=Rn.default=gc,Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});var bc=G,wc=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;r&&r._n(t)},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;if(t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Sc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new bc.Stream(new wc(e))}var Oe=Bn.default=Sc,Un={};Object.defineProperty(Un,"__esModule",{value:!0});var Tt=G,Ac=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=Tt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;n&&(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=Tt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;r&&(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),this.t!=Tt.NO&&t._n(this.t),this.t=Tt.NO,t._c())},e}();function $c(e){return function(r){return new Tt.Stream(new Ac(e,r))}}var Lt=Un.default=$c;const Or=typeof window<"u"&&window||process&&Ha||{},Er="BOOTSTRAP",st="INITIALIZE",Oc="HYDRATE",Nt="PARENT",Ec="CHILD";let Pc=0;const ie="~#~#~ABORT~#~#~";function Jt(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&!x(r))throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const s=typeof r>"u";let a;if(x(i)){const u=c=>{const d={...e,sources:c};return new Ee(d).sinks};a=s?it(u,i):it(u,i)(r)}else a=s?u=>new Ee({...e,sources:u}).sinks:new Ee(e).sinks;return a.componentName=t,a.isSygnalComponent=!0,a}class Ee{constructor({name:t="NO NAME",sources:r,intent:n,model:o,hmrActions:i,context:s,response:a,view:u,peers:c={},components:d={},initialState:h,calculated:y,storeCalculatedInState:l=!0,DOMSourceName:f="DOM",stateSourceName:p="STATE",requestSourceName:m="HTTP",debug:v=!1}){if(!r||!x(r))throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.model=o,this.hmrActions=i,this.context=s,this.response=a,this.view=u,this.peers=c,this.components=d,this.initialState=h,this.calculated=y,this.storeCalculatedInState=l,this.DOMSourceName=f,this.stateSourceName=p,this.requestSourceName=m,this.sourceNames=Object.keys(r),this._debug=v,this.isSubComponent=this.sourceNames.includes("props$");const O=r[p]&&r[p].stream;O&&(this.currentState=h||{},this.sources[p]=new Ct(O.map($=>(this.currentState=$,$))));const g=r.props$;g&&(this.sources.props$=g.map($=>(this.currentProps=$,$)));const _=r.children$;_&&(this.sources.children$=_.map($=>(this.currentChildren=$,$))),!this.isSubComponent&&typeof this.intent>"u"&&typeof this.model>"u"&&(this.initialState=h||!0,this.intent=$=>({__NOOP_ACTION__:P.never()}),this.model={__NOOP_ACTION__:$=>$});const A=Pc++;this.addCalculated=this.createMemoizedAddCalculated(),this.log=Nc(`${A} | ${t}`),this.initChildSources$(),this.initIntent$(),this.initHmrActions(),this.initAction$(),this.initState(),this.initContext(),this.initModel$(),this.initPeers$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks(),this.sinks.__index=A,this.log("Instantiated",!0)}get debug(){return this._debug||Or.SYGNAL_DEBUG==="true"||Or.SYGNAL_DEBUG===!0}initIntent$(){if(this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof X)&&!x(this.intent$))throw new Error("Intent must return either an action$ stream or map of event streams")}}initHmrActions(){if(typeof this.hmrActions>"u"){this.hmrAction$=P.of().filter(t=>!1);return}if(typeof this.hmrActions=="string"&&(this.hmrActions=[this.hmrActions]),!Array.isArray(this.hmrActions))throw new Error(`[${this.name}] hmrActions must be the name of an action or an array of names of actions to run when a component is hot-reloaded`);if(this.hmrActions.some(t=>typeof t!="string"))throw new Error(`[${this.name}] hmrActions must be the name of an action or an array of names of actions to run when a component is hot-reloaded`);this.hmrAction$=P.fromArray(this.hmrActions.map(t=>({type:t})))}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=P.never();return}let r;if(this.intent$ instanceof X)r=this.intent$;else{const c=Object.entries(this.intent$).map(([d,h])=>h.map(y=>({type:d,data:y})));r=P.merge(P.never(),...c)}const n=r instanceof X?r:r.apply&&r(this.sources)||P.never(),o=P.of({type:Er}).compose(zt(10)),i=(window==null?void 0:window.__SYGNAL_HMR_UPDATING)===!0?this.hmrAction$:P.of().filter(c=>!1),s=this.model[Er]&&(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0?Oe(o,n):Oe(P.of().compose(zt(1)).filter(c=>!1),i,n);let a;(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0&&t&&typeof t.select=="function"?a=t.select("initial").flatten():a=P.never();const u=a.map(c=>({type:Oc,data:c}));this.action$=P.merge(s,u).compose(this.log(({type:c})=>`<${c}> Action triggered`))}initState(){this.model!==void 0&&(this.model[st]===void 0?this.model[st]={[this.stateSourceName]:(t,r)=>({...this.addCalculated(r)})}:x(this.model[st])&&Object.keys(this.model[st]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${st} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[st][t])}))}initContext(){var n;if(!this.context&&!this.sources.__parentContext$){this.context$=P.of({});return}const t=((n=this.sources[this.stateSourceName])==null?void 0:n.stream.startWith({}).compose(J(Y)))||P.never(),r=this.sources.__parentContext$.startWith({}).compose(J(Y))||P.of({});this.context&&!x(this.context)&&console.error(`[${this.name}] Context must be an object mapping names to values of functions: ignoring provided ${typeof this.context}`),this.context$=P.combine(t,r).map(([o,i])=>{const s=x(i)?i:{},a=x(this.context)?this.context:{},u=this.currentState,c=Object.entries(a).reduce((h,y)=>{const[l,f]=y;let p;const m=typeof f;if(m==="string")p=u[f];else if(m==="boolean")p=u[l];else if(m==="function")p=f(u);else return console.error(`[${this.name}] Invalid context entry '${l}': must be the name of a state property or a function returning a value to use`),h;return h[l]=p,h},{}),d={...s,...c};return this.currentContext=d,d}).compose(J(Y)).startWith({}),this.context$.subscribe({next:o=>o})}initModel$(){if(typeof this.model>"u"){this.model$=this.sourceNames.reduce((u,c)=>(u[c]=P.never(),u),{});return}const t={type:st,data:this.initialState};this.isSubComponent&&this.initialState&&console.warn(`[${this.name}] Initial state provided to sub-component. This will overwrite any state provided by the parent component.`);const r=this.initialState&&(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0?Oe(P.of(t),this.action$).compose(zt(0)):this.action$,n=()=>this.makeOnAction(r,!0,this.action$),o=()=>this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),s={};i.forEach(u=>{let[c,d]=u;if(typeof d=="function"&&(d={[this.stateSourceName]:d}),!x(d))throw new Error(`Entry for each action must be an object: ${this.name} ${c}`);Object.entries(d).forEach(y=>{const[l,f]=y,p=l===this.stateSourceName,m=l===Nt,v=p?n():o(),g=(m?v(c,f).map(_=>({name:this.name,value:_})):v(c,f)).compose(this.log(_=>{if(p)return`<${c}> State reducer added`;if(m)return`<${c}> Data sent to parent component: ${JSON.stringify(_.value).replaceAll('"',"")}`;{const A=_&&(_.type||_.command||_.name||_.key||Array.isArray(_)&&"Array"||_);return`<${c}> Data sent to [${l}]: ${JSON.stringify(A).replaceAll('"',"")}`}}));Array.isArray(s[l])?s[l].push(g):s[l]=[g]})});const a=Object.entries(s).reduce((u,c)=>{const[d,h]=c;return u[d]=P.merge(P.never(),...h),u},{});this.model$=a}initPeers$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.peers$=Object.entries(this.peers).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(s=>{s==this.DOMSourceName?r[s][n]=i[s]:r[s].push(i[s])}),r},t)}initChildSources$(){let t;const r=P.create({start:n=>{t=n.next.bind(n)},stop:n=>{}}).map(n=>P.merge(...n)).flatten();this.sources[Ec]={select:n=>{const o=r;return(n?o.filter(a=>a.name===n):o).map(a=>a.value)}},this.newChildSources=n=>{typeof t=="function"&&t(n)}}initSubComponentSink$(){const t=P.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=P.create({start:r=>{this.triggerSubComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=P.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).compose(this.log("View rendered")).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$&&r!==Nt?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():P.never();return r===this.stateSourceName?t[r]=P.merge(this.model$[r]||P.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.peers$[r]||[]):t[r]=P.merge(this.model$[r]||P.never(),n,...this.peers$[r]||[]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[Nt]=this.model$[Nt]||P.never()}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const s=t.filter(({type:u})=>u==o);let a;if(typeof i=="function")a=s.map(u=>{const c=(y,l,f=10)=>{if(typeof f!="number")throw new Error(`[${this.name} ] Invalid delay value provided to next() function in model action '${o}'. Must be a number in ms.`);setTimeout(()=>{n.shamefullySendNext({type:y,data:l})},f),this.log(`<${o}> Triggered a next() action: <${y}> ${f}ms delay`,!0)},d={props:this.currentProps,children:this.currentChildren,context:this.currentContext};let h=u.data;if(r)return y=>{const l=this.isSubComponent?this.currentState:y,f=this.addCalculated(l),p=i(f,h,c,d);return p==ie?l:this.cleanupCalculated(p)};{const y=this.addCalculated(this.currentState),l=i(y,h,c,d),f=typeof l;if(x(l)||["string","number","boolean","function"].includes(f))return l;if(f=="undefined")return console.warn(`'undefined' value sent to ${o}`),l;throw new Error(`Invalid reducer type for ${o} ${f}`)}}).filter(u=>u!=ie);else if(i===void 0||i===!0)a=s.map(({data:u})=>u);else{const u=i;a=s.mapTo(u)}return a}}createMemoizedAddCalculated(){let t,r;return function(n){if(!this.calculated||!x(n)||Array.isArray(n))return n;if(n===t)return r;if(!x(this.calculated))throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const o=this.getCalculatedValues(n);if(!o)return t=n,r=n,n;const i={...n,...o};return t=n,r=i,i}}getCalculatedValues(t){const r=Object.entries(this.calculated||{});if(r.length!==0)return r.reduce((n,[o,i])=>{if(typeof i!="function")throw new Error(`Missing or invalid calculator function for calculated field '${o}`);try{n[o]=i(t)}catch(s){console.warn(`Calculated field '${o}' threw an error during calculation: ${s.message}`)}return n},{})}cleanupCalculated(t){if(!t||!x(t)||Array.isArray(t))return t;const n={...this.storeCalculatedInState?this.addCalculated(t):t};return!this.calculated||this.storeCalculatedInState||Object.keys(this.calculated).forEach(i=>{this.initialState&&typeof this.initialState[i]<"u"?n[i]=this.initialState[i]:delete n[i]}),n}collectRenderParameters(){const t=this.sources[this.stateSourceName],r={...this.peers$[this.DOMSourceName]},n=t&&t.isolateSource(t,{get:u=>this.addCalculated(u)}),o=n&&n.stream||P.never();r.state=o.compose(J(Y)),this.sources.props$&&(r.props=this.sources.props$.compose(J(Cc))),this.sources.children$&&(r.children=this.sources.children$.compose(J(Y))),this.context$&&(r.context=this.context$.compose(J(Y)));const i=[],s=[];return Object.entries(r).forEach(([u,c])=>{i.push(u),s.push(c)}),P.combine(...s).compose(Lt(1)).map(u=>i.reduce((d,h,y)=>(d[h]=u[y],h==="state"&&(d[this.stateSourceName]=u[y],d.calculated=u[y]&&this.getCalculatedValues(u[y])||{}),d),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=Gn(n,o),s=Object.entries(i),a={"::ROOT::":n};if(s.length===0)return a;const u={},c=[];let d=0;const h=s.reduce((l,[f,p])=>{const m=p.data,v=m.props||{},O=p.children||[],g=m.isCollection||!1,_=m.isSwitchable||!1,A=D=>{Object.entries(D).forEach(([k,M])=>{u[k]||(u[k]=[]),k===Nt?c.push(M):k!==this.DOMSourceName&&u[k].push(M)})};if(r[f]){const D=r[f];return l[f]=D,D.props$.shamefullySendNext(v),D.children$.shamefullySendNext(O),A(D.sink$),l}const $=P.create().startWith(v),N=P.create().startWith(O);let E;g?E=this.instantiateCollection.bind(this):_?E=this.instantiateSwitchable.bind(this):E=this.instantiateCustomComponent.bind(this),d++;const C=E(p,$,N);return C[this.DOMSourceName]=C[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(C[this.DOMSourceName]):P.never(),l[f]={sink$:C,props$:$,children$:N},A(C),l},a),y=Object.entries(u).reduce((l,[f,p])=>(p.length===0||(l[f]=p.length===1?p[0]:P.merge(...p)),l),{});return this.newSubComponentSinks(y),this.newChildSources(c),d>0&&this.log(`New sub components instantiated: ${d}`,!0),h},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember();return this.sources[this.stateSourceName].stream.compose(J(Y)).map(o=>r).flatten().debug(o=>this.triggerSubComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};let s=typeof i.filter=="function"?i.filter:void 0,a=Nr(i.sort);const u={filter:s,sort:a},c=P.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r.startWith(i)).compose(Lt(1)).map(([g,_])=>(_.filter!==u.filter&&(u.filter=typeof _.filter=="function"?_.filter:void 0),_.sort!==u.sort&&(u.sort=Nr(_.sort)),x(g)?this.addCalculated(g):g)),d=new Ct(c),h=i.from,y=i.of,l=i.idfield||"id";let f,p;if(typeof y=="function")if(y.isSygnalComponent)p=y;else{const g=y.componentName||y.label||y.name||"FUNCTION_COMPONENT",_=y,{model:A,intent:$,hmrActions:N,context:E,peers:C,components:D,initialState:k,calculated:M,storeCalculatedInState:L,DOMSourceName:Q,stateSourceName:yt,debug:fe}=y;p=Jt({name:g,view:_,model:A,intent:$,hmrActions:N,context:E,peers:C,components:D,initialState:k,calculated:M,storeCalculatedInState:L,DOMSourceName:Q,stateSourceName:yt,debug:fe})}else if(this.components[y])p=this.components[y];else throw new Error(`[${this.name}] Invalid 'of' propery in collection: ${y}`);const m={get:g=>{if(!Array.isArray(g[h]))return[];const _=g[h],A=typeof u.filter=="function"?_.filter(u.filter):_;return(u.sort,A.sort(u.sort)).map((E,C)=>x(E)?{...E,[l]:E[l]||C}:{value:E,[l]:C})},set:(g,_)=>{if(this.calculated&&h in this.calculated)return console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${h}': Update ignored`),g;const A=[];for(const $ of g[h].map((N,E)=>x(N)?{...N,[l]:N[l]||E}:{__primitive:!0,value:N,[l]:E}))if(typeof u.filter=="function"&&!u.filter($))A.push($.__primitive?$.value:$);else{const N=_.find(E=>E[l]===$[l]);typeof N<"u"&&A.push($.__primitive?N.value:N)}return{...g,[h]:A}}};h===void 0?f={get:g=>!(g instanceof Array)&&g.value&&g.value instanceof Array?g.value:g,set:(g,_)=>_}:typeof h=="string"?x(this.currentState)?!(this.currentState&&h in this.currentState)&&!(this.calculated&&h in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${h}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),f=void 0):(Array.isArray(this.currentState[h])||console.warn(`State property '${h}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):(Array.isArray(this.currentState[h])||console.warn(`State property '${h}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):x(h)?typeof h.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0):f={get:g=>{const _=h.get(g);return Array.isArray(_)?_:(console.warn(`State getter function in collection component of ${this.name} did not return an array: No components will be instantiated in the collection. Returned value:`,_),[])},set:h.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0);const v={...this.sources,[this.stateSourceName]:d,props$:r,children$:n,__parentContext$:this.context$,PARENT:null},O=qa(p,f,{container:null})(v);if(!x(O))throw new Error("Invalid sinks returned from component factory of collection element");return O}instantiateSwitchable(t,r,n){const i=t.data.props||{},s=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>x(m)?this.addCalculated(m):m),a=new Ct(s),u=i.state;let c;const d={get:m=>m[u],set:(m,v)=>this.calculated&&u in this.calculated?(console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${u}': Update ignored`),m):!x(v)||Array.isArray(v)?{...m,[u]:v}:{...m,[u]:v}},h={get:m=>m,set:(m,v)=>v};typeof u>"u"?c=h:typeof u=="string"?c=d:x(u)?typeof u.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),c=h):c={get:u.get,set:u.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof u}. Attempting to use parent component state.`),c=h);const y=i.of;Object.keys(y).forEach(m=>{const v=y[m];if(!v.isSygnalComponent){const O=v.componentName||v.label||v.name||"FUNCTION_COMPONENT",g=v,{model:_,intent:A,hmrActions:$,context:N,peers:E,components:C,initialState:D,calculated:k,storeCalculatedInState:M,DOMSourceName:L,stateSourceName:Q,debug:yt}=v,fe={name:O,view:g,model:_,intent:A,hmrActions:$,context:N,peers:E,components:C,initialState:D,calculated:k,storeCalculatedInState:M,DOMSourceName:L,stateSourceName:Q,debug:yt};y[m]=Jt(fe)}});const f={...this.sources,[this.stateSourceName]:a,props$:r,children$:n,__parentContext$:this.context$},p=it(mc(y,r.map(m=>m.current)),{[this.stateSourceName]:c})(f);if(!x(p))throw new Error("Invalid sinks returned from component factory of switchable element");return p}instantiateCustomComponent(t,r,n){const o=t.sel,s=t.data.props||{},a=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>x(m)?this.addCalculated(m):m),u=new Ct(a),c=s.state;typeof s.sygnalFactory!="function"&&x(s.sygnalOptions)&&(s.sygnalFactory=Jt(s.sygnalOptions));const d=o==="sygnal-factory"?s.sygnalFactory:this.components[o]||s.sygnalFactory;if(!d)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let h;const y={get:m=>m[c],set:(m,v)=>this.calculated&&c in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${c}': Update ignored`),m):{...m,[c]:v}},l={get:m=>m,set:(m,v)=>v};typeof c>"u"?h=l:typeof c=="string"?h=y:x(c)?typeof c.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),h=l):h={get:c.get,set:c.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof c}. Attempting to use parent component state.`),h=l);const f={...this.sources,[this.stateSourceName]:u,props$:r,children$:n,__parentContext$:this.context$},p=it(d,{[this.stateSourceName]:h})(f);if(!x(p)){const m=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",m)}return p}renderVdom(t){return P.combine(this.subComponentsRendered$,t).compose(Lt(1)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],s=Object.entries(n).filter(([c])=>c!=="::ROOT::");if(s.length===0)return P.of(i);const a=[],u=s.map(([c,d])=>(a.push(c),d.sink$[this.DOMSourceName].startWith(void 0)));return u.length===0?P.of(i):P.combine(...u).compose(Lt(1)).map(c=>{const d=c.reduce((l,f,p)=>(l[a[p]]=f,l),{}),h=qn(i);return Wn(h,d,o)})}).flatten().filter(r=>!!r).remember()}}function Nc(e){return function(t,r=!1){const n=typeof t=="function"?t:o=>t;if(r){this.debug&&console.log(`[${e}] ${n(t)}`);return}else return o=>o.debug(i=>{this.debug&&console.log(`[${e}] ${n(i)}`)})}}function Gn(e,t,r=0,n=0,o){var l,f,p,m,v,O;if(!e)return{};if((l=e.data)!=null&&l.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const i=e.sel,s=i&&i.toLowerCase()==="collection",a=i&&i.toLowerCase()==="switchable",u=i&&["collection","switchable","sygnal-factory",...t].includes(i)||typeof((p=(f=e.data)==null?void 0:f.props)==null?void 0:p.sygnalFactory)=="function"||x((v=(m=e.data)==null?void 0:m.props)==null?void 0:v.sygnalOptions),c=e.data&&e.data.props||{};e.data&&e.data.attrs;const d=e.children||[];let h={},y=o;if(u){if(y=Hn(e,r,n,o),s){if(!c.of)throw new Error("Collection element missing required 'component' property");if(typeof c.of!="string"&&typeof c.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof c.of} requires string or component factory function`);if(typeof c.of!="function"&&!t.includes(c.of))throw new Error(`Specified component for collection not found: ${c.of}`);typeof c.from<"u"&&!(typeof c.from=="string"||Array.isArray(c.from)||typeof c.from.get=="function")&&console.warn(`No valid array found for collection ${typeof c.of=="string"?c.of:"function component"}: no collection components will be created`,c.from),e.data.isCollection=!0,(O=e.data).props||(O.props={})}else if(a){if(!c.of)throw new Error("Switchable element missing required 'of' property");if(!x(c.of))throw new Error(`Invalid 'of' property of switchable element: found ${typeof c.of} requires object mapping names to component factories`);if(!Object.values(c.of).every(A=>typeof A=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!c.current||typeof c.current!="string"&&typeof c.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof c.current}' requires string or function`);if(!Object.keys(c.of).includes(c.current))throw new Error(`Component '${c.current}' not found in switchable element`);e.data.isSwitchable=!0}typeof c.key>"u"&&(e.data.props.key=y),h[y]=e}return d.length>0&&d.map((g,_)=>Gn(g,t,r+1,n+_,y)).forEach(g=>{Object.entries(g).forEach(([_,A])=>h[_]=A)}),h}function Wn(e,t,r,n=0,o=0,i){var y,l,f,p,m,v,O;if(!e)return;if((y=e.data)!=null&&y.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const s=e.sel||"NO SELECTOR",a=["collection","switchable","sygnal-factory",...r].includes(s)||typeof((f=(l=e.data)==null?void 0:l.props)==null?void 0:f.sygnalFactory)=="function"||x((m=(p=e.data)==null?void 0:p.props)==null?void 0:m.sygnalOptions),u=(v=e==null?void 0:e.data)==null?void 0:v.isCollection,c=(O=e==null?void 0:e.data)==null?void 0:O.isSwitchable;e.data&&e.data.props;const d=e.children||[];let h=i;if(a){h=Hn(e,n,o,i);const g=t[h];return u?(e.sel="div",e.children=Array.isArray(g)?g:[g],e):g}else return d.length>0&&(e.children=d.map((g,_)=>Wn(g,t,r,n+1,o+_,h)).flat()),e}function Hn(e,t,r,n){var h;const o=e.sel,i=typeof o=="string"?o:"functionComponent",s=`${t}:${r}`,a=((h=e.data)==null?void 0:h.props)||{},u=a.id&&JSON.stringify(a.id).replaceAll('"',"")||s;return`${n?`${n}|`:""}${i}::${u}`}function qn(e){return typeof e>"u"?e:{...e,children:Array.isArray(e.children)?e.children.map(qn):void 0,data:e.data&&{...e.data,componentsInjected:!1}}}function Cc(e,t){return Y(Ic(e))}function Y(e,t,r=5,n=0){if(n>r)return!1;if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!Y(e[s],t[s],r,n+1))return!1;return!0}const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const s of o)if(!i.includes(s)||!Y(e[s],t[s],r,n+1))return!1;return!0}function Ic(e){if(!x(e))return e;const{state:t,of:r,from:n,filter:o,...i}=e;return i}function x(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Yt(e,t,r=!0){const n=r?1:-1;switch(!0){case e>t:return 1*n;case e<t:return-1*n;default:return 0}}function Pr(e){const t=Object.entries(e);if(t.length>1){console.error("Sort objects can only have one key:",e);return}const r=t[0],[n,o]=r;if(!["string","number"].includes(typeof o)){console.error("Sort object properties must be a string or number:",e);return}let i=!0;if(typeof o=="string"){if(!["asc","dec"].includes(o.toLowerCase())){console.error("Sort object string values must be asc or dec:",e);return}i=o.toLowerCase()==="asc"}if(typeof o=="number"){if(o!==1&&o!==-1){console.error("Sort object number values must be 1 or -1:",e);return}i=o===1}return(s,a)=>Yt(s[n],a[n],i)}function Nr(e){if(!e)return;const t=typeof e;if(t==="function")return e;if(t==="string"){if(e.toLowerCase()==="asc"||e.toLowerCase()==="dec"){const n=e.toLowerCase()==="asc";return(o,i)=>Yt(o,i,n)}const r=e;return(n,o)=>Yt(n[r],o[r],!0)}else if(Array.isArray(e)){const r=e.map(n=>{if(typeof n=="function")return n;if(typeof n=="string"&&!["asc","dec"].includes(n.toLowerCase()))return(o,i)=>Yt(o[n],i[n],!0);if(x(n))return Pr(n)});return(n,o)=>r.filter(i=>typeof i=="function").reduce((i,s)=>i!==0?i:s(n,o),0)}else{if(x(e))return Pr(e);console.error("Invalid sort option (ignoring):",item);return}}var We={};Object.defineProperty(We,"__esModule",{value:!0});function Vn(){var e;return typeof window<"u"?e=window:typeof V<"u"?e=V:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Tc(e){Vn().adaptStream=e}We.setAdapt=Tc;function xc(e){return Vn().adaptStream(e)}var Dc=We.adapt=xc;function kc(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const s=P.create({start:a=>{i=({detail:u})=>{const c=u&&u.data||null;(n||o.includes(u.type))&&a.next(c)},t.addEventListener("data",i)},stop:a=>t.removeEventListener("data",i)});return Dc(s)}}}function Mc(e){e.addListener({next:t=>{console.log(t)}})}function zn(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0,useDefaultDrivers:i=!0}=r;if(!e.isSygnalComponent){const p=e.name||e.componentName||e.label||"FUNCTIONAL_COMPONENT",m=e,{model:v,intent:O,hmrActions:g,context:_,peers:A,components:$,initialState:N,calculated:E,storeCalculatedInState:C,DOMSourceName:D,stateSourceName:k,debug:M}=e;e=Jt({name:p,view:m,model:v,intent:O,hmrActions:g,context:_,peers:A,components:$,initialState:N,calculated:E,storeCalculatedInState:C,DOMSourceName:D,stateSourceName:k,debug:M})}const s=ws(e,"STATE"),u={...i?{EVENTS:kc,DOM:Ga(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:Mc}:{},...t},{sources:c,sinks:d,run:h}=Is(s,u),y=h(),l={sources:c,sinks:d,dispose:y},f=p=>{l.sinks.STATE.shamefullySendNext(m=>{window.__SYGNAL_HMR_UPDATING=!0,l.dispose();const v=p.default;v.initialState=m;const O=zn(v,t);return l.sources=O.sources,l.sinks=O.sinks,l.dispose=O.dispose,O.sinks.STATE.shamefullySendNext(()=>({...m})),O.sources.STATE.stream.setDebugListener({next:()=>{l.sources.STATE.stream.setDebugListener(null),setTimeout(()=>{window.__SYGNAL_HMR_UPDATING=!1},100)}}),ABORT})};return l.hmr=f,l}function Fc(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...Yn(r)):Array.isArray(r)?t.push(...jc(r)):typeof r=="object"&&t.push(...Lc(r)),t),[]).join(" ")}function Jn(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function Yn(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!Jn(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function jc(e){return e.map(Yn).flat()}function Lc(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!Jn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});var Rc=G,Bc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;n&&(this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt)))},e.prototype._e=function(t){var r=this.out;r&&(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),t._c())},e}();function Uc(e){return function(r){return new Rc.Stream(new Bc(e,r))}}Kn.default=Uc;var Et={},Gc=V&&V.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(Et,"__esModule",{value:!0});Et.SampleCombineOperator=Et.SampleCombineListener=void 0;var Wc=G,ot={},Xn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==ot&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Et.SampleCombineListener=Xn;var Zn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=ot,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=ot,r[i]._add(new Xn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=ot,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==ot&&(this.Nn>0||r._n(Gc([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==ot&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==ot&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===ot&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Et.SampleCombineOperator=Zn;var Qn;Qn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Wc.Stream(new Zn(o,t))}};Et.default=Qn;var Kt=Object.prototype.hasOwnProperty,to=Object.prototype.toString,Cr=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,Tr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):to.call(t)==="[object Array]"},xr=function(t){if(!t||to.call(t)!=="[object Object]")return!1;var r=Kt.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&Kt.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o>"u"||Kt.call(t,o)},Dr=function(t,r){Cr&&r.name==="__proto__"?Cr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},kr=function(t,r){if(r==="__proto__")if(Kt.call(t,r)){if(Ir)return Ir(t,r).value}else return;return t[r]},Hc=function e(){var t,r,n,o,i,s,a=arguments[0],u=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(r in t)n=kr(a,r),o=kr(t,r),a!==o&&(d&&o&&(xr(o)||(i=Tr(o)))?(i?(i=!1,s=n&&Tr(n)?n:[]):s=n&&xr(n)?n:{},Dr(a,{name:r,newValue:e(d,s,o)})):typeof o<"u"&&Dr(a,{name:r,newValue:o}));return a};const eo=ao(Hc),qc=e=>e===void 0,Vc=e=>typeof e=="number",zc=e=>typeof e=="string",ro=e=>zc(e)||Vc(e),Jc=e=>Array.isArray(e),Yc=e=>typeof e=="object"&&e!==null,Kc=e=>typeof e=="function",Xc=e=>Yc(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,Zc={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},Qc=e=>e.sel in Zc,De=(...e)=>eo(!0,...e),tf=(...e)=>eo(!1,...e),no=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];Jc(i)?n=no(i,t,n):n=t(n,i)}return n},He=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>De(r,n),{}),ef=(e,t)=>He(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),Mr=(e,t)=>He(t,(r,n)=>r!==e?{[r]:n}:{}),oo=e=>ro(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,qe=e=>Qc(e)?tf(e,{data:Mr("props",De(e.data,{ns:"http://www.w3.org/2000/svg",attrs:Mr("className",De(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:qc(e.children)?void 0:e.children.map(t=>qe(t))}):e,at={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},rf=(e,t)=>He(e,(r,n)=>{const o={[r]:n};if(at[r]&&t[at[r]]!==void 0)return{[at[r]]:o};if(at[r]===null)return{};const i=Object.keys(at);for(let s=0;s<i.length;s++){const a=i[s];if(a.charAt(a.length-1)==="*"&&r.indexOf(a.slice(0,-1))===0&&t[at[a]]!==void 0)return{[at[a]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:t.props!==void 0?{props:o}:o}),nf=(e,t)=>qe(rf(ef(e,t),t)),of=e=>e.length>1||!ro(e[0])?void 0:e[0].toString(),sf=e=>no(e,(t,r)=>{const n=Xc(r)?r:oo(r);return t.push(n),t},[]),af={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},uf=e=>(t,r,...n)=>{if(typeof t>"u"&&(t="UNDEFINED",console.error("JSX Error: Capitalized HTML element without corresponding factory function.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),Kc(t)){if(t.name==="Fragment")return t(r||{},n);if(r||(r={}),t.isSygnalComponent){const i=t;t=t.componentName||t.label||t.name||"sygnal-factory",r.sygnalFactory=i}else{const i=t.componentName||t.label||t.name||"FUNCTION_COMPONENT",s=t,{model:a,intent:u,hmrActions:c,context:d,peers:h,components:y,initialState:l,calculated:f,storeCalculatedInState:p,DOMSourceName:m,stateSourceName:v,debug:O}=t,g={name:i,view:s,model:a,intent:u,hmrActions:c,context:d,peers:h,components:y,initialState:l,calculated:f,storeCalculatedInState:p,DOMSourceName:m,stateSourceName:v,debug:O};r.sygnalOptions=g,t=i}}const o=of(n);return qe({sel:t,data:r?nf(r,e):{},children:typeof o<"u"?oo(o):sf(n),text:o,elm:void 0,key:r?r.key:void 0})},R=uf(af);let cf=0;function ff(e){const t=new Array(16).fill().map((c,d)=>d),r=e.filter(c=>!c.deleted).map(c=>c.row*4+c.column),n=t.filter(c=>!r.includes(c));if(n.length===0)return e;const o=Math.floor(Math.random()*n.length),i=n[o],s=i%4,a=Math.floor(i/4),u=Math.ceil(Math.random()*1e3)<900?2:4;return[...e,{id:cf++,value:u,row:a,column:s,new:!0}]}function ke(e,t){let r,n,o,i,s;t=="UP"||t=="DOWN"?(r="column",n="row"):(r="row",n="column"),t=="UP"||t=="LEFT"?(o=0,i=3,s=1):(o=3,i=0,s=-1);const a=e.filter(d=>!d.deleted),u=[];let c=!1;for(let d=0;d<=3;d++){let h=null,y=o;for(let l=o;s==1?l<=i:l>=i;l+=s){const f=a.find(p=>p[r]===d&&p[n]===l);if(f){const p=f[n];if(f[n]=y,h!==null&&!h.merged&&f.value===h.value){const v=f.value*2;f.value=v,h.value=v,f[n]-=s,f.merged=!0,c=!0}else c=c||y!==p,y+=s;const m={id:f.id,value:f.value,row:f.row,column:f.column,merged:f.merged};h=m,u.push(m)}}}if(c){const d=e.map(h=>u.find(y=>y.id===h.id)||h);return d.forEach(h=>{h.deleted=h.deleted||h.merged,delete h.merged}),d}return!1}function lf(e){const t=e.map(o=>({...o}));let r=ke(t,"UP"),n=ke(t,"LEFT");return!(!r&&!n)}const io=100;function Ve({state:e}){const{id:t,value:r,row:n,column:o,deleted:i}=e,s=Fc("tile",`tile-${t}`,{new:!!e.new}),a=Math.log2(e.value||0),u=Math.floor(50*a/11+30),c={"--row":`       ${n}`,"--col":`       ${o}`,"--tile-color":`${u}%`,"--duration":`${io}ms`,zIndex:i?10:1};return R("div",{className:s,id:`tile-${t}`,style:c},r)}Ve.model={DELETE:e=>{}};Ve.intent=({STATE:e,DOM:t})=>({DELETE:e.stream.filter(o=>o.deleted).compose(zt(io))});const pf="ArrowUp",hf="ArrowDown",df="ArrowLeft",yf="ArrowRight",mf=120,so={tiles:[],over:!1,max:2,score:0,locked:!1};function ce({state:e}){const{score:t,max:r,over:n,won:o}=e;return R("div",{className:"container"},R("h1",null,"Sygnal 2048"),R("div",{className:"info"},R("div",{className:"largest"},"Largest: ",r),R("div",{className:"score"},"Score: ",t)),R("div",{className:"board-container"},R("div",{className:"slot-board"},Array(16).fill().map(i=>R("div",{className:"slot"}))),R("collection",{of:Ve,from:"tiles",className:"tile-board"}),n&&o&&R("div",{className:"gameover won"},R("span",{className:"won-message"},"YOU WON!!")),n&&!o&&R("div",{className:"gameover lost"},R("span",{className:"lost-message"},"GAME OVER"))),R("div",{className:"restart-container"},R("input",{type:"button",className:"restart",value:"Start Over"})))}ce.initialState=so;ce.model={BOOTSTRAP:{LOG:(e,t,r)=>(r("RESTART"),"Starting game...")},RESTART:(e,t,r)=>(r("ADD_TILE"),r("ADD_TILE"),{...so}),MOVE:(e,t,r)=>{if(e.locked||e.over)return ie;const n=ke(e.tiles,t);if(!n)return ie;const o=n.filter(i=>i.deleted).reduce((i,s)=>i+s.value,0);return r("ADD_TILE",null,mf),{...e,tiles:n,score:e.score+o,locked:!0}},ADD_TILE:(e,t)=>{const r=ff(e.tiles),n=r.filter(u=>u&&!u.deleted),o=n.reduce((u,c)=>u>c.value?u:c.value,0),i=!e.over&&o===2048,s=!e.over&&n.length===16&&!lf(n);return{...e,max:o,won:i,over:i||s,tiles:r,locked:!1}}};ce.intent=({DOM:e})=>{const t=e.select("document").events("keydown").map(c=>c.key),r=c=>d=>d===c,n=t.filter(r(pf)).mapTo("UP"),o=t.filter(r(hf)).mapTo("DOWN"),i=t.filter(r(df)).mapTo("LEFT"),s=t.filter(r(yf)).mapTo("RIGHT"),a=P.merge(n,o,i,s);return{RESTART:e.select(".restart, .gameover").events("click"),MOVE:a}};zn(ce);
