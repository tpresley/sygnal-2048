var fo=Object.defineProperty,lo=Object.defineProperties;var po=Object.getOwnPropertyDescriptors;var jt=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var Ke=(e,t,r)=>t in e?fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,D=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&Ke(e,r,t[r]);if(jt)for(var r of jt(t))Xe.call(t,r)&&Ke(e,r,t[r]);return e},L=(e,t)=>lo(e,po(t));var Ze=(e,t)=>{var r={};for(var n in e)Ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&jt)for(var n of jt(e))t.indexOf(n)<0&&Xe.call(e,n)&&(r[n]=e[n]);return r};const ho=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};ho();var J=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},V={},Gr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Gr);var yo=Gr,Qe=Object.prototype.toString,zr=function(t){var r=Qe.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Qe.call(t.callee)==="[object Function]"),n},Vr;if(!Object.keys){var Lt=Object.prototype.hasOwnProperty,tr=Object.prototype.toString,mo=zr,er=Object.prototype.propertyIsEnumerable,vo=!er.call({toString:null},"toString"),go=er.call(function(){},"prototype"),Rt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],he=function(e){var t=e.constructor;return t&&t.prototype===e},_o={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},bo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!_o["$"+e]&&Lt.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{he(window[e])}catch{return!0}}catch{return!0}return!1}(),wo=function(e){if(typeof window=="undefined"||!bo)return he(e);try{return he(e)}catch{return!1}};Vr=function(t){var r=t!==null&&typeof t=="object",n=tr.call(t)==="[object Function]",o=mo(t),i=r&&tr.call(t)==="[object String]",s=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var a=go&&n;if(i&&t.length>0&&!Lt.call(t,0))for(var u=0;u<t.length;++u)s.push(String(u));if(o&&t.length>0)for(var c=0;c<t.length;++c)s.push(String(c));else for(var p in t)!(a&&p==="prototype")&&Lt.call(t,p)&&s.push(String(p));if(vo)for(var l=wo(t),y=0;y<Rt.length;++y)!(l&&Rt[y]==="constructor")&&Lt.call(t,Rt[y])&&s.push(Rt[y]);return s}}var So=Vr,$o=Array.prototype.slice,Oo=zr,rr=Object.keys,zt=rr?function(t){return rr(t)}:So,nr=Object.keys;zt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Oo(n)?nr($o.call(n)):nr(n)})}else Object.keys=zt;return Object.keys||zt};var Ao=zt,Eo=Error,Po=EvalError,No=RangeError,Co=ReferenceError,qr=SyntaxError,Hr=TypeError,Io=URIError,xo=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},or=typeof Symbol!="undefined"&&Symbol,To=xo,ko=function(){return typeof or!="function"||typeof Symbol!="function"||typeof or("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:To()},de={__proto__:null,foo:{}},Do=Object,Mo=function(){return{__proto__:de}.foo===de.foo&&!(de instanceof Do)},Fo="Function.prototype.bind called on incompatible ",jo=Object.prototype.toString,Lo=Math.max,Ro="[object Function]",ir=function(t,r){for(var n=[],o=0;o<t.length;o+=1)n[o]=t[o];for(var i=0;i<r.length;i+=1)n[i+t.length]=r[i];return n},Bo=function(t,r){for(var n=[],o=r||0,i=0;o<t.length;o+=1,i+=1)n[i]=t[o];return n},Uo=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},Wo=function(t){var r=this;if(typeof r!="function"||jo.apply(r)!==Ro)throw new TypeError(Fo+r);for(var n=Bo(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,ir(n,arguments));return Object(p)===p?p:this}return r.apply(t,ir(n,arguments))},s=Lo(0,r.length-n.length),a=[],u=0;u<s;u++)a[u]="$"+u;if(o=Function("binder","return function ("+Uo(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},Go=Wo,Jr=Function.prototype.bind||Go,zo=Function.prototype.call,Vo=Object.prototype.hasOwnProperty,qo=Jr,Ho=qo.call(zo,Vo),C,Jo=Eo,Ko=Po,Yo=No,Xo=Co,Ot=qr,St=Hr,Zo=Io,Kr=Function,ye=function(e){try{return Kr('"use strict"; return ('+e+").constructor;")()}catch{}},ft=Object.getOwnPropertyDescriptor;if(ft)try{ft({},"")}catch{ft=null}var me=function(){throw new St},Qo=ft?function(){try{return arguments.callee,me}catch{try{return ft(arguments,"callee").get}catch{return me}}}():me,mt=ko(),ti=Mo(),F=Object.getPrototypeOf||(ti?function(e){return e.__proto__}:null),bt={},ei=typeof Uint8Array=="undefined"||!F?C:F(Uint8Array),lt={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?C:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?C:ArrayBuffer,"%ArrayIteratorPrototype%":mt&&F?F([][Symbol.iterator]()):C,"%AsyncFromSyncIteratorPrototype%":C,"%AsyncFunction%":bt,"%AsyncGenerator%":bt,"%AsyncGeneratorFunction%":bt,"%AsyncIteratorPrototype%":bt,"%Atomics%":typeof Atomics=="undefined"?C:Atomics,"%BigInt%":typeof BigInt=="undefined"?C:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?C:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?C:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?C:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Jo,"%eval%":eval,"%EvalError%":Ko,"%Float32Array%":typeof Float32Array=="undefined"?C:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?C:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?C:FinalizationRegistry,"%Function%":Kr,"%GeneratorFunction%":bt,"%Int8Array%":typeof Int8Array=="undefined"?C:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?C:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?C:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":mt&&F?F(F([][Symbol.iterator]())):C,"%JSON%":typeof JSON=="object"?JSON:C,"%Map%":typeof Map=="undefined"?C:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!mt||!F?C:F(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?C:Promise,"%Proxy%":typeof Proxy=="undefined"?C:Proxy,"%RangeError%":Yo,"%ReferenceError%":Xo,"%Reflect%":typeof Reflect=="undefined"?C:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?C:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!mt||!F?C:F(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?C:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":mt&&F?F(""[Symbol.iterator]()):C,"%Symbol%":mt?Symbol:C,"%SyntaxError%":Ot,"%ThrowTypeError%":Qo,"%TypedArray%":ei,"%TypeError%":St,"%Uint8Array%":typeof Uint8Array=="undefined"?C:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?C:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?C:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?C:Uint32Array,"%URIError%":Zo,"%WeakMap%":typeof WeakMap=="undefined"?C:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?C:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?C:WeakSet};if(F)try{null.error}catch(e){var ri=F(F(e));lt["%Error.prototype%"]=ri}var ni=function e(t){var r;if(t==="%AsyncFunction%")r=ye("async function () {}");else if(t==="%GeneratorFunction%")r=ye("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=ye("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&F&&(r=F(o.prototype))}return lt[t]=r,r},sr={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Mt=Jr,ee=Ho,oi=Mt.call(Function.call,Array.prototype.concat),ii=Mt.call(Function.apply,Array.prototype.splice),ar=Mt.call(Function.call,String.prototype.replace),re=Mt.call(Function.call,String.prototype.slice),si=Mt.call(Function.call,RegExp.prototype.exec),ai=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ui=/\\(\\)?/g,ci=function(t){var r=re(t,0,1),n=re(t,-1);if(r==="%"&&n!=="%")throw new Ot("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ot("invalid intrinsic syntax, expected opening `%`");var o=[];return ar(t,ai,function(i,s,a,u){o[o.length]=a?ar(u,ui,"$1"):s||i}),o},fi=function(t,r){var n=t,o;if(ee(sr,n)&&(o=sr[n],n="%"+o[0]+"%"),ee(lt,n)){var i=lt[n];if(i===bt&&(i=ni(n)),typeof i=="undefined"&&!r)throw new St("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Ot("intrinsic "+t+" does not exist!")},Yr=function(t,r){if(typeof t!="string"||t.length===0)throw new St("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new St('"allowMissing" argument must be a boolean');if(si(/^%?[^%]*%?$/,t)===null)throw new Ot("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ci(t),o=n.length>0?n[0]:"",i=fi("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],ii(n,oi([0,1],c)));for(var p=1,l=!0;p<n.length;p+=1){var y=n[p],d=re(y,0,1),f=re(y,-1);if((d==='"'||d==="'"||d==="`"||f==='"'||f==="'"||f==="`")&&d!==f)throw new Ot("property names with quotes must have matching quotes");if((y==="constructor"||!l)&&(u=!0),o+="."+y,s="%"+o+"%",ee(lt,s))a=lt[s];else if(a!=null){if(!(y in a)){if(!r)throw new St("base intrinsic for "+t+" exists, but the property is not available.");return}if(ft&&p+1>=n.length){var h=ft(a,y);l=!!h,l&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[y]}else l=ee(a,y),a=a[y];l&&!u&&(lt[s]=a)}}return a},li=Yr,Vt=li("%Object.defineProperty%",!0)||!1;if(Vt)try{Vt({},"a",{value:1})}catch{Vt=!1}var Xr=Vt,pi=Yr,qt=pi("%Object.getOwnPropertyDescriptor%",!0);if(qt)try{qt([],"length")}catch{qt=null}var Zr=qt,ur=Xr,hi=qr,vt=Hr,cr=Zr,di=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new vt("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new vt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new vt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new vt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new vt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new vt("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!cr&&cr(t,r);if(ur)ur(t,r,{configurable:s===null&&u?u.configurable:!s,enumerable:o===null&&u?u.enumerable:!o,value:n,writable:i===null&&u?u.writable:!i});else if(a||!o&&!i&&!s)t[r]=n;else throw new hi("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ce=Xr,Qr=function(){return!!Ce};Qr.hasArrayLengthDefineBug=function(){if(!Ce)return null;try{return Ce([],"length",{value:1}).length!==1}catch{return!0}};var yi=Qr,mi=Ao,vi=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",gi=Object.prototype.toString,_i=Array.prototype.concat,fr=di,bi=function(e){return typeof e=="function"&&gi.call(e)==="[object Function]"},tn=yi(),wi=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!bi(n)||!n())return}tn?fr(e,t,r,!0):fr(e,t,r)},en=function(e,t){var r=arguments.length>2?arguments[2]:{},n=mi(t);vi&&(n=_i.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)wi(e,n[o],t[n[o]],r[n[o]])};en.supportsDescriptors=!!tn;var rn=en,kt={exports:{}};typeof self!="undefined"?kt.exports=self:typeof window!="undefined"?kt.exports=window:kt.exports=Function("return this")();var Si=kt.exports,nn=function(){return typeof J!="object"||!J||J.Math!==Math||J.Array!==Array?Si:J},$i=rn,Oi=Zr,Ai=nn,Ei=function(){var t=Ai();if($i.supportsDescriptors){var r=Oi(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Pi=rn,Ni=kt.exports,on=nn,Ci=Ei,Ii=on(),sn=function(){return Ii};Pi(sn,{getPolyfill:on,implementation:Ni,shim:Ci});var xi=sn,Ti=J&&J.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(V,"__esModule",{value:!0});V.NO_IL=je=V.NO=V.MemoryStream=Z=V.Stream=void 0;var ki=yo,Di=xi,Bt=ki.default(Di.getPolyfill()),b={},je=V.NO=b;function B(){}function Ht(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Mi(e,t){return function(n){return e(n)&&t(n)}}function Le(e,t,r){try{return e.f(t)}catch(n){return r._e(n),b}}var ut={_n:B,_e:B,_c:B};V.NO_IL=ut;function lr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Fi=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),ji=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Li=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new ji(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Ri=function(){function e(t){this.type="merge",this.insArr=t,this.out=b,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===b)return;t._c()}},e}(),Bi=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==b&&r.up(t,this.i)){var o=Ht(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==b&&--t.Nc===0&&t.out._c()},e}(),Ui=function(){function e(t){this.type="combine",this.insArr=t,this.out=b,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===b?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=b,r[i]._add(new Bi(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=b,this.ils=[],this.vals=[]},e}(),Wi=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),Gi=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(B,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),zi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),Vi=function(){function e(t,r){this.type="debug",this.ins=t,this.out=b,this.s=B,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=this.s,o=this.l;if(n!==B)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),qi=function(){function e(t,r){this.type="drop",this.ins=r,this.out=b,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),Hi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),Ji=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=b,this.o=t,this.oil=ut}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new Hi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=b,this.oil=ut},e.prototype.end=function(){var t=this.out;t!==b&&t._c()},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ve=function(){function e(t,r){this.type="filter",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Le(this,t,r);n===b||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),Ki=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=b,this.op.less()},e}(),Yi=function(){function e(t){this.type="flatten",this.ins=t,this.out=b,this.open=!0,this.inner=b,this.il=ut}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=b,this.il=ut,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==b&&this.inner._remove(this.il),this.out=b,this.open=!0,this.inner=b,this.il=ut},e.prototype.less=function(){var t=this.out;t!==b&&!this.open&&this.inner===b&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=this,o=n.inner,i=n.il;o!==b&&i!==ut&&o._remove(i),(this.inner=t)._add(this.il=new Ki(r,this))}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Xi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=b,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Le(this,t,r);n!==b&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),Zi=function(){function e(t){this.type="last",this.ins=t,this.out=b,this.has=!1,this.val=b}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b,this.val=b},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Qi=function(){function e(t,r){this.type="map",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=Le(this,t,r);n!==b&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),ts=function(){function e(t){this.type="remember",this.ins=t,this.out=b}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=b},e}(),es=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=b,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;r!==b&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==b)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),rs=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=b,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=b},e}(),ns=function(){function e(t,r){this.type="take",this.ins=r,this.out=b,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=b},e.prototype._n=function(t){var r=this.out;if(r!==b){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==b&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==b&&t._c()},e}(),Re=function(){function e(t){this._prod=t||b,this._ils=[],this._stopID=b,this._dl=b,this._d=!1,this._target=null,this._err=b}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Ht(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===b){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Ht(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Ht(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==b&&this._prod._stop(),this._err=b,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=b,this._stopID=b},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==b)clearTimeout(this._stopID),this._stopID=b;else{var o=this._prod;o!==b&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==b&&o.length<=0?(this._err=b,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==b)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof et?et:e},e.prototype.addListener=function(t){t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Fi(this,t)},e.prototype[Bt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");lr(t)}return new e(t)},e.createWithMemory=function(t){return t&&lr(t),new et(t)},e.never=function(){return new e({_start:B,_stop:B})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:B})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:B})},e.from=function(t){if(typeof t[Bt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new Wi(t))},e.fromPromise=function(t){return new e(new Gi(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Bt]=="function"?t[Bt]():t;return new e(new Li(r))},e.periodic=function(t){return new e(new zi(t))},e.prototype._map=function(t){return new(this.ctor())(new Qi(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ve?new e(new ve(Mi(r.f,t),r.ins)):new e(new ve(t,this))},e.prototype.take=function(t){return new(this.ctor())(new ns(t,this))},e.prototype.drop=function(t){return new e(new qi(t,this))},e.prototype.last=function(){return new e(new Zi(this))},e.prototype.startWith=function(t){return new et(new rs(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new Ji(t,this))},e.prototype.fold=function(t,r){return new et(new Xi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new es(t,this))},e.prototype.flatten=function(){return new e(new Yi(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new et(new ts(this))},e.prototype.debug=function(t){return new(this.ctor())(new Vi(this,t))},e.prototype.imitate=function(t){if(t instanceof et)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||B,t._e=t.error||B,t._c=t.complete||B,this._dl=t):(this._d=!1,this._dl=b)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ri(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Ui(r))},e}(),Z=V.Stream=Re,et=function(e){Ti(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==b)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=b;else if(this._has)r._n(this._v);else{var i=this._prod;i!==b&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Re);V.MemoryStream=et;var os=Re,A=V.default=os,Be={};Object.defineProperty(Be,"__esModule",{value:!0});function an(){var e;return typeof window!="undefined"?e=window:typeof J!="undefined"?e=J:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function is(e){an().adaptStream=e}Be.setAdapt=is;function ss(e){return an().adaptStream(e)}var q=Be.adapt=ss;function as(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function us(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var s=t["*"];if(typeof s!="undefined"){n[o]=s;return}n[o]=r}),n}function cs(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function fs(e,t,r){var n={};for(var o in t){var i=e[o],s=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=q(i.isolateSink(A.fromObservable(s),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var un=0;function pr(){return"cycle"+ ++un}function st(e,t){t===void 0&&(t=pr()),as(e,t);var r=typeof t=="object"?pr():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u=us(i,n,r),c=cs(i,u),p=e.apply(void 0,[c].concat(s)),l=fs(i,p,u);return l}}st.reset=function(){return un=0};var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.DropRepeatsOperator=void 0;var ls=V,ge={},cn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=ge,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=ge},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==ge&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();fe.DropRepeatsOperator=cn;function ps(e){return e===void 0&&(e=void 0),function(r){return new ls.Stream(new cn(r,e))}}var hs=fe.default=ps,Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ie.apply(this,arguments)};function ds(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function fn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function ys(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?ds(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):Ie({},r,(i={},i[e]=n,i))}:e.set}function ms(e,t){return e.select(t)}function vs(e,t){var r=fn(t),n=ys(t);return e.map(function(o){return function(s){var a=r(s),u=o(a);return a===u?s:n(s,u)}})}var It=function(){function e(t,r){this.isolateSource=ms,this.isolateSink=vs,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(hs()).remember(),this._name=r,this.stream=q(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=fn(t);return new e(this._stream.map(r),this._name)},e}(),gs=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),_s=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=r.length,a=0;a<s;++a){var u=r[a],c=u._key,p=A.fromObservable(u[i]||A.never());n.has(c)||(n.set(c,new gs(o,this,p)),p._add(n.get(c)))}n.forEach(function(l,y){(!t.dict.has(y)||!t.dict.get(y))&&(l.ins._remove(l),l.ins=null,l.out=null,n.delete(y))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function bs(e){return function(r){return new Z(new _s(e,r))}}var ws=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=je,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ss=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var s=t[i],a=s._key;if(!n.has(a))return;var u=n.get(a).val;if(u===je)return;o[i]=u}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,s=t.dict,a=r.length,u=!1;if(n.forEach(function(d,f){s.has(f)||(d.ins._remove(d),d.ins=null,d.out=null,d.val=null,n.delete(f),u=!0)}),a===0){o._n([]);return}for(var c=0;c<a;++c){var p=r[c],l=p._key;if(!p[i])throw new Error("pickCombine found an undefined child sink stream");var y=A.fromObservable(p[i]);n.has(l)||(n.set(l,new ws(l,o,this,y)),y._add(n.get(l)))}u&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function $s(e){return function(r){return new Z(new Ss(e,r))}}var ne=globalThis&&globalThis.__assign||function(){return ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ne.apply(this,arguments)},Os=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return q(this._instances$.compose(bs(t)))},e.prototype.pickCombine=function(t){return q(this._instances$.compose($s(t)))},e}();function As(e){return{"*":null}}function Es(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Ps={get:function(e){return e},set:function(e,t){return t}};function Ns(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||As,s=A.fromObservable(r[n].stream),a=s.fold(function(u,c){var p,l,y,d,f=u.dict;if(Array.isArray(c)){for(var h=Array(c.length),m=new Set,v=0,$=c.length;v<$;++v){var _=""+(o?o(c[v],v):v);if(m.add(_),f.has(_))h[v]=f.get(_);else{var g=o?Es(o,_):""+v,S=i(_),E=typeof S=="string"?(p={"*":S},p[n]=g,p):ne({},S,(l={},l[n]=g,l)),P=e.itemFactory?e.itemFactory(c[v],v):e.item,O=st(P,E)(r);f.set(_,O),h[v]=O}h[v]._key=_}return f.forEach(function(N,T){m.has(T)||f.delete(T)}),m.clear(),{dict:f,arr:h}}else{f.clear();var _=""+(o?o(c,0):"this"),g=Ps,S=i(_),E=typeof S=="string"?(y={"*":S},y[n]=g,y):ne({},S,(d={},d[n]=g,d)),P=e.itemFactory?e.itemFactory(c,0):e.item,O=st(P,E)(r);return f.set(_,O),{dict:f,arr:[O]}}},{dict:new Map,arr:[]});return e.collectSinks(new Os(a))}}var ln={};Object.defineProperty(ln,"__esModule",{value:!0});var Cs=V,Is=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function xs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Cs.Stream(new Is(e))}var pn=ln.default=xs,hn={};Object.defineProperty(hn,"__esModule",{value:!0});function Ts(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var dn=hn.default=Ts,_e=dn();function ks(e,t){return t===void 0&&(t="state"),function(n){var o=A.create(),i=o.fold(function(c,p){return p(c)},void 0).drop(1),s=n;s[t]=new It(i,t);var a=e(s);if(a[t]){var u=pn(A.fromObservable(a[t]),A.never());u.subscribe({next:function(c){return _e(function(){return o._n(c)})},error:function(c){return _e(function(){return o._e(c)})},complete:function(){return _e(function(){return o._c()})}})}return a}}function Ds(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ms(e){return Ds().adaptStream(e)}function Fs(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=A.create());return t}function js(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function Ls(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Ms(e[t]));return e}function Rs(e,t){var r=dn(),n=Object.keys(e).filter(function(a){return!!t[a]}),o={},i={};n.forEach(function(a){o[a]={_n:[],_e:[]},i[a]={next:function(u){return o[a]._n.push(u)},error:function(u){return o[a]._e.push(u)},complete:function(){}}});var s=n.map(function(a){return A.fromObservable(e[a]).subscribe(i[a])});return n.forEach(function(a){var u=t[a],c=function(l){r(function(){return u._n(l)})},p=function(l){r(function(){(console.error||console.log)(l),u._e(l)})};o[a]._n.forEach(c),o[a]._e.forEach(p),i[a].next=c,i[a].error=p,i[a]._n=c,i[a]._e=p}),o=null,function(){s.forEach(function(u){return u.unsubscribe()})}}function Bs(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Us(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function yn(e){return Object.keys(e).length===0}function Ws(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(yn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Gs(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Gs(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(yn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=Fs(e),r=js(e,t),n=Ls(r);function o(s){return Rs(s,t)}function i(){Us(n),Bs(t)}return{sources:n,run:o,dispose:i}}function zs(e,t){var r=Ws(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}function Vs(e,t){return document.createElement(e,t)}function qs(e,t,r){return document.createElementNS(e,t,r)}function Hs(){return pt(document.createDocumentFragment())}function Js(e){return document.createTextNode(e)}function Ks(e){return document.createComment(e)}function Ys(e,t,r){if(Q(e)){let n=e;for(;n&&Q(n);)n=pt(n).parent;e=n!=null?n:e}Q(t)&&(t=pt(t,e)),r&&Q(r)&&(r=pt(r).firstChildNode),e.insertBefore(t,r)}function Xs(e,t){e.removeChild(t)}function Zs(e,t){Q(t)&&(t=pt(t,e)),e.appendChild(t)}function mn(e){if(Q(e)){for(;e&&Q(e);)e=pt(e).parent;return e!=null?e:null}return e.parentNode}function Qs(e){var t;if(Q(e)){const r=pt(e),n=mn(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function ta(e){return e.tagName}function ea(e,t){e.textContent=t}function ra(e){return e.textContent}function na(e){return e.nodeType===1}function oa(e){return e.nodeType===3}function ia(e){return e.nodeType===8}function Q(e){return e.nodeType===11}function pt(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t!=null?t:null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const vn={createElement:Vs,createElementNS:qs,createTextNode:Js,createDocumentFragment:Hs,createComment:Ks,insertBefore:Ys,removeChild:Xs,appendChild:Zs,parentNode:mn,nextSibling:Qs,tagName:ta,setTextContent:ea,getTextContent:ra,isElement:na,isText:oa,isComment:ia,isDocumentFragment:Q};function X(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const oe=Array.isArray;function Jt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Ut(e){return e===void 0}function z(e){return e!==void 0}const be=X("",{},[],void 0,void 0);function Nt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),s=e.sel===t.sel,a=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return s&&o&&i&&a}function sa(){throw new Error("The document fragment is not supported on this platform.")}function aa(e,t){return e.isElement(t)}function ua(e,t){return e.isDocumentFragment(t)}function ca(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const s=(n=e[i])===null||n===void 0?void 0:n.key;s!==void 0&&(o[s]=i)}return o}const fa=["create","update","remove","destroy","pre","post"];function la(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:vn;for(const f of fa)for(const h of e){const m=h[f];m!==void 0&&n[f].push(m)}function i(f){const h=f.id?"#"+f.id:"",m=f.getAttribute("class"),v=m?"."+m.split(" ").join("."):"";return X(o.tagName(f).toLowerCase()+h+v,{},[],void 0,f)}function s(f){return X(void 0,{},[],void 0,f)}function a(f,h){return function(){if(--h===0){const v=o.parentNode(f);v!==null&&o.removeChild(v,f)}}}function u(f,h){var m,v,$,_;let g,S=f.data;if(S!==void 0){const O=(m=S.hook)===null||m===void 0?void 0:m.init;z(O)&&(O(f),S=f.data)}const E=f.children,P=f.sel;if(P==="!")Ut(f.text)&&(f.text=""),f.elm=o.createComment(f.text);else if(P==="")f.elm=o.createTextNode(f.text);else if(P!==void 0){const O=P.indexOf("#"),N=P.indexOf(".",O),T=O>0?O:P.length,k=N>0?N:P.length,M=O!==-1||N!==-1?P.slice(0,Math.min(T,k)):P,G=f.elm=z(S)&&z(g=S.ns)?o.createElementNS(g,M,S):o.createElement(M,S);for(T<k&&G.setAttribute("id",P.slice(T+1,k)),N>0&&G.setAttribute("class",P.slice(k+1).replace(/\./g," ")),g=0;g<n.create.length;++g)n.create[g](be,f);if(Jt(f.text)&&(!oe(E)||E.length===0)&&o.appendChild(G,o.createTextNode(f.text)),oe(E))for(g=0;g<E.length;++g){const yt=E[g];yt!=null&&o.appendChild(G,u(yt,h))}const tt=f.data.hook;z(tt)&&((v=tt.create)===null||v===void 0||v.call(tt,be,f),tt.insert&&h.push(f))}else if((($=r==null?void 0:r.experimental)===null||$===void 0?void 0:$.fragments)&&f.children){for(f.elm=((_=o.createDocumentFragment)!==null&&_!==void 0?_:sa)(),g=0;g<n.create.length;++g)n.create[g](be,f);for(g=0;g<f.children.length;++g){const O=f.children[g];O!=null&&o.appendChild(f.elm,u(O,h))}}else f.elm=o.createTextNode(f.text);return f.elm}function c(f,h,m,v,$,_){for(;v<=$;++v){const g=m[v];g!=null&&o.insertBefore(f,u(g,_),h)}}function p(f){var h,m;const v=f.data;if(v!==void 0){(m=(h=v==null?void 0:v.hook)===null||h===void 0?void 0:h.destroy)===null||m===void 0||m.call(h,f);for(let $=0;$<n.destroy.length;++$)n.destroy[$](f);if(f.children!==void 0)for(let $=0;$<f.children.length;++$){const _=f.children[$];_!=null&&typeof _!="string"&&p(_)}}}function l(f,h,m,v){for(var $,_;m<=v;++m){let g,S;const E=h[m];if(E!=null)if(z(E.sel)){p(E),g=n.remove.length+1,S=a(E.elm,g);for(let O=0;O<n.remove.length;++O)n.remove[O](E,S);const P=(_=($=E==null?void 0:E.data)===null||$===void 0?void 0:$.hook)===null||_===void 0?void 0:_.remove;z(P)?P(E,S):S()}else E.children?(p(E),l(f,E.children,0,E.children.length-1)):o.removeChild(f,E.elm)}}function y(f,h,m,v){let $=0,_=0,g=h.length-1,S=h[0],E=h[g],P=m.length-1,O=m[0],N=m[P],T,k,M,G;for(;$<=g&&_<=P;)S==null?S=h[++$]:E==null?E=h[--g]:O==null?O=m[++_]:N==null?N=m[--P]:Nt(S,O)?(d(S,O,v),S=h[++$],O=m[++_]):Nt(E,N)?(d(E,N,v),E=h[--g],N=m[--P]):Nt(S,N)?(d(S,N,v),o.insertBefore(f,S.elm,o.nextSibling(E.elm)),S=h[++$],N=m[--P]):Nt(E,O)?(d(E,O,v),o.insertBefore(f,E.elm,S.elm),E=h[--g],O=m[++_]):(T===void 0&&(T=ca(h,$,g)),k=T[O.key],Ut(k)?(o.insertBefore(f,u(O,v),S.elm),O=m[++_]):Ut(T[N.key])?(o.insertBefore(f,u(N,v),o.nextSibling(E.elm)),N=m[--P]):(M=h[k],M.sel!==O.sel?o.insertBefore(f,u(O,v),S.elm):(d(M,O,v),h[k]=void 0,o.insertBefore(f,M.elm,S.elm)),O=m[++_]));_<=P&&(G=m[P+1]==null?null:m[P+1].elm,c(f,G,m,_,P,v)),$<=g&&l(f,h,$,g)}function d(f,h,m){var v,$,_,g,S,E,P,O;const N=(v=h.data)===null||v===void 0?void 0:v.hook;($=N==null?void 0:N.prepatch)===null||$===void 0||$.call(N,f,h);const T=h.elm=f.elm;if(f===h)return;if(h.data!==void 0||z(h.text)&&h.text!==f.text){(_=h.data)!==null&&_!==void 0||(h.data={}),(g=f.data)!==null&&g!==void 0||(f.data={});for(let G=0;G<n.update.length;++G)n.update[G](f,h);(P=(E=(S=h.data)===null||S===void 0?void 0:S.hook)===null||E===void 0?void 0:E.update)===null||P===void 0||P.call(E,f,h)}const k=f.children,M=h.children;Ut(h.text)?z(k)&&z(M)?k!==M&&y(T,k,M,m):z(M)?(z(f.text)&&o.setTextContent(T,""),c(T,null,M,0,M.length-1,m)):z(k)?l(T,k,0,k.length-1):z(f.text)&&o.setTextContent(T,""):f.text!==h.text&&(z(k)&&l(T,k,0,k.length-1),o.setTextContent(T,h.text)),(O=N==null?void 0:N.postpatch)===null||O===void 0||O.call(N,f,h)}return function(h,m){let v,$,_;const g=[];for(v=0;v<n.pre.length;++v)n.pre[v]();for(aa(o,h)?h=i(h):ua(o,h)&&(h=s(h)),Nt(h,m)?d(h,m,g):($=h.elm,_=o.parentNode($),u(m,g),_!==null&&(o.insertBefore(_,m.elm,o.nextSibling($)),l(_,[h],0,0))),v=0;v<g.length;++v)g[v].data.hook.insert(g[v]);for(v=0;v<n.post.length;++v)n.post[v]();return m}}function Ue(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&Ue(i,o.children,o.sel)}}function rt(e,t,r){let n={},o,i,s;if(r!==void 0?(t!==null&&(n=t),oe(r)?o=r:Jt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(oe(t)?o=t:Jt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(s=0;s<o.length;++s)Jt(o[s])&&(o[s]=X(void 0,void 0,void 0,o[s],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&Ue(n,o,e),X(e,n,o,i,void 0)}function xe(e,t){const r=t!==void 0?t:vn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),s=i?"."+i.split(" ").join("."):"",a=r.tagName(e).toLowerCase()+o+s,u={},c={},p={},l=[];let y,d,f;const h=e.attributes,m=e.childNodes;for(d=0,f=h.length;d<f;d++)y=h[d].nodeName,y.startsWith("data-")?c[y.slice(5)]=h[d].nodeValue||"":y!=="id"&&y!=="class"&&(u[y]=h[d].nodeValue);for(d=0,f=m.length;d<f;d++)l.push(xe(m[d],t));return Object.keys(u).length>0&&(p.attrs=u),Object.keys(c).length>0&&(p.dataset=c),a.startsWith("svg")&&(a.length===3||a[3]==="."||a[3]==="#")&&Ue(p,l,a),X(a,p,l,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),X(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),X("!",{},[],n,e)):X("",{},[],void 0,e)}const pa="http://www.w3.org/1999/xlink",ha="http://www.w3.org/2000/xmlns/",da="http://www.w3.org/XML/1998/namespace",hr=58,ya=120,ma=109;function dr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const s=i[r];o[r]!==s&&(s===!0?n.setAttribute(r,""):s===!1?n.removeAttribute(r):r.charCodeAt(0)!==ya?n.setAttribute(r,s):r.charCodeAt(3)===hr?n.setAttributeNS(da,r,s):r.charCodeAt(5)===hr?r.charCodeAt(1)===ma?n.setAttributeNS(ha,r,s):n.setAttributeNS(pa,r,s):n.setAttribute(r,s))}for(r in o)r in i||n.removeAttribute(r)}}const va={create:dr,update:dr};function yr(e,t){let r,n;const o=t.elm;let i=e.data.class,s=t.data.class;if(!(!i&&!s)&&i!==s){i=i||{},s=s||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(s,n)&&o.classList.remove(n);for(n in s)r=s[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const ga={create:yr,update:yr},mr=/[A-Z]/g;function vr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const s=r.dataset;for(i in n)i in o||(s?i in s&&delete s[i]:r.removeAttribute("data-"+i.replace(mr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(s?s[i]=o[i]:r.setAttribute("data-"+i.replace(mr,"-$&").toLowerCase(),o[i]))}const _a={create:vr,update:vr};function gr(e,t){let r,n,o;const i=t.elm;let s=e.data.props,a=t.data.props;if(!(!s&&!a)&&s!==a){s=s||{},a=a||{};for(r in a)n=a[r],o=s[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const ba={create:gr,update:gr},_r=typeof(window==null?void 0:window.requestAnimationFrame)=="function"?window.requestAnimationFrame.bind(window):setTimeout,wa=function(e){_r(function(){_r(e)})};let Te=!1;function Sa(e,t,r){wa(function(){e[t]=r})}function br(e,t){let r,n;const o=t.elm;let i=e.data.style,s=t.data.style;if(!i&&!s||i===s)return;i=i||{},s=s||{};const a="delayed"in i;for(n in i)n in s||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in s)if(r=s[n],n==="delayed"&&s.delayed)for(const u in s.delayed)r=s.delayed[u],(!a||r!==i.delayed[u])&&Sa(o.style,u,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function $a(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Oa(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Te||(e.elm.offsetLeft,Te=!0);let n;const o=e.elm;let i=0;const s=r.remove;let a=0;const u=[];for(n in s)u.push(n),o.style[n]=s[n];const p=getComputedStyle(o)["transition-property"].split(", ");for(;i<p.length;++i)u.indexOf(p[i])!==-1&&a++;o.addEventListener("transitionend",function(l){l.target===o&&--a,a===0&&t()})}function Aa(){Te=!1}const Ea={pre:Aa,create:br,update:br,destroy:$a,remove:Oa};function ie(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return Z.create({start:function(a){n?i=function(c){_n(c,n),a.next(c)}:i=function(c){a.next(c)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function gn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!gn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function _n(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Pa(t))t(e)&&e.preventDefault();else if(typeof t=="object")gn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Pa(e){return typeof e=="function"}var Na=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=q(A.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(A.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ie(document,t,r.useCapture,r.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},e}(),Ca=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=q(A.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(A.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=ie(document.body,t,r.useCapture,r.preventDefault);var i=q(o);return i._isCycleSource=this._name,i},e}();function Ia(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function xa(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function Ta(e){return e.nodeType===11}function ka(e){if(typeof e!="string"&&!Ia(e))throw new Error("Given container is not a DOM element neither a selector string.")}function Da(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function bn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function We(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var wn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!We(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function Ma(e){return Array.prototype.slice.call(e)}var Sn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=bn(t),n=new wn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:Ma(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),Dt=globalThis&&globalThis.__assign||function(){return Dt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Dt.apply(this,arguments)};function Fa(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=$n(r),i=Dt({},n,{data:Dt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return Dt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function $n(e){return{type:xa(e)?"sibling":"total",scope:e}}var ja=function(){function e(t,r,n,o,i,s){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=s,this.isolateSource=function(a,u){return new e(a._rootElement$,a._sanitation$,a._namespace.concat($n(u)),a._isolateModule,a._eventDelegator,a._name)},this.isolateSink=Fa(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Sn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=q(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=q(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Na(this._name);if(t==="body")return new Ca(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=q(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),At={},La=J&&J.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(At,"__esModule",{value:!0});At.SampleCombineOperator=At.SampleCombineListener=void 0;var Ra=V,nt={},On=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==nt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();At.SampleCombineListener=On;var An=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=nt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=nt,r[i]._add(new On(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=nt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==nt&&(this.Nn>0||r._n(La([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==nt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==nt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===nt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();At.SampleCombineOperator=An;var En;En=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Ra.Stream(new An(o,t))}};var Ba=At.default=En;globalThis&&globalThis.__assign;function Pn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,s=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,a=o<i?t.slice(o+1,i):void 0,u=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:s,id:a,className:u}}function Ua(e){var t=Pn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var s=Object.keys(o).filter(function(a){return o[a]});r+=" "+s.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var xt;typeof self!="undefined"?xt=self:typeof window!="undefined"?xt=window:typeof global!="undefined"?xt=global:xt=Function("return this")();var wr=xt.Symbol;typeof wr=="function"&&wr("parent");var Wa=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(Ta(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Pn(t),n=r.tagName,o=r.id,i=Ua(t),s=t.data||{},a=s.props||{},u=a.id,c=u===void 0?o:u,p=typeof c=="string"&&c.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return p?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return X("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,s=o?"#"+o:"",a=i?"."+i.split(" ").join("."):"",u=rt(""+n.toLowerCase()+s+a,{},t);return u.data=u.data||{},u.data.isolate=u.data.isolate||[],u},e}(),Ga=[Ea,ga,ba,va,_a],Nn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];u||(u=[void 0,{}],o[1][a]=u),o=u}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,s=0;s<i;s++){var a=this.mapper(t[s]),u=o[1][a];if(!u)if(r)u=[void 0,{}],o[1][a]=u;else return;o=u}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),za=function(){function e(){this.namespaceTree=new Nn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,s=i===void 0?{}:i,a=s.isolate;Array.isArray(a)&&t.insertElement(a,o)},update:function(r,n){var o=r.elm,i=r.data,s=i===void 0?{}:i,a=n.elm,u=n.data,c=u===void 0?{}:u,p=s.isolate,l=c.isolate;We(p,l)||Array.isArray(p)&&t.removeElement(o),Array.isArray(l)&&t.insertElement(l,a)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Va=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),se=globalThis&&globalThis.__assign||function(){return se=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},se.apply(this,arguments)},qa=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Ha=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Nn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,s){return n.setupDOMListener(s,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=A.never(),s,a=new wn(r,this.isolateModule),u=o===void 0?qa.indexOf(t)===-1:o;if(u)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),s=this.insertListener(i,a,t,n),i;var c=[];this.nonBubblingListenersToAdd.forEach(function(S){return c.push(S)});for(var p=void 0,l=0,y=c.length,d=function(S){S[0];var E=S[1],P=S[2];return S[3],t===E&&We(P.namespace,r)};!p&&l<y;){var f=c[l];p=d(f)?f:p,l++}var h=p,m;if(h){var $=h[0];m=$}else{var v=new Sn(r,this.isolateModule);s=this.insertListener(i,a,t,n),h=[i,t,v,s],m=i,this.nonBubblingListenersToAdd.add(h),this.setupNonBubblingListener(h)}var _=this,g=null;return A.create({start:function(S){g=m.subscribe(S)},stop:function(){h[0];var S=h[1],E=h[2];h[3];var P=E.call();P.forEach(function(O){var N=O.subs;N&&N[S]&&(N[S].unsubscribe(),delete N[S])}),_.nonBubblingListenersToAdd.delete(h),g.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(s,a){if(s.has(t)){n.push([a,t]);var u=t.subs;u&&Object.keys(u).forEach(function(c){u[c].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],s=r._namespace,a=s.length;do i.push(this.getVirtualListeners(n,s,!0,a)),a--;while(a>=0&&s[a].type!=="total");for(var u=se({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),c=0;c<i.length;c++)i[c].add(u,s.length);return u},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var s=i-1;s>=0;s--){if(r[s].type==="total"){i=s+1;break}i=s}var a=this.virtualListeners.getDefault(r,function(){return new Map},i);return a.has(t)||a.set(t,new Va),a.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=ie(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var s=this;i.forEach(function(a){var u,c=a.subs;if(!c||!c[r]){var p=ie(a,r,!1,!1,o.passive).subscribe({next:function(y){return s.onEvent(r,y,!!o.passive,!1)},error:function(){},complete:function(){}});s.nonBubblingListeners.has(r)||s.nonBubblingListeners.set(r,new Map);var l=s.nonBubblingListeners.get(r);if(!l)return;l.set(a,{sub:p,destination:o}),a.subs=se({},c,(u={},u[r]=p,u))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],s=i.sub,a=i.passive;s.unsubscribe(),this.setupDOMListener(o,a),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var s=i.get(r);s&&s.destination.passive===o&&s.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=s.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),s=this.isolateModule.getRootElement(r.target);if(o){var a=this.isolateModule.getNamespace(r.target);if(!a)return;var u=this.getVirtualListeners(t,a);this.bubble(t,r.target,s,i,u,a,a.length-1,!0,n),this.bubble(t,r.target,s,i,u,a,a.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,s,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,s,a,u,c){!u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c);var p=n,l=a;if(r===n)if(a>=0&&s[a].type==="sibling")p=this.isolateModule.getElement(s,a),l--;else return;r.parentNode&&p&&this.bubble(t,r.parentNode,p,o,i,s,l,u,c),u&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,u,c)},e.prototype.doBubbleStep=function(t,r,n,o,i,s,a){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(u){if(u.passive===a&&u.useCapture===s){var c=bn(u.scopeChecker.namespace);!o.propagationHasBeenStopped&&u.scopeChecker.isDirectlyInScope(r)&&(c!==""&&r.matches(c)||c===""&&r===n)&&(_n(o,u.preventDefault),u.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Ja(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function Ka(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ya(e){return A.merge(e,A.never())}function Xa(e){return e.elm}function Za(e){(console.error||console.log)(e)}function Qa(){return A.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function tu(e){return e.data=e.data||{},e.data.isolate=[],e}function eu(e,t){t===void 0&&(t={}),ka(e);var r=t.modules||Ga;Ja(r);var n=new za,o=t&&t.snabbdomOptions||void 0,i=la([n.createModule()].concat(r),void 0,o),s=Qa(),a,u,c=A.create({start:function(l){u=new MutationObserver(function(){return l.next(null)})},stop:function(){u.disconnect()}});function p(l,y){y===void 0&&(y="DOM"),Ka(l);var d=A.create(),f=s.map(function(){var _=Da(e)||document.body;return a=new Wa(_),_}),h=l.remember();h.addListener({}),c.addListener({});var m=f.map(function(_){return A.merge(h.endWhen(d),d).map(function(g){return a.call(g)}).startWith(tu(xe(_))).fold(i,xe(_)).drop(1).map(Xa).startWith(_).map(function(g){return u.observe(g,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),g}).compose(Ya)}).flatten(),v=pn(s,c).endWhen(d).compose(Ba(m)).map(function(_){return _[1]}).remember();v.addListener({error:t.reportSnabbdomError||Za});var $=new Ha(v,n);return new ja(v,d,[],n,$,y)}return p}function ru(e){return typeof e=="string"&&e.length>0}function nu(e){return ru(e)&&(e[0]==="."||e[0]==="#")}function Cn(e){return function(r,n,o){var i=typeof r!="undefined",s=typeof n!="undefined",a=typeof o!="undefined";return nu(r)?s&&a?rt(e+r,n,o):s?rt(e+r,n):rt(e+r,{}):a?rt(e+r,n,o):s?rt(e,r,n):i?rt(e,r):rt(e,{})}}var ou=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iu=Cn("svg");ou.forEach(function(e){iu[e]=Cn(e)});var su=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];su.forEach(function(e){});function au(e,t,r={}){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:s="DOM",container:a="div",containerClass:u}=r;return c=>{const p=Date.now(),l={item:e,itemKey:(d,f)=>typeof d.id!="undefined"?d.id:f,itemScope:d=>d,channel:i,collectSinks:d=>Object.entries(c).reduce((f,[h,m])=>{if(n.includes(h)){const v=d.pickCombine(h);h===s&&a?f[s]=v.map($=>({sel:a,data:u?{props:{className:u}}:{},children:$,key:p,text:void 0,elm:void 0})):f[h]=v}else f[h]=d.pickMerge(h);return f},{})},y={[i]:t};return o.forEach(d=>y[d]=null),n.forEach(d=>y[d]=null),uu(l,y,c)}}function uu(e,t,r){return st(Ns(e),t)(r)}var H=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},le={},W={},In={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(In);var cu=In,Sr=Object.prototype.toString,xn=function(t){var r=Sr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Sr.call(t.callee)==="[object Function]"),n},we,$r;function fu(){if($r)return we;$r=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=xn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(y){var d=y.constructor;return d&&d.prototype===y},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window=="undefined")return!1;for(var y in window)try{if(!c["$"+y]&&t.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{u(window[y])}catch{return!0}}catch{return!0}return!1}(),l=function(y){if(typeof window=="undefined"||!p)return u(y);try{return u(y)}catch{return!1}};e=function(d){var f=d!==null&&typeof d=="object",h=r.call(d)==="[object Function]",m=n(d),v=f&&r.call(d)==="[object String]",$=[];if(!f&&!h&&!m)throw new TypeError("Object.keys called on a non-object");var _=s&&h;if(v&&d.length>0&&!t.call(d,0))for(var g=0;g<d.length;++g)$.push(String(g));if(m&&d.length>0)for(var S=0;S<d.length;++S)$.push(String(S));else for(var E in d)!(_&&E==="prototype")&&t.call(d,E)&&$.push(String(E));if(i)for(var P=l(d),O=0;O<a.length;++O)!(P&&a[O]==="constructor")&&t.call(d,a[O])&&$.push(a[O]);return $}}return we=e,we}var lu=Array.prototype.slice,pu=xn,Or=Object.keys,Kt=Or?function(t){return Or(t)}:fu(),Ar=Object.keys;Kt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return pu(n)?Ar(lu.call(n)):Ar(n)})}else Object.keys=Kt;return Object.keys||Kt};var hu=Kt,du=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Er=typeof Symbol!="undefined"&&Symbol,yu=du,mu=function(){return typeof Er!="function"||typeof Symbol!="function"||typeof Er("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:yu()},Pr={foo:{}},vu=Object,gu=function(){return{__proto__:Pr}.foo===Pr.foo&&!({__proto__:null}instanceof vu)},_u="Function.prototype.bind called on incompatible ",Se=Array.prototype.slice,bu=Object.prototype.toString,wu="[object Function]",Su=function(t){var r=this;if(typeof r!="function"||bu.call(r)!==wu)throw new TypeError(_u+r);for(var n=Se.call(arguments,1),o,i=function(){if(this instanceof o){var p=r.apply(this,n.concat(Se.call(arguments)));return Object(p)===p?p:this}else return r.apply(t,n.concat(Se.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],u=0;u<s;u++)a.push("$"+u);if(o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,o.prototype=new c,c.prototype=null}return o},$u=Su,Tn=Function.prototype.bind||$u,Ou=Tn,Au=Ou.call(Function.call,Object.prototype.hasOwnProperty),I,Et=SyntaxError,kn=Function,$t=TypeError,$e=function(e){try{return kn('"use strict"; return ('+e+").constructor;")()}catch{}},ht=Object.getOwnPropertyDescriptor;if(ht)try{ht({},"")}catch{ht=null}var Oe=function(){throw new $t},Eu=ht?function(){try{return arguments.callee,Oe}catch{try{return ht(arguments,"callee").get}catch{return Oe}}}():Oe,gt=mu(),Pu=gu(),j=Object.getPrototypeOf||(Pu?function(e){return e.__proto__}:null),wt={},Nu=typeof Uint8Array=="undefined"||!j?I:j(Uint8Array),dt={"%AggregateError%":typeof AggregateError=="undefined"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?I:ArrayBuffer,"%ArrayIteratorPrototype%":gt&&j?j([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":wt,"%AsyncGenerator%":wt,"%AsyncGeneratorFunction%":wt,"%AsyncIteratorPrototype%":wt,"%Atomics%":typeof Atomics=="undefined"?I:Atomics,"%BigInt%":typeof BigInt=="undefined"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?I:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?I:FinalizationRegistry,"%Function%":kn,"%GeneratorFunction%":wt,"%Int8Array%":typeof Int8Array=="undefined"?I:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?I:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":gt&&j?j(j([][Symbol.iterator]())):I,"%JSON%":typeof JSON=="object"?JSON:I,"%Map%":typeof Map=="undefined"?I:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!gt||!j?I:j(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?I:Promise,"%Proxy%":typeof Proxy=="undefined"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?I:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!gt||!j?I:j(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":gt&&j?j(""[Symbol.iterator]()):I,"%Symbol%":gt?Symbol:I,"%SyntaxError%":Et,"%ThrowTypeError%":Eu,"%TypedArray%":Nu,"%TypeError%":$t,"%Uint8Array%":typeof Uint8Array=="undefined"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?I:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?I:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?I:WeakSet};if(j)try{null.error}catch(e){var Cu=j(j(e));dt["%Error.prototype%"]=Cu}var Iu=function e(t){var r;if(t==="%AsyncFunction%")r=$e("async function () {}");else if(t==="%GeneratorFunction%")r=$e("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=$e("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&j&&(r=j(o.prototype))}return dt[t]=r,r},Nr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ft=Tn,ae=Au,xu=Ft.call(Function.call,Array.prototype.concat),Tu=Ft.call(Function.apply,Array.prototype.splice),Cr=Ft.call(Function.call,String.prototype.replace),ue=Ft.call(Function.call,String.prototype.slice),ku=Ft.call(Function.call,RegExp.prototype.exec),Du=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Mu=/\\(\\)?/g,Fu=function(t){var r=ue(t,0,1),n=ue(t,-1);if(r==="%"&&n!=="%")throw new Et("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Et("invalid intrinsic syntax, expected opening `%`");var o=[];return Cr(t,Du,function(i,s,a,u){o[o.length]=a?Cr(u,Mu,"$1"):s||i}),o},ju=function(t,r){var n=t,o;if(ae(Nr,n)&&(o=Nr[n],n="%"+o[0]+"%"),ae(dt,n)){var i=dt[n];if(i===wt&&(i=Iu(n)),typeof i=="undefined"&&!r)throw new $t("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new Et("intrinsic "+t+" does not exist!")},Lu=function(t,r){if(typeof t!="string"||t.length===0)throw new $t("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new $t('"allowMissing" argument must be a boolean');if(ku(/^%?[^%]*%?$/,t)===null)throw new Et("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Fu(t),o=n.length>0?n[0]:"",i=ju("%"+o+"%",r),s=i.name,a=i.value,u=!1,c=i.alias;c&&(o=c[0],Tu(n,xu([0,1],c)));for(var p=1,l=!0;p<n.length;p+=1){var y=n[p],d=ue(y,0,1),f=ue(y,-1);if((d==='"'||d==="'"||d==="`"||f==='"'||f==="'"||f==="`")&&d!==f)throw new Et("property names with quotes must have matching quotes");if((y==="constructor"||!l)&&(u=!0),o+="."+y,s="%"+o+"%",ae(dt,s))a=dt[s];else if(a!=null){if(!(y in a)){if(!r)throw new $t("base intrinsic for "+t+" exists, but the property is not available.");return}if(ht&&p+1>=n.length){var h=ht(a,y);l=!!h,l&&"get"in h&&!("originalValue"in h.get)?a=h.get:a=a[y]}else l=ae(a,y),a=a[y];l&&!u&&(dt[s]=a)}}return a},Ru=Lu,ke=Ru("%Object.defineProperty%",!0),De=function(){if(ke)try{return ke({},"a",{value:1}),!0}catch{return!1}return!1};De.hasArrayLengthDefineBug=function(){if(!De())return null;try{return ke([],"length",{value:1}).length!==1}catch{return!0}};var Bu=De,Uu=hu,Wu=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Gu=Object.prototype.toString,zu=Array.prototype.concat,Dn=Object.defineProperty,Vu=function(e){return typeof e=="function"&&Gu.call(e)==="[object Function]"},qu=Bu(),Mn=Dn&&qu,Hu=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Vu(n)||!n())return}Mn?Dn(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},Fn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Uu(t);Wu&&(n=zu.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Hu(e,n[o],t[n[o]],r[n[o]])};Fn.supportsDescriptors=!!Mn;var jn=Fn,Ln=H,Ju=Ln,Rn=function(){return typeof H!="object"||!H||H.Math!==Math||H.Array!==Array?Ju:H},Ku=jn,Yu=Rn,Xu=function(){var t=Yu();if(Ku.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Zu=jn,Qu=Ln,Bn=Rn,tc=Xu,ec=Bn(),Un=function(){return ec};Zu(Un,{getPolyfill:Bn,implementation:Qu,shim:tc});var rc=Un,nc=H&&H.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(W,"__esModule",{value:!0});W.NO_IL=W.NO=W.MemoryStream=W.Stream=void 0;var oc=cu,ic=rc,Wt=oc.default(ic.getPolyfill()),w={};W.NO=w;function U(){}function Yt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function sc(e,t){return function(n){return e(n)&&t(n)}}function Ge(e,t,r){try{return e.f(t)}catch(n){return r._e(n),w}}var ct={_n:U,_e:U,_c:U};W.NO_IL=ct;function Ir(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var ac=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),uc=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),cc=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new uc(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),fc=function(){function e(t){this.type="merge",this.insArr=t,this.out=w,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===w)return;t._c()}},e}(),lc=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==w&&r.up(t,this.i)){var o=Yt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==w&&--t.Nc===0&&t.out._c()},e}(),pc=function(){function e(t){this.type="combine",this.insArr=t,this.out=w,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===w?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=w,r[i]._add(new lc(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=w,this.ils=[],this.vals=[]},e}(),hc=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),dc=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(U,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),yc=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),mc=function(){function e(t,r){this.type="debug",this.ins=t,this.out=w,this.s=U,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this.s,o=this.l;if(n!==U)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),vc=function(){function e(t,r){this.type="drop",this.ins=r,this.out=w,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),gc=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),_c=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=w,this.o=t,this.oil=ct}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new gc(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=w,this.oil=ct},e.prototype.end=function(){var t=this.out;t!==w&&t._c()},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ae=function(){function e(t,r){this.type="filter",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Ge(this,t,r);n===w||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),bc=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=w,this.op.less()},e}(),wc=function(){function e(t){this.type="flatten",this.ins=t,this.out=w,this.open=!0,this.inner=w,this.il=ct}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=w,this.il=ct,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==w&&this.inner._remove(this.il),this.out=w,this.open=!0,this.inner=w,this.il=ct},e.prototype.less=function(){var t=this.out;t!==w&&!this.open&&this.inner===w&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=this,o=n.inner,i=n.il;o!==w&&i!==ct&&o._remove(i),(this.inner=t)._add(this.il=new bc(r,this))}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),Sc=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=w,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Ge(this,t,r);n!==w&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),$c=function(){function e(t){this.type="last",this.ins=t,this.out=w,this.has=!1,this.val=w}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w,this.val=w},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),Oc=function(){function e(t,r){this.type="map",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=Ge(this,t,r);n!==w&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Ac=function(){function e(t){this.type="remember",this.ins=t,this.out=w}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),Ec=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=w,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;r!==w&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==w)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),Pc=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=w,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=w},e}(),Nc=function(){function e(t,r){this.type="take",this.ins=r,this.out=w,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=w},e.prototype._n=function(t){var r=this.out;if(r!==w){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==w&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==w&&t._c()},e}(),ze=function(){function e(t){this._prod=t||w,this._ils=[],this._stopID=w,this._dl=w,this._d=!1,this._target=null,this._err=w}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=Yt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===w){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=Yt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=Yt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==w&&this._prod._stop(),this._err=w,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=w,this._stopID=w},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==w)clearTimeout(this._stopID),this._stopID=w;else{var o=this._prod;o!==w&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==w&&o.length<=0?(this._err=w,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==w)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof ot?ot:e},e.prototype.addListener=function(t){t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new ac(this,t)},e.prototype[Wt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Ir(t)}return new e(t)},e.createWithMemory=function(t){return t&&Ir(t),new ot(t)},e.never=function(){return new e({_start:U,_stop:U})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:U})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:U})},e.from=function(t){if(typeof t[Wt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new hc(t))},e.fromPromise=function(t){return new e(new dc(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[Wt]=="function"?t[Wt]():t;return new e(new cc(r))},e.periodic=function(t){return new e(new yc(t))},e.prototype._map=function(t){return new(this.ctor())(new Oc(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ae?new e(new Ae(sc(r.f,t),r.ins)):new e(new Ae(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Nc(t,this))},e.prototype.drop=function(t){return new e(new vc(t,this))},e.prototype.last=function(){return new e(new $c(this))},e.prototype.startWith=function(t){return new ot(new Pc(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new _c(t,this))},e.prototype.fold=function(t,r){return new ot(new Sc(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new Ec(t,this))},e.prototype.flatten=function(){return new e(new wc(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new ot(new Ac(this))},e.prototype.debug=function(t){return new(this.ctor())(new mc(this,t))},e.prototype.imitate=function(t){if(t instanceof ot)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||U,t._e=t.error||U,t._c=t.complete||U,this._dl=t):(this._d=!1,this._dl=w)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new fc(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new pc(r))},e}();W.Stream=ze;var ot=function(e){nc(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==w)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=w;else if(this._has)r._n(this._v);else{var i=this._prod;i!==w&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(ze);W.MemoryStream=ot;var Cc=ze;W.default=Cc;Object.defineProperty(le,"__esModule",{value:!0});le.DropRepeatsOperator=void 0;var Ic=W,Ee={},Wn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=Ee,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=Ee},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==Ee&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();le.DropRepeatsOperator=Wn;function xc(e){return e===void 0&&(e=void 0),function(r){return new Ic.Stream(new Wn(r,e))}}var K=le.default=xc;function Tc(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,s=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(s==="string"||s==="function"||t instanceof Z))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof Z){const a=t.compose(K()).startWith(r).remember();return u=>xr(e,u,a,o)}else{const a=s==="function"&&t||(u=>u[t]);return u=>{const c=u&&(typeof i=="string"&&u[i]||u.STATE||u.state).stream;if(!c instanceof Z)throw new Error(`Could not find the state source: ${i}`);const p=c.map(a).filter(l=>typeof l=="string").compose(K()).startWith(r).remember();return xr(e,u,p,o,i)}}}function xr(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([a,u])=>{if(t[o]){const c=t[o].stream,p=A.combine(r,c).filter(([y,d])=>y==a).map(([y,d])=>d).remember(),l=new t[o].constructor(p,t[o]._name);return[a,u(L(D({},t),{state:l}))]}return[a,u(t)]});return Object.keys(t).reduce((a,u)=>{if(n.includes(u))a[u]=r.map(c=>{const p=i.find(([l,y])=>l===c);return p&&p[1][u]||A.never()}).flatten().remember().startWith(void 0);else{const c=i.filter(([p,l])=>l[u]!==void 0).map(([p,l])=>l[u]);a[u]=A.merge(...c)}return a},{})}var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var kc=W,Dc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function Mc(e){return function(r){return new kc.Stream(new Dc(e,r))}}var Xt=Gn.default=Mc,zn={};Object.defineProperty(zn,"__esModule",{value:!0});var Fc=W,jc=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Lc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Fc.Stream(new jc(e))}var Pe=zn.default=Lc,Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});var Tt=W,Rc=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=Tt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=Tt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=Tt.NO&&t._n(this.t),this.t=Tt.NO,t._c())},e}();function Bc(e){return function(r){return new Tt.Stream(new Rc(e,r))}}var Gt=Vn.default=Bc;const Tr=typeof window!="undefined"&&window||process&&process.env||{},kr="BOOTSTRAP",_t="INITIALIZE",Uc="HYDRATE",Ct="PARENT",Wc="CHILD";let Gc=0;const ce="~#~#~ABORT~#~#~";function Zt(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&!x(r))throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const s=typeof r=="undefined";let a;if(x(i)){const u=c=>{const p=L(D({},e),{sources:c});return new Ne(p).sinks};a=s?st(u,i):st(u,i)(r)}else a=s?u=>new Ne(L(D({},e),{sources:u})).sinks:new Ne(e).sinks;return a.componentName=t,a.isSygnalComponent=!0,a}class Ne{constructor({name:t="NO NAME",sources:r,intent:n,model:o,context:i,response:s,view:a,peers:u={},components:c={},initialState:p,calculated:l,storeCalculatedInState:y=!0,DOMSourceName:d="DOM",stateSourceName:f="STATE",requestSourceName:h="HTTP",debug:m=!1}){if(!r||!x(r))throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.model=o,this.context=i,this.response=s,this.view=a,this.peers=u,this.components=c,this.initialState=p,this.calculated=l,this.storeCalculatedInState=y,this.DOMSourceName=d,this.stateSourceName=f,this.requestSourceName=h,this.sourceNames=Object.keys(r),this._debug=m,this.isSubComponent=this.sourceNames.includes("props$");const v=r[f]&&r[f].stream;v&&(this.currentState=p||{},this.sources[f]=new It(v.map(S=>(this.currentState=S,S))));const $=r.props$;$&&(this.sources.props$=$.map(S=>(this.currentProps=S,S)));const _=r.children$;_&&(this.sources.children$=_.map(S=>(this.currentChildren=S,S))),!this.isSubComponent&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=p||!0,this.intent=S=>({__NOOP_ACTION__:A.never()}),this.model={__NOOP_ACTION__:S=>S});const g=Gc++;this.addCalculated=this.createMemoizedAddCalculated(),this.log=zc(`${g} | ${t}`),this.initChildSources$(),this.initIntent$(),this.initAction$(),this.initState(),this.initContext(),this.initModel$(),this.initPeers$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks(),this.sinks.__index=g,this.log("Instantiated",!0)}get debug(){return this._debug||Tr.SYGNAL_DEBUG==="true"||Tr.SYGNAL_DEBUG===!0}initIntent$(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof Z)&&!x(this.intent$))throw new Error("Intent must return either an action$ stream or map of event streams")}}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=A.never();return}let r;if(this.intent$ instanceof Z)r=this.intent$;else{const u=Object.entries(this.intent$).map(([c,p])=>p.map(l=>({type:c,data:l})));r=A.merge(A.never(),...u)}const n=r instanceof Z?r:r.apply&&r(this.sources)||A.never(),o=A.of({type:kr}).compose(Xt(10)),i=this.model[kr]?Pe(o,n):Pe(A.of({}).compose(Xt(1)),n);let s;t&&typeof t.select=="function"?s=t.select("initial").flatten():s=A.never();const a=s.map(u=>({type:Uc,data:u}));this.action$=A.merge(i,a).compose(this.log(({type:u})=>`<${u}> Action triggered`))}initState(){this.model!=null&&(this.model[_t]===void 0?this.model[_t]={[this.stateSourceName]:(t,r)=>D({},this.addCalculated(r))}:Object.keys(this.model[_t]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${_t} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[_t][t])}))}initContext(){var n;if(!this.context&&!this.sources.__parentContext$){this.context$=A.of({});return}const t=((n=this.sources[this.stateSourceName])==null?void 0:n.stream.startWith({}).compose(K(Y)))||A.never(),r=this.sources.__parentContext$.startWith({}).compose(K(Y))||A.of({});this.context&&!x(this.context)&&console.error(`[${this.name}] Context must be an object mapping names to values of functions: ignoring provided ${typeof this.context}`),this.context$=A.combine(t,r).map(([o,i])=>{const s=x(i)?i:{},a=x(this.context)?this.context:{},u=this.currentState,c=Object.entries(a).reduce((l,y)=>{const[d,f]=y;let h;const m=typeof f;if(m==="string")h=u[f];else if(m==="boolean")h=u[d];else if(m==="function")h=f(u);else return console.error(`[${this.name}] Invalid context entry '${d}': must be the name of a state property or a function returning a value to use`),l;return l[d]=h,l},{}),p=D(D({},s),c);return this.currentContext=p,p}).compose(K(Y)).startWith({}),this.context$.subscribe({next:o=>o})}initModel$(){if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce((u,c)=>(u[c]=A.never(),u),{});return}const t={type:_t,data:this.initialState};this.isSubComponent&&this.initialState&&console.warn(`[${this.name}] Initial state provided to sub-component. This will overwrite any state provided by the parent component.`);const r=this.initialState?Pe(A.of(t),this.action$).compose(Xt(0)):this.action$,n=()=>this.makeOnAction(r,!0,this.action$),o=()=>this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),s={};i.forEach(u=>{let[c,p]=u;if(typeof p=="function"&&(p={[this.stateSourceName]:p}),!x(p))throw new Error(`Entry for each action must be an object: ${this.name} ${c}`);Object.entries(p).forEach(y=>{const[d,f]=y,h=d===this.stateSourceName,m=d===Ct,v=h?n():o(),_=(m?v(c,f).map(g=>({name:this.name,value:g})):v(c,f)).compose(this.log(g=>{if(h)return`<${c}> State reducer added`;if(m)return`<${c}> Data sent to parent component: ${JSON.stringify(g.value).replaceAll('"',"")}`;{const S=g&&(g.type||g.command||g.name||g.key||Array.isArray(g)&&"Array"||g);return`<${c}> Data sent to [${d}]: ${JSON.stringify(S).replaceAll('"',"")}`}}));Array.isArray(s[d])?s[d].push(_):s[d]=[_]})});const a=Object.entries(s).reduce((u,c)=>{const[p,l]=c;return u[p]=A.merge(A.never(),...l),u},{});this.model$=a}initPeers$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.peers$=Object.entries(this.peers).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(s=>{s==this.DOMSourceName?r[s][n]=i[s]:r[s].push(i[s])}),r},t)}initChildSources$(){let t;const r=A.create({start:n=>{t=n.next.bind(n)},stop:n=>{}}).map(n=>A.merge(...n)).flatten();this.sources[Wc]={select:n=>{const o=r;return(n?o.filter(a=>a.name===n):o).map(a=>a.value)}},this.newChildSources=n=>{typeof t=="function"&&t(n)}}initSubComponentSink$(){const t=A.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=A.create({start:r=>{this.triggerSubComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=A.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(this.view).compose(this.log("View rendered")).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$&&r!==Ct?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():A.never();return r===this.stateSourceName?t[r]=A.merge(this.model$[r]||A.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.peers$[r]||[]):t[r]=A.merge(this.model$[r]||A.never(),n,...this.peers$[r]||[]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[Ct]=this.model$[Ct]||A.never()}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const s=t.filter(({type:u})=>u==o);let a;if(typeof i=="function")a=s.map(u=>{const c=(y,d,f=10)=>{if(typeof f!="number")throw new Error(`[${this.name} ] Invalid delay value provided to next() function in model action '${o}'. Must be a number in ms.`);setTimeout(()=>{n.shamefullySendNext({type:y,data:d})},f),this.log(`<${o}> Triggered a next() action: <${y}> ${f}ms delay`,!0)},p={props:this.currentProps,children:this.currentChildren,context:this.currentContext};let l=u.data;if(r)return y=>{const d=this.isSubComponent?this.currentState:y,f=this.addCalculated(d),h=i(f,l,c,p);return h==ce?d:this.cleanupCalculated(h)};{const y=this.addCalculated(this.currentState),d=i(y,l,c,p),f=typeof d;if(x(d)||["string","number","boolean","function"].includes(f))return d;if(f=="undefined")return console.warn(`'undefined' value sent to ${o}`),d;throw new Error(`Invalid reducer type for ${o} ${f}`)}}).filter(u=>u!=ce);else if(i===void 0||i===!0)a=s.map(({data:u})=>u);else{const u=i;a=s.mapTo(u)}return a}}createMemoizedAddCalculated(){let t,r;return function(n){if(!this.calculated||!x(n)||Array.isArray(n))return n;if(n===t)return r;if(!x(this.calculated))throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const o=this.getCalculatedValues(n);if(!o)return t=n,r=n,n;const i=D(D({},n),o);return t=n,r=i,i}}getCalculatedValues(t){const r=Object.entries(this.calculated||{});if(r.length!==0)return r.reduce((n,[o,i])=>{if(typeof i!="function")throw new Error(`Missing or invalid calculator function for calculated field '${o}`);try{n[o]=i(t)}catch(s){console.warn(`Calculated field '${o}' threw an error during calculation: ${s.message}`)}return n},{})}cleanupCalculated(t){if(!t||!x(t)||Array.isArray(t))return t;const r=this.storeCalculatedInState?this.addCalculated(t):t,n=D({},r);return!this.calculated||this.storeCalculatedInState||Object.keys(this.calculated).forEach(i=>{this.initialState&&typeof this.initialState[i]!="undefined"?n[i]=this.initialState[i]:delete n[i]}),n}collectRenderParameters(){const t=this.sources[this.stateSourceName],r=D({},this.peers$[this.DOMSourceName]),n=t&&t.isolateSource(t,{get:u=>this.addCalculated(u)}),o=n&&n.stream||A.never();r.state=o.compose(K(Y)),this.sources.props$&&(r.props=this.sources.props$.compose(K(Vc))),this.sources.children$&&(r.children=this.sources.children$.compose(K(Y))),this.context$&&(r.context=this.context$.compose(K(Y)));const i=[],s=[];return Object.entries(r).forEach(([u,c])=>{i.push(u),s.push(c)}),A.combine(...s).compose(Gt(1)).map(u=>i.reduce((p,l,y)=>(p[l]=u[y],l==="state"&&(p[this.stateSourceName]=u[y],p.calculated=u[y]&&this.getCalculatedValues(u[y])||{}),p),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=qn(n,o),s=Object.entries(i),a={"::ROOT::":n};if(s.length===0)return a;const u={},c=[];let p=0;const l=s.reduce((d,[f,h])=>{const m=h.data,v=m.props||{},$=h.children||[],_=m.isCollection||!1,g=m.isSwitchable||!1,S=T=>{Object.entries(T).forEach(([k,M])=>{u[k]||(u[k]=[]),k===Ct?c.push(M):k!==this.DOMSourceName&&u[k].push(M)})};if(r[f]){const T=r[f];return d[f]=T,T.props$.shamefullySendNext(v),T.children$.shamefullySendNext($),S(T.sink$),d}const E=A.create().startWith(v),P=A.create().startWith($);let O;_?O=this.instantiateCollection.bind(this):g?O=this.instantiateSwitchable.bind(this):O=this.instantiateCustomComponent.bind(this),p++;const N=O(h,E,P);return N[this.DOMSourceName]=N[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(N[this.DOMSourceName]):A.never(),d[f]={sink$:N,props$:E,children$:P},S(N),d},a),y=Object.entries(u).reduce((d,[f,h])=>(h.length===0||(d[f]=h.length===1?h[0]:A.merge(...h)),d),{});return this.newSubComponentSinks(y),this.newChildSources(c),p>0&&this.log(`New sub components instantiated: ${p}`,!0),l},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember();return this.sources[this.stateSourceName].stream.compose(K(Y)).map(o=>r).flatten().debug(o=>this.triggerSubComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};let s=typeof i.filter=="function"?i.filter:void 0,a=Mr(i.sort);const u={filter:s,sort:a},c=A.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r.startWith(i)).compose(Gt(1)).map(([_,g])=>(g.filter!==u.filter&&(u.filter=typeof g.filter=="function"?g.filter:void 0),g.sort!==u.sort&&(u.sort=Mr(g.sort)),x(_)?this.addCalculated(_):_)),p=new It(c),l=i.from,y=i.of,d=i.idfield||"id";let f,h;if(typeof y=="function")if(y.isSygnalComponent)h=y;else{const _=y.componentName||y.label||y.name||"FUNCTION_COMPONENT",g=y,{model:S,intent:E,context:P,peers:O,components:N,initialState:T,calculated:k,storeCalculatedInState:M,DOMSourceName:G,stateSourceName:tt,debug:yt}=y;h=Zt({name:_,view:g,model:S,intent:E,context:P,peers:O,components:N,initialState:T,calculated:k,storeCalculatedInState:M,DOMSourceName:G,stateSourceName:tt,debug:yt})}else if(this.components[y])h=this.components[y];else throw new Error(`[${this.name}] Invalid 'of' propery in collection: ${y}`);const m={get:_=>{if(!Array.isArray(_[l]))return[];const g=_[l],S=typeof u.filter=="function"?g.filter(u.filter):g;return(u.sort,S.sort(u.sort)).map((O,N)=>x(O)?L(D({},O),{[d]:O[d]||N}):{value:O,[d]:N})},set:(_,g)=>{if(this.calculated&&l in this.calculated)return console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${l}': Update ignored`),_;const S=[];for(const E of _[l].map((P,O)=>x(P)?L(D({},P),{[d]:P[d]||O}):{__primitive:!0,value:P,[d]:O}))if(typeof u.filter=="function"&&!u.filter(E))S.push(E.__primitive?E.value:E);else{const P=g.find(O=>O[d]===E[d]);typeof P!="undefined"&&S.push(E.__primitive?P.value:P)}return L(D({},_),{[l]:S})}};l===void 0?f={get:_=>!(_ instanceof Array)&&_.value&&_.value instanceof Array?_.value:_,set:(_,g)=>g}:typeof l=="string"?x(this.currentState)?!(this.currentState&&l in this.currentState)&&!(this.calculated&&l in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${l}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),f=void 0):(Array.isArray(this.currentState[l])||console.warn(`State property '${l}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):(Array.isArray(this.currentState[l])||console.warn(`State property '${l}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),f=m):x(l)?typeof l.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0):f={get:_=>{const g=l.get(_);return Array.isArray(g)?g:(console.warn(`State getter function in collection component of ${this.name} did not return an array: No components will be instantiated in the collection. Returned value:`,g),[])},set:l.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),f=void 0);const v=L(D({},this.sources),{[this.stateSourceName]:p,props$:r,children$:n,__parentContext$:this.context$,PARENT:null}),$=au(h,f,{container:null})(v);if(!x($))throw new Error("Invalid sinks returned from component factory of collection element");return $}instantiateSwitchable(t,r,n){const i=t.data.props||{},s=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>x(m)?this.addCalculated(m):m),a=new It(s),u=i.state;let c;const p={get:m=>m[u],set:(m,v)=>this.calculated&&u in this.calculated?(console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${u}': Update ignored`),m):!x(v)||Array.isArray(v)?L(D({},m),{[u]:v}):L(D({},m),{[u]:v})},l={get:m=>m,set:(m,v)=>v};typeof u=="undefined"?c=l:typeof u=="string"?c=p:x(u)?typeof u.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),c=l):c={get:u.get,set:u.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof u}. Attempting to use parent component state.`),c=l);const y=i.of;Object.keys(y).forEach(m=>{const v=y[m];if(!v.isSygnalComponent){const $=v.componentName||v.label||v.name||"FUNCTION_COMPONENT",_=v,{model:g,intent:S,context:E,peers:P,components:O,initialState:N,calculated:T,storeCalculatedInState:k,DOMSourceName:M,stateSourceName:G,debug:tt}=v,yt={name:$,view:_,model:g,intent:S,context:E,peers:P,components:O,initialState:N,calculated:T,storeCalculatedInState:k,DOMSourceName:M,stateSourceName:G,debug:tt};y[m]=Zt(yt)}});const f=L(D({},this.sources),{[this.stateSourceName]:a,props$:r,children$:n,__parentContext$:this.context$}),h=st(Tc(y,r.map(m=>m.current)),{[this.stateSourceName]:c})(f);if(!x(h))throw new Error("Invalid sinks returned from component factory of switchable element");return h}instantiateCustomComponent(t,r,n){const o=t.sel,s=t.data.props||{},a=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(m=>x(m)?this.addCalculated(m):m),u=new It(a),c=s.state;typeof s.sygnalFactory!="function"&&x(s.sygnalOptions)&&(s.sygnalFactory=Zt(s.sygnalOptions));const p=o==="sygnal-factory"?s.sygnalFactory:this.components[o]||s.sygnalFactory;if(!p)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let l;const y={get:m=>m[c],set:(m,v)=>this.calculated&&c in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${c}': Update ignored`),m):L(D({},m),{[c]:v})},d={get:m=>m,set:(m,v)=>v};typeof c=="undefined"?l=d:typeof c=="string"?l=y:x(c)?typeof c.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),l=d):l={get:c.get,set:c.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof c}. Attempting to use parent component state.`),l=d);const f=L(D({},this.sources),{[this.stateSourceName]:u,props$:r,children$:n,__parentContext$:this.context$}),h=st(p,{[this.stateSourceName]:l})(f);if(!x(h)){const m=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",m)}return h}renderVdom(t){return A.combine(this.subComponentsRendered$,t).compose(Gt(1)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],s=Object.entries(n).filter(([c])=>c!=="::ROOT::");if(s.length===0)return A.of(i);const a=[],u=s.map(([c,p])=>(a.push(c),p.sink$[this.DOMSourceName].startWith(void 0)));return u.length===0?A.of(i):A.combine(...u).compose(Gt(1)).map(c=>{const p=c.reduce((d,f,h)=>(d[a[h]]=f,d),{}),l=Kn(i);return Hn(l,p,o)})}).flatten().filter(r=>!!r).remember()}}function zc(e){return function(t,r=!1){const n=typeof t=="function"?t:o=>t;if(r){this.debug&&console.log(`[${e}] ${n(t)}`);return}else return o=>o.debug(i=>{this.debug&&console.log(`[${e}] ${n(i)}`)})}}function qn(e,t,r=0,n=0,o){var d,f,h,m,v,$;if(!e)return{};if((d=e.data)!=null&&d.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const i=e.sel,s=i&&i.toLowerCase()==="collection",a=i&&i.toLowerCase()==="switchable",u=i&&["collection","switchable","sygnal-factory",...t].includes(i)||typeof((h=(f=e.data)==null?void 0:f.props)==null?void 0:h.sygnalFactory)=="function"||x((v=(m=e.data)==null?void 0:m.props)==null?void 0:v.sygnalOptions),c=e.data&&e.data.props||{};e.data&&e.data.attrs;const p=e.children||[];let l={},y=o;if(u){if(y=Jn(e,r,n,o),s){if(!c.of)throw new Error("Collection element missing required 'component' property");if(typeof c.of!="string"&&typeof c.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof c.of} requires string or component factory function`);if(typeof c.of!="function"&&!t.includes(c.of))throw new Error(`Specified component for collection not found: ${c.of}`);typeof c.from!="undefined"&&!(typeof c.from=="string"||Array.isArray(c.from)||typeof c.from.get=="function")&&console.warn(`No valid array found for collection ${typeof c.of=="string"?c.of:"function component"}: no collection components will be created`,c.from),e.data.isCollection=!0,($=e.data).props||($.props={})}else if(a){if(!c.of)throw new Error("Switchable element missing required 'of' property");if(!x(c.of))throw new Error(`Invalid 'of' property of switchable element: found ${typeof c.of} requires object mapping names to component factories`);if(!Object.values(c.of).every(S=>typeof S=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!c.current||typeof c.current!="string"&&typeof c.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof c.current}' requires string or function`);if(!Object.keys(c.of).includes(c.current))throw new Error(`Component '${c.current}' not found in switchable element`);e.data.isSwitchable=!0}typeof c.key=="undefined"&&(e.data.props.key=y),l[y]=e}return p.length>0&&p.map((_,g)=>qn(_,t,r+1,n+g,y)).forEach(_=>{Object.entries(_).forEach(([g,S])=>l[g]=S)}),l}function Hn(e,t,r,n=0,o=0,i){var y,d,f,h,m,v,$;if(!e)return;if((y=e.data)!=null&&y.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const s=e.sel||"NO SELECTOR",a=["collection","switchable","sygnal-factory",...r].includes(s)||typeof((f=(d=e.data)==null?void 0:d.props)==null?void 0:f.sygnalFactory)=="function"||x((m=(h=e.data)==null?void 0:h.props)==null?void 0:m.sygnalOptions),u=(v=e==null?void 0:e.data)==null?void 0:v.isCollection,c=($=e==null?void 0:e.data)==null?void 0:$.isSwitchable;e.data&&e.data.props;const p=e.children||[];let l=i;if(a){l=Jn(e,n,o,i);const _=t[l];return u?(e.sel="div",e.children=Array.isArray(_)?_:[_],e):_}else return p.length>0&&(e.children=p.map((_,g)=>Hn(_,t,r,n+1,o+g,l)).flat()),e}function Jn(e,t,r,n){var l;const o=e.sel,i=typeof o=="string"?o:"functionComponent",s=`${t}:${r}`,a=((l=e.data)==null?void 0:l.props)||{},u=a.id&&JSON.stringify(a.id).replaceAll('"',"")||s;return`${n?`${n}|`:""}${i}::${u}`}function Kn(e){return typeof e=="undefined"?e:L(D({},e),{children:Array.isArray(e.children)?e.children.map(Kn):void 0,data:e.data&&L(D({},e.data),{componentsInjected:!1})})}function Vc(e,t){return Y(qc(e))}function Y(e,t,r=5,n=0){if(n>r)return!1;if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!Y(e[s],t[s],r,n+1))return!1;return!0}const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const s of o)if(!i.includes(s)||!Y(e[s],t[s],r,n+1))return!1;return!0}function qc(e){if(!x(e))return e;const s=e,{state:t,of:r,from:n,filter:o}=s;return Ze(s,["state","of","from","filter"])}function x(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Qt(e,t,r=!0){const n=r?1:-1;switch(!0){case e>t:return 1*n;case e<t:return-1*n;default:return 0}}function Dr(e){const t=Object.entries(e);if(t.length>1){console.error("Sort objects can only have one key:",e);return}const r=t[0],[n,o]=r;if(!["string","number"].includes(typeof o)){console.error("Sort object properties must be a string or number:",e);return}let i=!0;if(typeof o=="string"){if(!["asc","dec"].includes(o.toLowerCase())){console.error("Sort object string values must be asc or dec:",e);return}i=o.toLowerCase()==="asc"}if(typeof o=="number"){if(o!==1&&o!==-1){console.error("Sort object number values must be 1 or -1:",e);return}i=o===1}return(s,a)=>Qt(s[n],a[n],i)}function Mr(e){if(!e)return;const t=typeof e;if(t==="function")return e;if(t==="string"){if(e.toLowerCase()==="asc"||e.toLowerCase()==="dec"){const n=e.toLowerCase()==="asc";return(o,i)=>Qt(o,i,n)}const r=e;return(n,o)=>Qt(n[r],o[r],!0)}else if(Array.isArray(e)){const r=e.map(n=>{if(typeof n=="function")return n;if(typeof n=="string"&&!["asc","dec"].includes(n.toLowerCase()))return(o,i)=>Qt(o[n],i[n],!0);if(x(n))return Dr(n)});return(n,o)=>r.filter(i=>typeof i=="function").reduce((i,s)=>i!==0?i:s(n,o),0)}else{if(x(e))return Dr(e);console.error("Invalid sort option (ignoring):",item);return}}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});function Yn(){var e;return typeof window!="undefined"?e=window:typeof H!="undefined"?e=H:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Hc(e){Yn().adaptStream=e}Ve.setAdapt=Hc;function Jc(e){return Yn().adaptStream(e)}var Kc=Ve.adapt=Jc;function Yc(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const s=A.create({start:a=>{i=({detail:u})=>{const c=u&&u.data||null;(n||o.includes(u.type))&&a.next(c)},t.addEventListener("data",i)},stop:a=>t.removeEventListener("data",i)});return Kc(s)}}}function Xc(e){e.addListener({next:t=>{console.log(t)}})}function Zc(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0}=r;if(!e.isSygnalComponent){const u=e.name||e.componentName||e.label||"FUNCTIONAL_COMPONENT",c=e,{model:p,intent:l,context:y,peers:d,components:f,initialState:h,calculated:m,storeCalculatedInState:v,DOMSourceName:$,stateSourceName:_,debug:g}=e;e=Zt({name:u,view:c,model:p,intent:l,context:y,peers:d,components:f,initialState:h,calculated:m,storeCalculatedInState:v,DOMSourceName:$,stateSourceName:_,debug:g})}const i=ks(e,"STATE"),s={EVENTS:Yc,DOM:eu(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:Xc},a=D(D({},s),t);return zs(i,a)}function Qc(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...Zn(r)):Array.isArray(r)?t.push(...tf(r)):typeof r=="object"&&t.push(...ef(r)),t),[]).join(" ")}function Xn(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function Zn(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!Xn(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function tf(e){return e.map(Zn).flat()}function ef(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!Xn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});var rf=W,nf=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),t._c())},e}();function of(e){return function(r){return new rf.Stream(new nf(e,r))}}Qn.default=of;var Pt={},sf=H&&H.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.SampleCombineOperator=Pt.SampleCombineListener=void 0;var af=W,it={},to=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==it&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Pt.SampleCombineListener=to;var eo=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=it,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=it,r[i]._add(new to(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=it,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==it&&(this.Nn>0||r._n(sf([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==it&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==it&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===it&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Pt.SampleCombineOperator=eo;var ro;ro=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new af.Stream(new eo(o,t))}};Pt.default=ro;var te=Object.prototype.hasOwnProperty,no=Object.prototype.toString,Fr=Object.defineProperty,jr=Object.getOwnPropertyDescriptor,Lr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):no.call(t)==="[object Array]"},Rr=function(t){if(!t||no.call(t)!=="[object Object]")return!1;var r=te.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&te.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||te.call(t,o)},Br=function(t,r){Fr&&r.name==="__proto__"?Fr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Ur=function(t,r){if(r==="__proto__")if(te.call(t,r)){if(jr)return jr(t,r).value}else return;return t[r]},oo=function e(){var t,r,n,o,i,s,a=arguments[0],u=1,c=arguments.length,p=!1;for(typeof a=="boolean"&&(p=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(t=arguments[u],t!=null)for(r in t)n=Ur(a,r),o=Ur(t,r),a!==o&&(p&&o&&(Rr(o)||(i=Lr(o)))?(i?(i=!1,s=n&&Lr(n)?n:[]):s=n&&Rr(n)?n:{},Br(a,{name:r,newValue:e(p,s,o)})):typeof o!="undefined"&&Br(a,{name:r,newValue:o}));return a};const uf=e=>e===void 0,cf=e=>typeof e=="number",ff=e=>typeof e=="string",io=e=>ff(e)||cf(e),lf=e=>Array.isArray(e),pf=e=>typeof e=="object"&&e!==null,hf=e=>typeof e=="function",df=e=>pf(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,yf={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},mf=e=>e.sel in yf,Me=(...e)=>oo(!0,...e),vf=(...e)=>oo(!1,...e),so=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];lf(i)?n=so(i,t,n):n=t(n,i)}return n},qe=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>Me(r,n),{}),gf=(e,t)=>qe(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),Wr=(e,t)=>qe(t,(r,n)=>r!==e?{[r]:n}:{}),ao=e=>io(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,He=e=>mf(e)?vf(e,{data:Wr("props",Me(e.data,{ns:"http://www.w3.org/2000/svg",attrs:Wr("className",Me(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:uf(e.children)?void 0:e.children.map(t=>He(t))}):e,at={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},_f=(e,t)=>qe(e,(r,n)=>{const o={[r]:n};if(at[r]&&t[at[r]]!==void 0)return{[at[r]]:o};if(at[r]===null)return{};const i=Object.keys(at);for(let s=0;s<i.length;s++){const a=i[s];if(a.charAt(a.length-1)==="*"&&r.indexOf(a.slice(0,-1))===0&&t[at[a]]!==void 0)return{[at[a]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:t.props!==void 0?{props:o}:o}),bf=(e,t)=>He(_f(gf(e,t),t)),wf=e=>e.length>1||!io(e[0])?void 0:e[0].toString(),Sf=e=>so(e,(t,r)=>{const n=df(r)?r:ao(r);return t.push(n),t},[]),$f={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Of=e=>(t,r,...n)=>{if(typeof t=="undefined"&&(t="UNDEFINED",console.error("JSX Error: Capitalized HTML element without corresponding factory function.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),hf(t)){if(t.name==="Fragment")return t(r||{},n);if(r||(r={}),t.isSygnalComponent){const i=t;t=t.componentName||t.label||t.name||"sygnal-factory",r.sygnalFactory=i}else{const i=t.componentName||t.label||t.name||"FUNCTION_COMPONENT",s=t,{model:a,intent:u,context:c,peers:p,components:l,initialState:y,calculated:d,storeCalculatedInState:f,DOMSourceName:h,stateSourceName:m,debug:v}=t,$={name:i,view:s,model:a,intent:u,context:c,peers:p,components:l,initialState:y,calculated:d,storeCalculatedInState:f,DOMSourceName:h,stateSourceName:m,debug:v};r.sygnalOptions=$,t=i}}const o=wf(n);return He({sel:t,data:r?bf(r,e):{},children:typeof o!="undefined"?ao(o):Sf(n),text:o,elm:void 0,key:r?r.key:void 0})},R=Of($f);let Af=0;function Ef(e){const t=new Array(16).fill().map((c,p)=>p),r=e.filter(c=>!c.deleted).map(c=>c.row*4+c.column),n=t.filter(c=>!r.includes(c));if(n.length===0)return e;const o=Math.floor(Math.random()*n.length),i=n[o],s=i%4,a=Math.floor(i/4),u=Math.ceil(Math.random()*1e3)<900?2:4;return[...e,{id:Af++,value:u,row:a,column:s,new:!0}]}function Fe(e,t){let r,n,o,i,s;t=="UP"||t=="DOWN"?(r="column",n="row"):(r="row",n="column"),t=="UP"||t=="LEFT"?(o=0,i=3,s=1):(o=3,i=0,s=-1);const a=e.filter(p=>!p.deleted),u=[];let c=!1;for(let p=0;p<=3;p++){let l=null,y=o;for(let d=o;s==1?d<=i:d>=i;d+=s){const f=a.find(h=>h[r]===p&&h[n]===d);if(f){const h=f[n];if(f[n]=y,l!==null&&!l.merged&&f.value===l.value){const v=f.value*2;f.value=v,l.value=v,f[n]-=s,f.merged=!0,c=!0}else c=c||y!==h,y+=s;const m={id:f.id,value:f.value,row:f.row,column:f.column,merged:f.merged};l=m,u.push(m)}}}if(c){const p=e.map(l=>u.find(y=>y.id===l.id)||l);return p.forEach(l=>{l.deleted=l.deleted||l.merged,delete l.merged}),p}return!1}function Pf(e){const t=e.map(o=>D({},o));let r=Fe(t,"UP"),n=Fe(t,"LEFT");return!(!r&&!n)}const uo=100;function Je({state:e}){const{id:t,value:r,row:n,column:o,deleted:i}=e,s=Qc("tile",`tile-${t}`,{new:!!e.new}),a=Math.log2(e.value||0),u=Math.floor(50*a/11+30),c={"--row":`       ${n}`,"--col":`       ${o}`,"--tile-color":`${u}%`,"--duration":`${uo}ms`,zIndex:i?10:1};return R("div",{className:s,id:`tile-${t}`,style:c},r)}Je.model={DELETE:e=>{}};Je.intent=({STATE:e,DOM:t})=>({DELETE:e.stream.filter(o=>o.deleted).compose(Xt(uo))});const Nf="ArrowUp",Cf="ArrowDown",If="ArrowLeft",xf="ArrowRight",Tf=120,co={tiles:[],over:!1,max:2,score:0,locked:!1};function pe({state:e}){const{score:t,max:r,over:n,won:o}=e;return R("div",{className:"container"},R("h1",null,"Sygnal 2048"),R("div",{className:"info"},R("div",{className:"largest"},"Largest: ",r),R("div",{className:"score"},"Score: ",t)),R("div",{className:"board-container"},R("div",{className:"slot-board"},Array(16).fill().map(i=>R("div",{className:"slot"}))),R("collection",{of:Je,from:"tiles",className:"tile-board"}),n&&o&&R("div",{className:"gameover won"},R("span",{className:"won-message"},"YOU WON!!")),n&&!o&&R("div",{className:"gameover lost"},R("span",{className:"lost-message"},"GAME OVER"))),R("div",{className:"restart-container"},R("input",{type:"button",className:"restart",value:"Start Over"})))}pe.initialState=co;pe.model={BOOTSTRAP:{LOG:(e,t,r)=>(r("RESTART"),"Starting game...")},RESTART:(e,t,r)=>(r("ADD_TILE"),r("ADD_TILE"),D({},co)),MOVE:(e,t,r)=>{if(e.locked||e.over)return ce;const n=Fe(e.tiles,t);if(!n)return ce;const o=n.filter(i=>i.deleted).reduce((i,s)=>i+s.value,0);return r("ADD_TILE",null,Tf),L(D({},e),{tiles:n,score:e.score+o,locked:!0})},ADD_TILE:(e,t)=>{const r=Ef(e.tiles),n=r.filter(u=>u&&!u.deleted),o=n.reduce((u,c)=>u>c.value?u:c.value,0),i=!e.over&&o===2048,s=!e.over&&n.length===16&&!Pf(n),a=i||s;return L(D({},e),{max:o,won:i,over:a,tiles:r,locked:!1})}};pe.intent=({DOM:e})=>{const t=e.select("document").events("keydown").map(c=>c.key),r=c=>p=>p===c,n=t.filter(r(Nf)).mapTo("UP"),o=t.filter(r(Cf)).mapTo("DOWN"),i=t.filter(r(If)).mapTo("LEFT"),s=t.filter(r(xf)).mapTo("RIGHT"),a=A.merge(n,o,i,s);return{RESTART:e.select(".restart, .gameover").events("click"),MOVE:a}};Zc(pe);
