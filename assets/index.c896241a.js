var Vn=Object.defineProperty,Yn=Object.defineProperties;var Xn=Object.getOwnPropertyDescriptors;var pr=Object.getOwnPropertySymbols;var Zn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable;var dr=(e,t,r)=>t in e?Vn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Zn.call(t,r)&&dr(e,r,t[r]);if(pr)for(var r of pr(t))Qn.call(t,r)&&dr(e,r,t[r]);return e},ue=(e,t)=>Yn(e,Xn(t));const to=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};to();var bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Se(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var yt={},Br={},st={},Wr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Wr);var eo=Wr,hr=Object.prototype.toString,qr=function(t){var r=hr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&hr.call(t.callee)==="[object Function]"),n},Ur;if(!Object.keys){var fe=Object.prototype.hasOwnProperty,vr=Object.prototype.toString,ro=qr,yr=Object.prototype.propertyIsEnumerable,no=!yr.call({toString:null},"toString"),oo=yr.call(function(){},"prototype"),le=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],De=function(e){var t=e.constructor;return t&&t.prototype===e},io={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ao=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!io["$"+e]&&fe.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{De(window[e])}catch{return!0}}catch{return!0}return!1}(),so=function(e){if(typeof window=="undefined"||!ao)return De(e);try{return De(e)}catch{return!1}};Ur=function(t){var r=t!==null&&typeof t=="object",n=vr.call(t)==="[object Function]",o=ro(t),i=r&&vr.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var f=oo&&n;if(i&&t.length>0&&!fe.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(o&&t.length>0)for(var b=0;b<t.length;++b)a.push(String(b));else for(var $ in t)!(f&&$==="prototype")&&fe.call(t,$)&&a.push(String($));if(no)for(var _=so(t),E=0;E<le.length;++E)!(_&&le[E]==="constructor")&&fe.call(t,le[E])&&a.push(le[E]);return a}}var uo=Ur,fo=Array.prototype.slice,lo=qr,mr=Object.keys,pe=mr?function(t){return mr(t)}:uo,gr=Object.keys;pe.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return lo(n)?gr(fo.call(n)):gr(n)})}else Object.keys=pe;return Object.keys||pe};var co=pe,po=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},br=typeof Symbol!="undefined"&&Symbol,ho=po,vo=function(){return typeof br!="function"||typeof Symbol!="function"||typeof br("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ho()},yo="Function.prototype.bind called on incompatible ",Te=Array.prototype.slice,mo=Object.prototype.toString,go="[object Function]",bo=function(t){var r=this;if(typeof r!="function"||mo.call(r)!==go)throw new TypeError(yo+r);for(var n=Te.call(arguments,1),o,i=function(){if(this instanceof o){var $=r.apply(this,n.concat(Te.call(arguments)));return Object($)===$?$:this}else return r.apply(t,n.concat(Te.call(arguments)))},a=Math.max(0,r.length-n.length),f=[],c=0;c<a;c++)f.push("$"+c);if(o=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var b=function(){};b.prototype=r.prototype,o.prototype=new b,b.prototype=null}return o},_o=bo,Gr=Function.prototype.bind||_o,wo=Gr,So=wo.call(Function.call,Object.prototype.hasOwnProperty),H,oe=SyntaxError,zr=Function,zt=TypeError,Ie=function(e){try{return zr('"use strict"; return ('+e+").constructor;")()}catch{}},Rt=Object.getOwnPropertyDescriptor;if(Rt)try{Rt({},"")}catch{Rt=null}var Ce=function(){throw new zt},Oo=Rt?function(){try{return arguments.callee,Ce}catch{try{return Rt(arguments,"callee").get}catch{return Ce}}}():Ce,Ut=vo(),Nt=Object.getPrototypeOf||function(e){return e.__proto__},Gt={},Ao=typeof Uint8Array=="undefined"?H:Nt(Uint8Array),Ht={"%AggregateError%":typeof AggregateError=="undefined"?H:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?H:ArrayBuffer,"%ArrayIteratorPrototype%":Ut?Nt([][Symbol.iterator]()):H,"%AsyncFromSyncIteratorPrototype%":H,"%AsyncFunction%":Gt,"%AsyncGenerator%":Gt,"%AsyncGeneratorFunction%":Gt,"%AsyncIteratorPrototype%":Gt,"%Atomics%":typeof Atomics=="undefined"?H:Atomics,"%BigInt%":typeof BigInt=="undefined"?H:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?H:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?H:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?H:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?H:FinalizationRegistry,"%Function%":zr,"%GeneratorFunction%":Gt,"%Int8Array%":typeof Int8Array=="undefined"?H:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?H:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?H:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ut?Nt(Nt([][Symbol.iterator]())):H,"%JSON%":typeof JSON=="object"?JSON:H,"%Map%":typeof Map=="undefined"?H:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Ut?H:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?H:Promise,"%Proxy%":typeof Proxy=="undefined"?H:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?H:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?H:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Ut?H:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?H:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ut?Nt(""[Symbol.iterator]()):H,"%Symbol%":Ut?Symbol:H,"%SyntaxError%":oe,"%ThrowTypeError%":Oo,"%TypedArray%":Ao,"%TypeError%":zt,"%Uint8Array%":typeof Uint8Array=="undefined"?H:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?H:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?H:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?H:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?H:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?H:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?H:WeakSet},Eo=function e(t){var r;if(t==="%AsyncFunction%")r=Ie("async function () {}");else if(t==="%GeneratorFunction%")r=Ie("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Ie("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=Nt(o.prototype))}return Ht[t]=r,r},_r={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Oe=Gr,me=So,Po=Oe.call(Function.call,Array.prototype.concat),$o=Oe.call(Function.apply,Array.prototype.splice),wr=Oe.call(Function.call,String.prototype.replace),ge=Oe.call(Function.call,String.prototype.slice),Mo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,No=/\\(\\)?/g,Do=function(t){var r=ge(t,0,1),n=ge(t,-1);if(r==="%"&&n!=="%")throw new oe("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new oe("invalid intrinsic syntax, expected opening `%`");var o=[];return wr(t,Mo,function(i,a,f,c){o[o.length]=f?wr(c,No,"$1"):a||i}),o},To=function(t,r){var n=t,o;if(me(_r,n)&&(o=_r[n],n="%"+o[0]+"%"),me(Ht,n)){var i=Ht[n];if(i===Gt&&(i=Eo(n)),typeof i=="undefined"&&!r)throw new zt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new oe("intrinsic "+t+" does not exist!")},Io=function(t,r){if(typeof t!="string"||t.length===0)throw new zt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new zt('"allowMissing" argument must be a boolean');var n=Do(t),o=n.length>0?n[0]:"",i=To("%"+o+"%",r),a=i.name,f=i.value,c=!1,b=i.alias;b&&(o=b[0],$o(n,Po([0,1],b)));for(var $=1,_=!0;$<n.length;$+=1){var E=n[$],S=ge(E,0,1),s=ge(E,-1);if((S==='"'||S==="'"||S==="`"||s==='"'||s==="'"||s==="`")&&S!==s)throw new oe("property names with quotes must have matching quotes");if((E==="constructor"||!_)&&(c=!0),o+="."+E,a="%"+o+"%",me(Ht,a))f=Ht[a];else if(f!=null){if(!(E in f)){if(!r)throw new zt("base intrinsic for "+t+" exists, but the property is not available.");return}if(Rt&&$+1>=n.length){var u=Rt(f,E);_=!!u,_&&"get"in u&&!("originalValue"in u.get)?f=u.get:f=f[E]}else _=me(f,E),f=f[E];_&&!c&&(Ht[a]=f)}}return f},Co=Io,Be=Co("%Object.defineProperty%",!0),We=function(){if(Be)try{return Be({},"a",{value:1}),!0}catch{return!1}return!1};We.hasArrayLengthDefineBug=function(){if(!We())return null;try{return Be([],"length",{value:1}).length!==1}catch{return!0}};var xo=We,ko=co,jo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Lo=Object.prototype.toString,Ro=Array.prototype.concat,Hr=Object.defineProperty,Fo=function(e){return typeof e=="function"&&Lo.call(e)==="[object Function]"},Bo=xo(),Kr=Hr&&Bo,Wo=function(e,t,r,n){t in e&&(!Fo(n)||!n())||(Kr?Hr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},Jr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=ko(t);jo&&(n=Ro.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Wo(e,n[o],t[n[o]],r[n[o]])};Jr.supportsDescriptors=!!Kr;var Vr=Jr,re={exports:{}};typeof self!="undefined"?re.exports=self:typeof window!="undefined"?re.exports=window:re.exports=Function("return this")();var qo=re.exports,Yr=function(){return typeof bt!="object"||!bt||bt.Math!==Math||bt.Array!==Array?qo:bt},Uo=Vr,Go=Yr,zo=function(){var t=Go();if(Uo.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Ho=Vr,Ko=re.exports,Xr=Yr,Jo=zo,Vo=Xr(),Zr=function(){return Vo};Ho(Zr,{getPolyfill:Xr,implementation:Ko,shim:Jo});var Yo=Zr,Xo=bt&&bt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(st,"__esModule",{value:!0});st.NO_IL=Ye=st.NO=st.MemoryStream=Ae=st.Stream=void 0;var Zo=eo,Qo=Yo,ce=Zo.default(Qo.getPolyfill()),N={},Ye=st.NO=N;function dt(){}function de(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function ti(e,t){return function(n){return e(n)&&t(n)}}function Xe(e,t,r){try{return e.f(t)}catch(n){return r._e(n),N}}var Lt={_n:dt,_e:dt,_c:dt};st.NO_IL=Lt;function Sr(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var ei=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),ri=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ni=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new ri(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),oi=function(){function e(t){this.type="merge",this.insArr=t,this.out=N,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===N)return;t._c()}},e}(),ii=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==N&&r.up(t,this.i)){var o=de(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==N&&--t.Nc===0&&t.out._c()},e}(),ai=function(){function e(t){this.type="combine",this.insArr=t,this.out=N,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===N?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=N,r[i]._add(new ii(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=N,this.ils=[],this.vals=[]},e}(),si=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),ui=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(dt,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),fi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),li=function(){function e(t,r){this.type="debug",this.ins=t,this.out=N,this.s=dt,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this.s,o=this.l;if(n!==dt)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),ci=function(){function e(t,r){this.type="drop",this.ins=r,this.out=N,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),pi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),di=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=N,this.o=t,this.oil=Lt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new pi(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=N,this.oil=Lt},e.prototype.end=function(){var t=this.out;t!==N&&t._c()},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.end()},e}(),xe=function(){function e(t,r){this.type="filter",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Xe(this,t,r);n===N||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),hi=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=N,this.op.less()},e}(),vi=function(){function e(t){this.type="flatten",this.ins=t,this.out=N,this.open=!0,this.inner=N,this.il=Lt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=N,this.il=Lt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==N&&this.inner._remove(this.il),this.out=N,this.open=!0,this.inner=N,this.il=Lt},e.prototype.less=function(){var t=this.out;t!==N&&!this.open&&this.inner===N&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this,o=n.inner,i=n.il;o!==N&&i!==Lt&&o._remove(i),(this.inner=t)._add(this.il=new hi(r,this))}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),yi=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=N,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Xe(this,t,r);n!==N&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),mi=function(){function e(t){this.type="last",this.ins=t,this.out=N,this.has=!1,this.val=N}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.val=N},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),gi=function(){function e(t,r){this.type="map",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Xe(this,t,r);n!==N&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),bi=function(){function e(t){this.type="remember",this.ins=t,this.out=N}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),_i=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==N)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),wi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=N,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),Si=function(){function e(t,r){this.type="take",this.ins=r,this.out=N,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Ze=function(){function e(t){this._prod=t||N,this._ils=[],this._stopID=N,this._dl=N,this._d=!1,this._target=null,this._err=N}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=de(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===N){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=de(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=de(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==N&&this._prod._stop(),this._err=N,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=N,this._stopID=N},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==N)clearTimeout(this._stopID),this._stopID=N;else{var o=this._prod;o!==N&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==N&&o.length<=0?(this._err=N,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==N)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof $t?$t:e},e.prototype.addListener=function(t){t._n=t.next||dt,t._e=t.error||dt,t._c=t.complete||dt,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new ei(this,t)},e.prototype[ce]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Sr(t)}return new e(t)},e.createWithMemory=function(t){return t&&Sr(t),new $t(t)},e.never=function(){return new e({_start:dt,_stop:dt})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:dt})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:dt})},e.from=function(t){if(typeof t[ce]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new si(t))},e.fromPromise=function(t){return new e(new ui(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[ce]=="function"?t[ce]():t;return new e(new ni(r))},e.periodic=function(t){return new e(new fi(t))},e.prototype._map=function(t){return new(this.ctor())(new gi(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof xe?new e(new xe(ti(r.f,t),r.ins)):new e(new xe(t,this))},e.prototype.take=function(t){return new(this.ctor())(new Si(t,this))},e.prototype.drop=function(t){return new e(new ci(t,this))},e.prototype.last=function(){return new e(new mi(this))},e.prototype.startWith=function(t){return new $t(new wi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new di(t,this))},e.prototype.fold=function(t,r){return new $t(new yi(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new _i(t,this))},e.prototype.flatten=function(){return new e(new vi(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new $t(new bi(this))},e.prototype.debug=function(t){return new(this.ctor())(new li(this,t))},e.prototype.imitate=function(t){if(t instanceof $t)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||dt,t._e=t.error||dt,t._c=t.complete||dt,this._dl=t):(this._d=!1,this._dl=N)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new oi(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ai(r))},e}(),Ae=st.Stream=Ze,$t=function(e){Xo(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==N)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=N;else if(this._has)r._n(this._v);else{var i=this._prod;i!==N&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Ze);st.MemoryStream=$t;var Oi=Ze,tt=st.default=Oi,Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});function Qr(){var e;return typeof window!="undefined"?e=window:typeof bt!="undefined"?e=bt:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ai(e){Qr().adaptStream=e}Ee.setAdapt=Ai;function Ei(e){return Qr().adaptStream(e)}var lt=Ee.adapt=Ei;function Pi(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function $i(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function Mi(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Ni(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=lt(i.isolateSink(tt.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var tn=0;function qe(){return"cycle"+ ++tn}function ie(e,t){t===void 0&&(t=qe()),Pi(e,t);var r=typeof t=="object"?qe():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],f=1;f<arguments.length;f++)a[f-1]=arguments[f];var c=$i(i,n,r),b=Mi(i,c),$=e.apply(void 0,[b].concat(a)),_=Ni(i,$,c);return _}}ie.reset=function(){return tn=0};function Di(e){return e===void 0&&(e=qe()),function(t){return ie(t,e)}}var Ti=Object.freeze(Object.defineProperty({__proto__:null,default:ie,toIsolated:Di},Symbol.toStringTag,{value:"Module"})),en=Se(Ti),Qe={},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.DropRepeatsOperator=void 0;var Ii=st,ke={},rn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=ke,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=ke},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==ke&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();Vt.DropRepeatsOperator=rn;function Ci(e){return e===void 0&&(e=void 0),function(r){return new Ii.Stream(new rn(r,e))}}var xi=Vt.default=Ci,Ue=globalThis&&globalThis.__assign||function(){return Ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ue.apply(this,arguments)};function ki(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function nn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function ji(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?ki(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):Ue({},r,(i={},i[e]=n,i))}:e.set}function on(e,t){return e.select(t)}function an(e,t){var r=nn(t),n=ji(t);return e.map(function(o){return function(a){var f=r(a),c=o(f);return f===c?a:n(a,c)}})}var sn=function(){function e(t,r){this.isolateSource=on,this.isolateSink=an,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(xi()).remember(),this._name=r,this.stream=lt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=nn(t);return new e(this._stream.map(r),this._name)},e}(),Li=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ri=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,f=0;f<a;++f){var c=r[f],b=c._key,$=tt.fromObservable(c[i]||tt.never());n.has(b)||(n.set(b,new Li(o,this,$)),$._add(n.get(b)))}n.forEach(function(_,E){(!t.dict.has(E)||!t.dict.get(E))&&(_.ins._remove(_),_.ins=null,_.out=null,n.delete(E))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Fi(e){return function(r){return new Ae(new Ri(e,r))}}var Bi=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=Ye,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Wi=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],f=a._key;if(!n.has(f))return;var c=n.get(f).val;if(c===Ye)return;o[i]=c}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,f=r.length,c=!1;if(n.forEach(function(S,s){a.has(s)||(S.ins._remove(S),S.ins=null,S.out=null,S.val=null,n.delete(s),c=!0)}),f===0){o._n([]);return}for(var b=0;b<f;++b){var $=r[b],_=$._key;if(!$[i])throw new Error("pickCombine found an undefined child sink stream");var E=tt.fromObservable($[i]);n.has(_)||(n.set(_,new Bi(_,o,this,E)),E._add(n.get(_)))}c&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function qi(e){return function(r){return new Ae(new Wi(e,r))}}var be=globalThis&&globalThis.__assign||function(){return be=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},be.apply(this,arguments)},un=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return lt(this._instances$.compose(Fi(t)))},e.prototype.pickCombine=function(t){return lt(this._instances$.compose(qi(t)))},e}();function Ui(e){return{"*":null}}function Gi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var zi={get:function(e){return e},set:function(e,t){return t}};function Hi(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Ui,a=tt.fromObservable(r[n].stream),f=a.fold(function(c,b){var $,_,E,S,s=c.dict;if(Array.isArray(b)){for(var u=Array(b.length),w=new Set,l=0,y=b.length;l<y;++l){var p=""+(o?o(b[l],l):l);if(w.add(p),s.has(p))u[l]=s.get(p);else{var m=o?Gi(o,p):""+l,O=i(p),d=typeof O=="string"?($={"*":O},$[n]=m,$):be({},O,(_={},_[n]=m,_)),g=e.itemFactory?e.itemFactory(b[l],l):e.item,A=ie(g,d)(r);s.set(p,A),u[l]=A}u[l]._key=p}return s.forEach(function(T,I){w.has(I)||s.delete(I)}),w.clear(),{dict:s,arr:u}}else{s.clear();var p=""+(o?o(b,0):"this"),m=zi,O=i(p),d=typeof O=="string"?(E={"*":O},E[n]=m,E):be({},O,(S={},S[n]=m,S)),g=e.itemFactory?e.itemFactory(b,0):e.item,A=ie(g,d)(r);return s.set(p,A),{dict:s,arr:[A]}}},{dict:new Map,arr:[]});return e.collectSinks(new un(f))}}var tr={};Object.defineProperty(tr,"__esModule",{value:!0});var Ki=st,Ji=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Vi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Ki.Stream(new Ji(e))}var fn=tr.default=Vi,ln={};Object.defineProperty(ln,"__esModule",{value:!0});function Yi(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var cn=ln.default=Yi,je=cn();function Xi(e,t){return t===void 0&&(t="state"),function(n){var o=tt.create(),i=o.fold(function(b,$){return $(b)},void 0).drop(1),a=n;a[t]=new sn(i,t);var f=e(a);if(f[t]){var c=fn(tt.fromObservable(f[t]),tt.never());c.subscribe({next:function(b){return je(function(){return o._n(b)})},error:function(b){return je(function(){return o._e(b)})},complete:function(){return je(function(){return o._c()})}})}return f}}var Zi=Object.freeze(Object.defineProperty({__proto__:null,StateSource:sn,isolateSource:on,isolateSink:an,Instances:un,withState:Xi,makeCollection:Hi},Symbol.toStringTag,{value:"Module"})),er=Se(Zi);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=_;var t=n(en),r=er;function n(S){return S&&S.__esModule?S:{default:S}}function o(S,s,u){return s in S?Object.defineProperty(S,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):S[s]=u,S}function i(S,s){return $(S)||b(S,s)||f(S,s)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(S,s){if(!!S){if(typeof S=="string")return c(S,s);var u=Object.prototype.toString.call(S).slice(8,-1);if(u==="Object"&&S.constructor&&(u=S.constructor.name),u==="Map"||u==="Set")return Array.from(S);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return c(S,s)}}function c(S,s){(s==null||s>S.length)&&(s=S.length);for(var u=0,w=new Array(s);u<s;u++)w[u]=S[u];return w}function b(S,s){var u=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(u!=null){var w=[],l=!0,y=!1,p,m;try{for(u=u.call(S);!(l=(p=u.next()).done)&&(w.push(p.value),!(s&&w.length===s));l=!0);}catch(O){y=!0,m=O}finally{try{!l&&u.return!=null&&u.return()}finally{if(y)throw m}}return w}}function $(S){if(Array.isArray(S))return S}function _(S,s){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["DOM"],w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["EVENTS"],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";return function(y){var p={item:S,itemKey:function(d){return d.id},itemScope:function(d){return d},channel:l,collectSinks:function(d){return Object.entries(y).reduce(function(g,A){var T=i(A,2),I=T[0];return T[1],u.includes(I)?g[I]=d.pickCombine(I):g[I]=d.pickMerge(I),g},{})}},m=o({},l,s);return w.forEach(function(O){return m[O]=null}),u.forEach(function(O){return m[O]=null}),E(p,m,y)}}function E(S,s,u){return(0,t.default)((0,r.makeCollection)(S),s)(u)}})(Qe);var rr={};Object.defineProperty(rr,"__esModule",{value:!0});var Qi=st,ta=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function ea(e){return function(r){return new Qi.Stream(new ta(e,r))}}var ra=rr.default=ea,nr={};Object.defineProperty(nr,"__esModule",{value:!0});var te=st,na=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=te.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=te.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=te.NO&&t._n(this.t),this.t=te.NO,t._c())},e}();function oa(e){return function(r){return new te.Stream(new na(e,r))}}nr.default=oa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=Dt;var t=_(en),r=_(Qe),n=er,o=$(st),i=_(rr),a=_(tr),f=_(nr),c=_(Vt);function b(v){if(typeof WeakMap!="function")return null;var D=new WeakMap,h=new WeakMap;return(b=function(C){return C?h:D})(v)}function $(v,D){if(!D&&v&&v.__esModule)return v;if(v===null||F(v)!=="object"&&typeof v!="function")return{default:v};var h=b(D);if(h&&h.has(v))return h.get(v);var M={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in v)if(x!=="default"&&Object.prototype.hasOwnProperty.call(v,x)){var L=C?Object.getOwnPropertyDescriptor(v,x):null;L&&(L.get||L.set)?Object.defineProperty(M,x,L):M[x]=v[x]}return M.default=v,h&&h.set(v,M),M}function _(v){return v&&v.__esModule?v:{default:v}}function E(v){return u(v)||s(v)||y(v)||S()}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function u(v){if(Array.isArray(v))return p(v)}function w(v,D){return O(v)||m(v,D)||y(v,D)||l()}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(v,D){if(!!v){if(typeof v=="string")return p(v,D);var h=Object.prototype.toString.call(v).slice(8,-1);if(h==="Object"&&v.constructor&&(h=v.constructor.name),h==="Map"||h==="Set")return Array.from(v);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return p(v,D)}}function p(v,D){(D==null||D>v.length)&&(D=v.length);for(var h=0,M=new Array(D);h<D;h++)M[h]=v[h];return M}function m(v,D){var h=v==null?null:typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(h!=null){var M=[],C=!0,x=!1,L,G;try{for(h=h.call(v);!(C=(L=h.next()).done)&&(M.push(L.value),!(D&&M.length===D));C=!0);}catch(k){x=!0,G=k}finally{try{!C&&h.return!=null&&h.return()}finally{if(x)throw G}}return M}}function O(v){if(Array.isArray(v))return v}function d(v,D){if(!(v instanceof D))throw new TypeError("Cannot call a class as a function")}function g(v,D){for(var h=0;h<D.length;h++){var M=D[h];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(v,M.key,M)}}function A(v,D,h){return D&&g(v.prototype,D),h&&g(v,h),Object.defineProperty(v,"prototype",{writable:!1}),v}function T(v,D){var h=Object.keys(v);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(v);D&&(M=M.filter(function(C){return Object.getOwnPropertyDescriptor(v,C).enumerable})),h.push.apply(h,M)}return h}function I(v){for(var D=1;D<arguments.length;D++){var h=arguments[D]!=null?arguments[D]:{};D%2?T(Object(h),!0).forEach(function(M){R(v,M,h[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(h)):T(Object(h)).forEach(function(M){Object.defineProperty(v,M,Object.getOwnPropertyDescriptor(h,M))})}return v}function R(v,D,h){return D in v?Object.defineProperty(v,D,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[D]=h,v}function F(v){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},F(v)}var X=typeof window!="undefined"&&window||process&&process.env||{},z="request",ct="BOOTSTRAP",it="INITIALIZE",pt="HYDRATE",mt=!0,_t="~#~#~ABORT~#~#~";e.ABORT=_t;function Dt(v){var D=v.name,h=v.sources,M=v.isolateOpts,C=v.stateSourceName,x=C===void 0?"STATE":C;if(h&&F(h)!=="object")throw new Error("Sources must be a Cycle.js sources object:",D);var L;typeof M=="string"?L=R({},x,M):M===!0?L={}:L=M;var G=typeof h=="undefined";if(F(L)=="object"){var k=function(W){var j=I(I({},v),{},{sources:W});return new Ot(j).sinks};return G?(0,t.default)(k,L):(0,t.default)(k,L)(h)}else return G?function(B){return new Ot(I(I({},v),{},{sources:B})).sinks}:new Ot(v).sinks}var Ot=function(){function v(D){var h=this,M=D.name,C=M===void 0?"NO NAME":M,x=D.sources,L=D.intent,G=D.request,k=D.model,B=D.response,W=D.view,j=D.children,q=j===void 0?{}:j,U=D.components,V=U===void 0?{}:U,et=D.initialState,ot=D.calculated,nt=D.storeCalculatedInState,K=nt===void 0?!0:nt,Z=D.DOMSourceName,Q=Z===void 0?"DOM":Z,J=D.stateSourceName,at=J===void 0?"STATE":J,ut=D.requestSourceName,Y=ut===void 0?"HTTP":ut;if(d(this,v),!x||F(x)!="object")throw new Error("Missing or invalid sources");this.name=C,this.sources=x,this.intent=L,this.request=G,this.model=k,this.response=B,this.view=W,this.children=q,this.components=V,this.initialState=et,this.calculated=ot,this.storeCalculatedInState=K,this.DOMSourceName=Q,this.stateSourceName=at,this.requestSourceName=Y,this.sourceNames=Object.keys(x),this.isSubComponent=this.sourceNames.includes("props$");var gt=x[at]&&x[at].stream;gt&&(this.currentState=et||{},this.sources[this.stateSourceName]=new n.StateSource(gt.map(function(At){return h.currentState=At,At}))),mt&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=et||!0,this.intent=function(At){return{__NOOP_ACTION__:o.default.never()}},this.model={__NOOP_ACTION__:function(Ft){return Ft}}),mt=!1,this.log=Yt(C),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return A(v,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof o.Stream)&&F(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var h=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=o.default.never();return}var M;if(this.intent$ instanceof o.Stream)M=this.intent$;else{var C=Object.entries(this.intent$).map(function(B){var W=w(B,2),j=W[0],q=W[1];return q.map(function(U){return{type:j,data:U}})});M=o.default.merge.apply(o.default,[o.default.never()].concat(E(C)))}var x=M instanceof o.Stream?M:M.apply&&M(this.sources)||o.default.never(),L=(0,a.default)(o.default.of({type:ct}),x).compose((0,i.default)(10)),G;h&&typeof h.select=="function"?G=h.select("initial").flatten():G=o.default.never();var k=G.map(function(B){return{type:pt,data:B}});this.action$=o.default.merge(L,k).compose(this.log(function(B){var W=B.type;return"Action triggered: <".concat(W,">")}))}},{key:"initResponse$",value:function(){var h=this;if(typeof this.request!="undefined"){if(F(this.request)!="object")throw new Error("The request parameter must be an object");var M=this.sources[this.requestSourceName],C=Object.entries(this.request),x=C.reduce(function(L,G){var k=w(G,2),B=k[0],W=k[1],j=B.toLowerCase();if(typeof M[j]!="function")throw new Error("Invalid method in request object:",B);var q=Object.entries(W),U=q.reduce(function(et,ot){var nt=w(ot,2),K=nt[0],Z=nt[1],Q="[".concat(j.toUpperCase(),"]:").concat(K||"none"),J=F(Z);if(J==="undefined")throw new Error("Action for '".concat(K,"' route in request object not specified"));if(J!=="string"&&J!=="function")throw new Error("Invalid action for '".concat(K,"' route: expecting string or function"));var at=J==="function"?"[ FUNCTION ]":"< ".concat(Z," >");console.log("[".concat(h.name,"] Adding ").concat(h.requestSourceName," route:"),j.toUpperCase(),"'".concat(K,"' <").concat(at,">"));var ut=M[j](K).compose((0,c.default)(function(Y,gt){return Y.id==gt.id})).map(function(Y){if(!Y||!Y.id)throw new Error("No id found in request: ".concat(Q));try{var gt=Y.id,At=Y.params,Ft=Y.body,$e=Y.cookies,Bt=J==="function"?"FUNCTION":Z,fr={params:At,body:Ft,cookies:$e,req:Y},Pt={type:Bt,data:Ft,req:Y,_reqId:gt,_action:Bt},Xt=new Date().toISOString(),Tt=Y.get?Y.get("host"):"0.0.0.0";if(console.log("".concat(Xt," ").concat(Tt," ").concat(Y.method," ").concat(Y.url)),X.DEBUG&&h.action$.setDebugListener({next:function(Et){var Wt=Et.type;return console.log("[".concat(h.name,"] Action from ").concat(h.requestSourceName," request: <").concat(Wt,">"))}}),J==="function"){var It=h.addCalculated(h.currentState),Ct=Z(It,Y);return o.default.of(I(I({},Pt),{},{data:Ct}))}else{h.action$.shamefullySendNext(Pt);var Me=Object.entries(h.sources),Ne=Me.reduce(function(xt,Et){var Wt=w(Et,2),lr=Wt[0],Zt=Wt[1];if(!Zt||typeof Zt[z]!="function")return xt;var kt=Zt[z](gt);return[].concat(E(xt),[kt])},[]);return o.default.merge.apply(o.default,E(Ne))}}catch(xt){console.error(xt)}}).flatten();return[].concat(E(et),[ut])},[]),V=o.default.merge.apply(o.default,E(U));return[].concat(E(L),[V])},[]);if(this.response$=o.default.merge.apply(o.default,E(x)).compose(this.log(function(L){return L._action?"[".concat(h.requestSourceName,"] response data received for Action: <").concat(L._action,">"):"[".concat(h.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var h=this;this.model!=null&&(this.model[it]===void 0?this.model[it]=R({},this.stateSourceName,function(M,C){return I({},h.addCalculated(C))}):Object.keys(this.model[it]).forEach(function(M){M!==h.stateSourceName&&(console.warn("".concat(it," can only be used with the ").concat(h.stateSourceName," source... disregarding ").concat(M)),delete h.model[it][M])}))}},{key:"initModel$",value:function(){var h=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(W,j){return W[j]=o.default.never(),W},{});return}var M={type:it,data:this.initialState},C=this.initialState?(0,a.default)(o.default.of(M),this.action$).compose((0,i.default)(0)):this.action$,x=this.makeOnAction(C,!0,this.action$),L=this.makeOnAction(this.action$,!1,this.action$),G=Object.entries(this.model),k={};G.forEach(function(W){var j=w(W,2),q=j[0],U=j[1];if(typeof U=="function"&&(U=R({},h.stateSourceName,U)),F(U)!=="object")throw new Error("Entry for each action must be an object: ".concat(h.name," ").concat(q));var V=Object.entries(U);V.forEach(function(et){var ot=w(et,2),nt=ot[0],K=ot[1],Z=nt==h.stateSourceName,Q=Z?x:L,J=Q(q,K),at=J.compose(h.log(function(ut){if(Z)return"State reducer added: <".concat(q,">");var Y=ut&&(ut.type||ut.command||ut.name||ut.key||Array.isArray(ut)&&"Array"||ut);return"Data sent to [".concat(nt,"]: <").concat(q,"> ").concat(Y)}));Array.isArray(k[nt])?k[nt].push(at):k[nt]=[at]})});var B=Object.entries(k).reduce(function(W,j){var q=w(j,2),U=q[0],V=q[1];return W[U]=o.default.merge.apply(o.default,[o.default.never()].concat(E(V))),W},{});this.model$=B}},{key:"initSendResponse$",value:function(){var h=this,M=F(this.response);if(M!="function"&&M!="undefined")throw new Error("The response parameter must be a function");if(M=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(k){var B=k._reqId,W=k._action;return"Unhandled response for request: ".concat(W," ").concat(B)})}),this.sendResponse$=o.default.never();return}var C={select:function(B){return typeof B=="undefined"?h.response$:(Array.isArray(B)||(B=[B]),h.response$.filter(function(W){var j=W._action;return B.length>0?j==="FUNCTION"||B.includes(j):!0}))}},x=this.response(C);if(F(x)!="object")throw new Error("The response function must return an object");var L=Object.entries(x),G=L.reduce(function(k,B){var W=w(B,2),j=W[0],q=W[1],U=q.map(function(V){var et=V._reqId,ot=V._action,nt=V.data;if(!et)throw new Error("No request id found for response for: ".concat(j));return{_reqId:et,_action:ot,command:j,data:nt}});return[].concat(E(k),[U])},[]);this.sendResponse$=o.default.merge.apply(o.default,E(G)).compose(this.log(function(k){k._reqId;var B=k._action;return"[".concat(h.requestSourceName,"] response sent for: <").concat(B,">")}))}},{key:"initChildren$",value:function(){var h=this,M=this.sourceNames.reduce(function(C,x){return x==h.DOMSourceName?C[x]={}:C[x]=[],C},{});this.children$=Object.entries(this.children).reduce(function(C,x){var L=w(x,2),G=L[0],k=L[1],B=k(h.sources);return h.sourceNames.forEach(function(W){W==h.DOMSourceName?C[W][G]=B[W]:C[W].push(B[W])}),C},M)}},{key:"initSubComponentSink$",value:function(){var h=this,M=o.default.create({start:function(x){h.newSubComponentSinks=x.next.bind(x)},stop:function(x){}});M.subscribe({next:function(x){return x}}),this.subComponentSink$=M.filter(function(C){return Object.keys(C).length>0})}},{key:"initVdom$",value:function(){var h=this;if(typeof this.view!="function"){this.vdom$=o.default.of(null);return}var M=this.sources[this.stateSourceName],C=I({},this.children$[this.DOMSourceName]),x=M&&M.isolateSource(M,{get:function(q){return h.addCalculated(q)}}),L=x&&x.stream||o.default.never();C.state=L,C[this.stateSourceName]=L,this.sources.props$&&(C.props=this.sources.props$),this.sources.children$&&(C.children=this.sources.children$);var G=Object.entries(C).reduce(function(j,q){var U=w(q,2),V=U[0],et=U[1];return j.names.push(V),j.streams.push(et),j},{names:[],streams:[]}),k=o.default.combine.apply(o.default,E(G.streams)),B=k.compose((0,f.default)(1)).map(function(j){return G.names.reduce(function(q,U,V){return q[U]=j[V],q},{})}),W=Object.keys(this.components);this.vdom$=B.fold(function(j,q){var U=h.view(q)||{sel:"div",data:{},children:[]},V=ar(U,W),et=Object.entries(V),ot={"::ROOT::":U};if(et.length===0)return ot;var nt=et.reduce(function(K,Z){var Q=w(Z,2),J=Q[0],at=Q[1],ut=at.sel,Y=at.data,gt=Y.props||{},At=at.children||[],Ft=Y.isCollection||!1,$e=Y.isSwitchable||!1;if(j[J]){var Bt=j[J];return K[J]=Bt,Bt.props$.shamefullySendNext(gt),Bt.children$.shamefullySendNext(At),K}var fr=h.components[ut],Pt=o.default.create().startWith(gt),Xt=o.default.create().startWith(At),Tt,It;if(Ft){var Ct;Tt=new n.StateSource(Pt.map(function(kt){return kt.value}).remember());var Me=I(I({},h.sources),{},(Ct={},R(Ct,h.stateSourceName,Tt),R(Ct,"props$",Pt),R(Ct,"children$",Xt),Ct)),Ne=h.components[Y.component],xt={get:function(jt){return jt},set:function(jt){return jt}};It=(0,r.default)(Ne,xt)(Me)}else if(!$e){var Et,Wt=function(jt){var se=jt.state;if(typeof se=="undefined")return jt;if(F(se)!=="object")return se;var cr=I({},jt);return delete cr.state,I(I({},cr),se)};Tt=new n.StateSource(Pt.map(Wt));var lr=I(I({},h.sources),{},(Et={},R(Et,h.stateSourceName,Tt),R(Et,"props$",Pt),R(Et,"children$",Xt),Et));It=fr(lr)}var Zt=It[h.DOMSourceName];return It[h.DOMSourceName]=Tt.stream.map(function(kt){return Zt.compose((0,f.default)(10))}).flatten(),K[J]={sink$:It,props$:Pt,children$:Xt},K},ot);return nt},{}).map(function(j){var q=j["::ROOT::"],U=[],V=Object.entries(j).filter(function(K){var Z=w(K,1),Q=Z[0];return Q!=="::ROOT::"});if(V.length===0)return o.default.of(q);var et=V.reduce(function(K,Z){var Q=w(Z,2);Q[0];var J=Q[1];return Object.entries(J.sink$).forEach(function(at){var ut=w(at,2),Y=ut[0],gt=ut[1];K[Y]||(K[Y]=[]),Y!==h.DOMSourceName&&K[Y].push(gt)}),K},{}),ot=Object.entries(et).reduce(function(K,Z){var Q=w(Z,2),J=Q[0],at=Q[1];return K[J]=o.default.merge.apply(o.default,E(at)),K},{});h.newSubComponentSinks(ot);var nt=V.map(function(K){var Z=w(K,2),Q=Z[0],J=Z[1];return U.push(Q),J.sink$[h.DOMSourceName]});return nt.length===0?o.default.of(q):o.default.combine.apply(o.default,E(nt)).map(function(K){var Z=K.reduce(function(J,at,ut){return J[U[ut]]=at,J},{}),Q=sr(q,Z,W);return Q})}).flatten().filter(function(j){return!!j}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var h=this;this.sinks=this.sourceNames.reduce(function(M,C){if(C==h.DOMSourceName)return M;var x=h.subComponentSink$?h.subComponentSink$.map(function(L){return L[C]}).filter(function(L){return!!L}).flatten():o.default.never();return C===h.stateSourceName?M[C]=o.default.merge.apply(o.default,[h.model$[C]||o.default.never(),h.sources[h.stateSourceName].stream.filter(function(L){return!1})].concat(E(h.children$[C]))):M[C]=o.default.merge.apply(o.default,[h.model$[C]||o.default.never(),x].concat(E(h.children$[C]))),M},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=o.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(h){var M=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=arguments.length>2?arguments[2]:void 0;return x=x||h,function(L,G){var k=h.filter(function(j){var q=j.type;return q==L}),B;if(typeof G=="function")B=k.map(function(j){var q=function(Z,Q){var J=j._reqId||j.req&&j.req.id,at=J?F(Q)=="object"?I(I({},Q),{},{_reqId:J,_action:L}):{data:Q,_reqId:J,_action:L}:Q;setTimeout(function(){x.shamefullySendNext({type:Z,data:at})},10)},U=j.data;if(U&&U.data&&U._reqId&&(U=U.data),C)return function(K){var Z=M.isSubComponent?M.currentState:K,Q=M.addCalculated(Z),J=G(Q,U,q,j.req);return J==_t?Z:M.cleanupCalculated(J)};var V=M.addCalculated(M.currentState),et=G(V,U,q,j.req),ot=F(et),nt=j._reqId||j.req&&j.req.id;if(["string","number","boolean","function"].includes(ot))return et;if(ot=="object")return I(I({},et),{},{_reqId:nt,_action:L});if(ot=="undefined")return console.warn("'undefined' value sent to ".concat(L)),et;throw new Error("Invalid reducer type for ".concat(L," ").concat(ot))}).filter(function(j){return j!=_t});else if(G===void 0||G===!0)B=k.map(function(j){var q=j.data;return q});else{var W=G;B=k.mapTo(W)}return B}}},{key:"addCalculated",value:function(h){if(!this.calculated||F(h)!=="object")return h;if(F(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var M=Object.entries(this.calculated),C=M.reduce(function(x,L){var G=w(L,2),k=G[0],B=G[1];if(typeof B!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(k));try{x[k]=B(h)}catch(W){console.warn("Calculated field '".concat(k,"' threw an error during calculation: ").concat(W.message))}return x},{});return I(I({},h),C)}},{key:"cleanupCalculated",value:function(h){var M=this;if(this.storeCalculatedInState)return this.addCalculated(h);if(!this.calculated||!h||F(h)!=="object")return h;var C=Object.keys(this.calculated),x=I({},h);return C.forEach(function(L){M.initialState&&typeof M.initialState[L]!="undefined"?x[L]=M.initialState[L]:delete x[L]}),x}}]),v}();function Yt(v){return function(D){var h=typeof D=="function"?D:function(M){return D};return function(M){return M.debug(function(C){(X.DEBUG=="true"||X.DEBUG===!0)&&console.log("[".concat(v,"] ").concat(h(C)))})}}}function ar(v,D){var h,M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!v)return{};if((h=v.data)!==null&&h!==void 0&&h.componentsProcessed)return{};M||(v.data.componentsProcessed=!0);var C=v.sel,x=C&&C.toLowerCase()==="collection",L=C&&C.toLowerCase()==="switchable",G=C&&["collection","swtichable"].concat(E(D)).includes(v.sel),k=v.data&&v.data.props||{},B=v.children||[],W={};if(G){var j=ur(v);if(x){if(!k.component)throw new Error("Collection element missing required 'component' property");if(typeof k.component!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(F(k.component)," requires string"));if(!D.includes(k.component))throw new Error("Specified component for collection not found: ".concat(k.component));(!k.value||!Array.isArray(k.value))&&console.warn("No valid array found in the 'value' property of collection ".concat(k.component,": no collection components will be created")),v.data.isCollection=!0,v.data.component=k.component}else if(L){if(!k.components)throw new Error("Switchable element missing required 'components' property");if(F(k.components)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(F(k.components)," requires object mapping names to component factories"));var q=Object.values(k.components);if(!q.every(function(V){return typeof V=="function"}))throw new Error("One or more invalid component factories for switchable element is not a valid component factory");if(!k.current||typeof k.current!="string")throw new Error("Missing or invalid 'current' property for switchable element: found ".concat(F(k.current)," requires string"));var U=Object.keys(k.components);if(!U.includes(k.current))throw new Error("Component '".concat(k.current,"' not found in switchable element"));v.data.isSwitchable=!0,v.data.components=k.components,v.data.currentComponent=k.current}W[j]=v}return B.length>0&&B.map(function(V){return ar(V,D,!0)}).forEach(function(V){Object.entries(V).forEach(function(et){var ot=w(et,2),nt=ot[0],K=ot[1];return W[nt]=K})}),W}function sr(v,D,h){var M,C,x,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!v){if((M=v.data)!==null&&M!==void 0&&M.componentsInjected)return v;!L&&v.data&&(v.data.componentsInjected=!0);var G=v.sel||"NO SELECTOR",k=["collection","swtichable"].concat(E(h)).includes(G),B=v==null||(C=v.data)===null||C===void 0?void 0:C.isCollection;v==null||(x=v.data)===null||x===void 0||x.isSwitchable,v.data&&v.data.props;var W=v.children||[];if(k){var j=ur(v),q=D[j];return B?(v.sel="div",delete v.elm,v.children=q,v):q}else return W.length>0&&(v.children=W.map(function(U){return sr(U,D,h)}).flat()),v}}function ur(v){var D=v.sel,h=v.data&&v.data.props||{},M=h.id&&JSON.stringify(h.id)||JSON.stringify(h);return"".concat(D,"::").concat(M)}})(Br);var pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=i(st),r=n(Vt);function n(d){return d&&d.__esModule?d:{default:d}}function o(d){if(typeof WeakMap!="function")return null;var g=new WeakMap,A=new WeakMap;return(o=function(I){return I?A:g})(d)}function i(d,g){if(!g&&d&&d.__esModule)return d;if(d===null||p(d)!=="object"&&typeof d!="function")return{default:d};var A=o(g);if(A&&A.has(d))return A.get(d);var T={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in d)if(R!=="default"&&Object.prototype.hasOwnProperty.call(d,R)){var F=I?Object.getOwnPropertyDescriptor(d,R):null;F&&(F.get||F.set)?Object.defineProperty(T,R,F):T[R]=d[R]}return T.default=d,A&&A.set(d,T),T}function a(d){return b(d)||c(d)||u(d)||f()}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function b(d){if(Array.isArray(d))return w(d)}function $(d,g){var A=Object.keys(d);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(d);g&&(T=T.filter(function(I){return Object.getOwnPropertyDescriptor(d,I).enumerable})),A.push.apply(A,T)}return A}function _(d){for(var g=1;g<arguments.length;g++){var A=arguments[g]!=null?arguments[g]:{};g%2?$(Object(A),!0).forEach(function(T){E(d,T,A[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(A)):$(Object(A)).forEach(function(T){Object.defineProperty(d,T,Object.getOwnPropertyDescriptor(A,T))})}return d}function E(d,g,A){return g in d?Object.defineProperty(d,g,{value:A,enumerable:!0,configurable:!0,writable:!0}):d[g]=A,d}function S(d,g){return y(d)||l(d,g)||u(d,g)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(d,g){if(!!d){if(typeof d=="string")return w(d,g);var A=Object.prototype.toString.call(d).slice(8,-1);if(A==="Object"&&d.constructor&&(A=d.constructor.name),A==="Map"||A==="Set")return Array.from(d);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return w(d,g)}}function w(d,g){(g==null||g>d.length)&&(g=d.length);for(var A=0,T=new Array(g);A<g;A++)T[A]=d[A];return T}function l(d,g){var A=d==null?null:typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(A!=null){var T=[],I=!0,R=!1,F,X;try{for(A=A.call(d);!(I=(F=A.next()).done)&&(T.push(F.value),!(g&&T.length===g));I=!0);}catch(z){R=!0,X=z}finally{try{!I&&A.return!=null&&A.return()}finally{if(R)throw X}}return T}}function y(d){if(Array.isArray(d))return d}function p(d){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},p(d)}function m(d,g,A){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",R=p(g);if(!g)throw new Error("Missing 'name$' parameter for switchable()");if(!(R==="string"||R==="function"||g instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(g instanceof t.Stream){var F=g.compose((0,r.default)()).startWith(A).remember();return function(z){return O(d,z,F,T)}}else{var X=R==="function"&&g||function(z){return z[g]};return function(z){var ct=z&&(typeof I=="string"&&z[I]||z.STATE||z.state).stream;if(!ct instanceof t.Stream)throw new Error("Could not find the state source: ".concat(I));var it=ct.map(X).filter(function(pt){return typeof pt=="string"}).compose((0,r.default)()).startWith(A).remember();return O(d,z,it,T,I)}}}function O(d,g,A){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof T=="string"&&(T=[T]);var R=Object.entries(d).map(function(X){var z=S(X,2),ct=z[0],it=z[1];if(g[I]){var pt=g[I].stream,mt=t.default.combine(A,pt).filter(function(Dt){var Ot=S(Dt,2),Yt=Ot[0];return Ot[1],Yt==ct}).map(function(Dt){var Ot=S(Dt,2);Ot[0];var Yt=Ot[1];return Yt}).remember(),_t=new g[I].constructor(mt,g[I]._name);return[ct,it(_(_({},g),{},{state:_t}))]}return[ct,it(g)]}),F=Object.keys(g).reduce(function(X,z){if(T.includes(z))X[z]=A.map(function(it){var pt=R.find(function(mt){var _t=S(mt,2),Dt=_t[0];return _t[1],Dt===it});return pt&&pt[1][z]||t.default.never()}).flatten().remember().startWith("");else{var ct=R.filter(function(it){var pt=S(it,2);pt[0];var mt=pt[1];return mt[z]!==void 0}).map(function(it){var pt=S(it,2);pt[0];var mt=pt[1];return mt[z]});X[z]=t.default.merge.apply(t.default,a(ct))}return X},{});return F}})(pn);var dn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(st);function r(u){return u&&u.__esModule?u:{default:u}}function n(u,w){return a(u)||i(u,w)||$(u,w)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(u,w){var l=u==null?null:typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(l!=null){var y=[],p=!0,m=!1,O,d;try{for(l=l.call(u);!(p=(O=l.next()).done)&&(y.push(O.value),!(w&&y.length===w));p=!0);}catch(g){m=!0,d=g}finally{try{!p&&l.return!=null&&l.return()}finally{if(m)throw d}}return y}}function a(u){if(Array.isArray(u))return u}function f(u,w){var l=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!l){if(Array.isArray(u)||(l=$(u))||w&&u&&typeof u.length=="number"){l&&(u=l);var y=0,p=function(){};return{s:p,n:function(){return y>=u.length?{done:!0}:{done:!1,value:u[y++]}},e:function(A){throw A},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=!0,O=!1,d;return{s:function(){l=l.call(u)},n:function(){var A=l.next();return m=A.done,A},e:function(A){O=!0,d=A},f:function(){try{!m&&l.return!=null&&l.return()}finally{if(O)throw d}}}}function c(u){return E(u)||_(u)||$(u)||b()}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(u,w){if(!!u){if(typeof u=="string")return S(u,w);var l=Object.prototype.toString.call(u).slice(8,-1);if(l==="Object"&&u.constructor&&(l=u.constructor.name),l==="Map"||l==="Set")return Array.from(u);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return S(u,w)}}function _(u){if(typeof Symbol!="undefined"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function E(u){if(Array.isArray(u))return S(u)}function S(u,w){(w==null||w>u.length)&&(w=u.length);for(var l=0,y=new Array(w);l<w;l++)y[l]=u[l];return y}function s(u){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=w.events,y=l===void 0?["input","submit"]:l,p=w.preventDefault,m=p===void 0?!0:p;typeof y=="string"&&(y=[y]);var O=y.map(function(g){return u.events(g)}),d=t.default.merge.apply(t.default,c(O));return d.map(function(g){m&&g.preventDefault();var A=g.type==="submit"?g.srcElement:g.currentTarget,T=new FormData(A),I={};I.event=g,I.eventType=g.type;var R=A.querySelector("input[type=submit]:focus");if(R){var F=R.name,X=R.value;I[F||"submit"]=X}var z=f(T.entries()),ct;try{for(z.s();!(ct=z.n()).done;){var it=n(ct.value,2),pt=it[0],mt=it[1];I[pt]=mt}}catch(_t){z.e(_t)}finally{z.f()}return I})}})(dn);var hn={};function ia(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function aa(e){return ia().adaptStream(e)}function sa(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=tt.create());return t}function ua(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function fa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=aa(e[t]));return e}function la(e,t){var r=cn(),n=Object.keys(e).filter(function(f){return!!t[f]}),o={},i={};n.forEach(function(f){o[f]={_n:[],_e:[]},i[f]={next:function(c){return o[f]._n.push(c)},error:function(c){return o[f]._e.push(c)},complete:function(){}}});var a=n.map(function(f){return tt.fromObservable(e[f]).subscribe(i[f])});return n.forEach(function(f){var c=t[f],b=function(_){r(function(){return c._n(_)})},$=function(_){r(function(){(console.error||console.log)(_),c._e(_)})};o[f]._n.forEach(b),o[f]._e.forEach($),i[f].next=b,i[f].error=$,i[f]._n=b,i[f]._e=$}),o=null,function(){a.forEach(function(c){return c.unsubscribe()})}}function ca(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function pa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function vn(e){return Object.keys(e).length===0}function yn(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(vn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=mn(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function mn(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(vn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=sa(e),r=ua(e,t),n=fa(r);function o(a){return la(a,t)}function i(){pa(n),ca(t)}return{sources:n,run:o,dispose:i}}function Or(e,t){var r=yn(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var da=Object.freeze(Object.defineProperty({__proto__:null,setup:yn,setupReusable:mn,run:Or,default:Or},Symbol.toStringTag,{value:"Module"})),ha=Se(da);function va(e,t){return document.createElement(e,t)}function ya(e,t,r){return document.createElementNS(e,t,r)}function ma(){return document.createDocumentFragment()}function ga(e){return document.createTextNode(e)}function ba(e){return document.createComment(e)}function _a(e,t,r){e.insertBefore(t,r)}function wa(e,t){e.removeChild(t)}function Sa(e,t){e.appendChild(t)}function Oa(e){return e.parentNode}function Aa(e){return e.nextSibling}function Ea(e){return e.tagName}function Pa(e,t){e.textContent=t}function $a(e){return e.textContent}function Ma(e){return e.nodeType===1}function Na(e){return e.nodeType===3}function Da(e){return e.nodeType===8}function Ta(e){return e.nodeType===11}const gn={createElement:va,createElementNS:ya,createTextNode:ga,createDocumentFragment:ma,createComment:ba,insertBefore:_a,removeChild:wa,appendChild:Sa,parentNode:Oa,nextSibling:Aa,tagName:Ea,setTextContent:Pa,getTextContent:$a,isElement:Ma,isText:Na,isComment:Da,isDocumentFragment:Ta};function St(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const Ge=Array.isArray;function he(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Le(e){return e===void 0}function vt(e){return e!==void 0}const Re=St("",{},[],void 0,void 0);function Qt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function Ia(){throw new Error("The document fragment is not supported on this platform.")}function Ca(e,t){return e.isElement(t)}function xa(e,t){return e.isDocumentFragment(t)}function ka(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const ja=["create","update","remove","destroy","pre","post"];function La(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:gn;for(const s of ja)for(const u of e){const w=u[s];w!==void 0&&n[s].push(w)}function i(s){const u=s.id?"#"+s.id:"",w=s.getAttribute("class"),l=w?"."+w.split(" ").join("."):"";return St(o.tagName(s).toLowerCase()+u+l,{},[],void 0,s)}function a(s){return St(void 0,{},[],void 0,s)}function f(s,u){return function(){if(--u===0){const l=o.parentNode(s);o.removeChild(l,s)}}}function c(s,u){var w,l,y,p;let m,O=s.data;if(O!==void 0){const A=(w=O.hook)===null||w===void 0?void 0:w.init;vt(A)&&(A(s),O=s.data)}const d=s.children,g=s.sel;if(g==="!")Le(s.text)&&(s.text=""),s.elm=o.createComment(s.text);else if(g!==void 0){const A=g.indexOf("#"),T=g.indexOf(".",A),I=A>0?A:g.length,R=T>0?T:g.length,F=A!==-1||T!==-1?g.slice(0,Math.min(I,R)):g,X=s.elm=vt(O)&&vt(m=O.ns)?o.createElementNS(m,F,O):o.createElement(F,O);for(I<R&&X.setAttribute("id",g.slice(I+1,R)),T>0&&X.setAttribute("class",g.slice(R+1).replace(/\./g," ")),m=0;m<n.create.length;++m)n.create[m](Re,s);if(Ge(d))for(m=0;m<d.length;++m){const ct=d[m];ct!=null&&o.appendChild(X,c(ct,u))}else he(s.text)&&o.appendChild(X,o.createTextNode(s.text));const z=s.data.hook;vt(z)&&((l=z.create)===null||l===void 0||l.call(z,Re,s),z.insert&&u.push(s))}else if(((y=r==null?void 0:r.experimental)===null||y===void 0?void 0:y.fragments)&&s.children){const A=s.children;for(s.elm=((p=o.createDocumentFragment)!==null&&p!==void 0?p:Ia)(),m=0;m<n.create.length;++m)n.create[m](Re,s);for(m=0;m<A.length;++m){const T=A[m];T!=null&&o.appendChild(s.elm,c(T,u))}}else s.elm=o.createTextNode(s.text);return s.elm}function b(s,u,w,l,y,p){for(;l<=y;++l){const m=w[l];m!=null&&o.insertBefore(s,c(m,p),u)}}function $(s){var u,w;const l=s.data;if(l!==void 0){(w=(u=l==null?void 0:l.hook)===null||u===void 0?void 0:u.destroy)===null||w===void 0||w.call(u,s);for(let y=0;y<n.destroy.length;++y)n.destroy[y](s);if(s.children!==void 0)for(let y=0;y<s.children.length;++y){const p=s.children[y];p!=null&&typeof p!="string"&&$(p)}}}function _(s,u,w,l){for(var y,p;w<=l;++w){let m,O;const d=u[w];if(d!=null)if(vt(d.sel)){$(d),m=n.remove.length+1,O=f(d.elm,m);for(let A=0;A<n.remove.length;++A)n.remove[A](d,O);const g=(p=(y=d==null?void 0:d.data)===null||y===void 0?void 0:y.hook)===null||p===void 0?void 0:p.remove;vt(g)?g(d,O):O()}else o.removeChild(s,d.elm)}}function E(s,u,w,l){let y=0,p=0,m=u.length-1,O=u[0],d=u[m],g=w.length-1,A=w[0],T=w[g],I,R,F,X;for(;y<=m&&p<=g;)O==null?O=u[++y]:d==null?d=u[--m]:A==null?A=w[++p]:T==null?T=w[--g]:Qt(O,A)?(S(O,A,l),O=u[++y],A=w[++p]):Qt(d,T)?(S(d,T,l),d=u[--m],T=w[--g]):Qt(O,T)?(S(O,T,l),o.insertBefore(s,O.elm,o.nextSibling(d.elm)),O=u[++y],T=w[--g]):Qt(d,A)?(S(d,A,l),o.insertBefore(s,d.elm,O.elm),d=u[--m],A=w[++p]):(I===void 0&&(I=ka(u,y,m)),R=I[A.key],Le(R)?o.insertBefore(s,c(A,l),O.elm):(F=u[R],F.sel!==A.sel?o.insertBefore(s,c(A,l),O.elm):(S(F,A,l),u[R]=void 0,o.insertBefore(s,F.elm,O.elm))),A=w[++p]);p<=g&&(X=w[g+1]==null?null:w[g+1].elm,b(s,X,w,p,g,l)),y<=m&&_(s,u,y,m)}function S(s,u,w){var l,y,p,m,O,d,g,A;const T=(l=u.data)===null||l===void 0?void 0:l.hook;(y=T==null?void 0:T.prepatch)===null||y===void 0||y.call(T,s,u);const I=u.elm=s.elm,R=s.children,F=u.children;if(s!==u){if(u.data!==void 0||vt(u.text)&&u.text!==s.text){(p=u.data)!==null&&p!==void 0||(u.data={}),(m=s.data)!==null&&m!==void 0||(s.data={});for(let X=0;X<n.update.length;++X)n.update[X](s,u);(g=(d=(O=u.data)===null||O===void 0?void 0:O.hook)===null||d===void 0?void 0:d.update)===null||g===void 0||g.call(d,s,u)}Le(u.text)?vt(R)&&vt(F)?R!==F&&E(I,R,F,w):vt(F)?(vt(s.text)&&o.setTextContent(I,""),b(I,null,F,0,F.length-1,w)):vt(R)?_(I,R,0,R.length-1):vt(s.text)&&o.setTextContent(I,""):s.text!==u.text&&(vt(R)&&_(I,R,0,R.length-1),o.setTextContent(I,u.text)),(A=T==null?void 0:T.postpatch)===null||A===void 0||A.call(T,s,u)}}return function(u,w){let l,y,p;const m=[];for(l=0;l<n.pre.length;++l)n.pre[l]();for(Ca(o,u)?u=i(u):xa(o,u)&&(u=a(u)),Qt(u,w)?S(u,w,m):(y=u.elm,p=o.parentNode(y),c(w,m),p!==null&&(o.insertBefore(p,w.elm,o.nextSibling(y)),_(p,[u],0,0))),l=0;l<m.length;++l)m[l].data.hook.insert(m[l]);for(l=0;l<n.post.length;++l)n.post[l]();return w}}function or(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&or(i,o.children,o.sel)}}function wt(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),Ge(r)?o=r:he(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(Ge(t)?o=t:he(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)he(o[a])&&(o[a]=St(void 0,void 0,void 0,o[a],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&or(n,o,e),St(e,n,o,i,void 0)}function ze(e,t){const r=t!==void 0?t:gn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",f=r.tagName(e).toLowerCase()+o+a,c={},b={},$={},_=[];let E,S,s;const u=e.attributes,w=e.childNodes;for(S=0,s=u.length;S<s;S++)E=u[S].nodeName,E[0]==="d"&&E[1]==="a"&&E[2]==="t"&&E[3]==="a"&&E[4]==="-"?b[E.slice(5)]=u[S].nodeValue||"":E!=="id"&&E!=="class"&&(c[E]=u[S].nodeValue);for(S=0,s=w.length;S<s;S++)_.push(ze(w[S],t));return Object.keys(c).length>0&&($.attrs=c),Object.keys(b).length>0&&($.datasets=b),f[0]==="s"&&f[1]==="v"&&f[2]==="g"&&(f.length===3||f[3]==="."||f[3]==="#")&&or($,_,f),St(f,$,_,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),St(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),St("!",{},[],n,e)):St("",{},[],void 0,e)}const Ra="http://www.w3.org/1999/xlink",Fa="http://www.w3.org/XML/1998/namespace",Ar=58,Ba=120;function Er(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==Ba?n.setAttribute(r,a):r.charCodeAt(3)===Ar?n.setAttributeNS(Fa,r,a):r.charCodeAt(5)===Ar?n.setAttributeNS(Ra,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Wa={create:Er,update:Er};function Pr(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const qa={create:Pr,update:Pr},$r=/[A-Z]/g;function Mr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace($r,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace($r,"-$&").toLowerCase(),o[i]))}const Ua={create:Mr,update:Mr};function Nr(e,t){let r,n,o;const i=t.elm;let a=e.data.props,f=t.data.props;if(!(!a&&!f)&&a!==f){a=a||{},f=f||{};for(r in f)n=f[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Ga={create:Nr,update:Nr},Dr=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,za=function(e){Dr(function(){Dr(e)})};let He=!1;function Ha(e,t,r){za(function(){e[t]=r})}function Tr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const f="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const c in a.delayed)r=a.delayed[c],(!f||r!==i.delayed[c])&&Ha(o.style,c,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Ka(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Ja(e,t){const r=e.data.style;if(!r||!r.remove){t();return}He||(e.elm.offsetLeft,He=!0);let n;const o=e.elm;let i=0;const a=r.remove;let f=0;const c=[];for(n in a)c.push(n),o.style[n]=a[n];const $=getComputedStyle(o)["transition-property"].split(", ");for(;i<$.length;++i)c.indexOf($[i])!==-1&&f++;o.addEventListener("transitionend",function(_){_.target===o&&--f,f===0&&t()})}function Va(){He=!1}const Ya={pre:Va,create:Tr,update:Tr,destroy:Ka,remove:Ja};function ve(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function Xa(e){var t=e.data,r=t.fn.apply(void 0,t.args);ve(r,e)}function Za(e,t){var r=e.data,n=t.data,o,i=r.args,a=n.args;for((r.fn!==n.fn||i.length!==a.length)&&ve(n.fn.apply(void 0,a),t),o=0;o<a.length;++o)if(i[o]!==a[o]){ve(n.fn.apply(void 0,a),t);return}ve(e,t)}function Qa(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),wt(e,{key:t,hook:{init:Xa,prepatch:Za},fn:r,args:n})}function _e(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return Ae.create({start:function(f){n?i=function(b){_n(b,n),f.next(b)}:i=function(b){f.next(b)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function bn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!bn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function _n(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(ts(t))t(e)&&e.preventDefault();else if(typeof t=="object")bn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function ts(e){return typeof e=="function"}var es=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=lt(tt.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(tt.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=_e(document,t,r.useCapture,r.preventDefault);var i=lt(o);return i._isCycleSource=this._name,i},e}(),rs=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=lt(tt.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(tt.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=_e(document.body,t,r.useCapture,r.preventDefault);var i=lt(o);return i._isCycleSource=this._name,i},e}();function ns(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function os(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function is(e){return e.nodeType===11}function as(e){if(typeof e!="string"&&!ns(e))throw new Error("Given container is not a DOM element neither a selector string.")}function ss(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function wn(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function ir(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var Sn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!ir(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function us(e){return Array.prototype.slice.call(e)}var On=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=wn(t),n=new Sn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:us(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),ne=globalThis&&globalThis.__assign||function(){return ne=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ne.apply(this,arguments)};function fs(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=An(r),i=ne({},n,{data:ne({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return ne({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function An(e){return{type:os(e)?"sibling":"total",scope:e}}var En=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(f,c){return new e(f._rootElement$,f._sanitation$,f._namespace.concat(An(c)),f._isolateModule,f._eventDelegator,f._name)},this.isolateSink=fs(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new On(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=lt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=lt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new es(this._name);if(t==="body")return new rs(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=lt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Jt={},ls=bt&&bt.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,f=i.length;a<f;a++,o++)n[o]=i[a];return n};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.SampleCombineOperator=Jt.SampleCombineListener=void 0;var cs=st,Mt={},Pn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Mt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Jt.SampleCombineListener=Pn;var $n=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Mt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Mt,r[i]._add(new Pn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Mt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Mt&&(this.Nn>0||r._n(ls([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Mt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Mt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Mt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Jt.SampleCombineOperator=$n;var Mn;Mn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new cs.Stream(new $n(o,t))}};var ps=Jt.default=Mn;globalThis&&globalThis.__assign;function Nn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,f=o<i?t.slice(o+1,i):void 0,c=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:f,className:c}}function ds(e){var t=Nn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(f){return o[f]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var ee;typeof self!="undefined"?ee=self:typeof window!="undefined"?ee=window:typeof global!="undefined"?ee=global:ee=Function("return this")();var Ir=ee.Symbol;typeof Ir=="function"&&Ir("parent");var hs=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(is(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Nn(t),n=r.tagName,o=r.id,i=ds(t),a=t.data||{},f=a.props||{},c=f.id,b=c===void 0?o:c,$=typeof b=="string"&&b.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return $?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return St("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",f=i?"."+i.split(" ").join("."):"",c=wt(""+n.toLowerCase()+a+f,{},t);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),vs=[Ya,qa,Ga,Wa,Ua],Dn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var f=this.mapper(t[a]),c=o[1][f];c||(c=[void 0,{}],o[1][f]=c),o=c}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var f=this.mapper(t[a]),c=o[1][f];if(!c)if(r)c=[void 0,{}],o[1][f]=c;else return;o=c}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),ys=function(){function e(){this.namespaceTree=new Dn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,f=a.isolate;Array.isArray(f)&&t.insertElement(f,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,f=n.elm,c=n.data,b=c===void 0?{}:c,$=a.isolate,_=b.isolate;ir($,_)||Array.isArray($)&&t.removeElement(o),Array.isArray(_)&&t.insertElement(_,f)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),ms=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),we=globalThis&&globalThis.__assign||function(){return we=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},we.apply(this,arguments)},gs=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],bs=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Dn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=tt.never(),a,f=new Sn(r,this.isolateModule),c=o===void 0?gs.indexOf(t)===-1:o;if(c)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,f,t,n),i;var b=[];this.nonBubblingListenersToAdd.forEach(function(O){return b.push(O)});for(var $=void 0,_=0,E=b.length,S=function(O){O[0];var d=O[1],g=O[2];return O[3],t===d&&ir(g.namespace,r)};!$&&_<E;){var s=b[_];$=S(s)?s:$,_++}var u=$,w;if(u){var y=u[0];w=y}else{var l=new On(r,this.isolateModule);a=this.insertListener(i,f,t,n),u=[i,t,l,a],w=i,this.nonBubblingListenersToAdd.add(u),this.setupNonBubblingListener(u)}var p=this,m=null;return tt.create({start:function(O){m=w.subscribe(O)},stop:function(){u[0];var O=u[1],d=u[2];u[3];var g=d.call();g.forEach(function(A){var T=A.subs;T&&T[O]&&(T[O].unsubscribe(),delete T[O])}),p.nonBubblingListenersToAdd.delete(u),m.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,f){if(a.has(t)){n.push([f,t]);var c=t.subs;c&&Object.keys(c).forEach(function(b){c[b].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,f=a.length;do i.push(this.getVirtualListeners(n,a,!0,f)),f--;while(f>=0&&a[f].type!=="total");for(var c=we({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),b=0;b<i.length;b++)i[b].add(c,a.length);return c},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var f=this.virtualListeners.getDefault(r,function(){return new Map},i);return f.has(t)||f.set(t,new ms),f.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=_e(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(f){var c,b=f.subs;if(!b||!b[r]){var $=_e(f,r,!1,!1,o.passive).subscribe({next:function(E){return a.onEvent(r,E,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var _=a.nonBubblingListeners.get(r);if(!_)return;_.set(f,{sub:$,destination:o}),f.subs=we({},b,(c={},c[r]=$,c))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,f=i.passive;a.unsubscribe(),this.setupDOMListener(o,f),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var f=this.isolateModule.getNamespace(r.target);if(!f)return;var c=this.getVirtualListeners(t,f);this.bubble(t,r.target,a,i,c,f,f.length-1,!0,n),this.bubble(t,r.target,a,i,c,f,f.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,f,c,b){!c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,b);var $=n,_=f;if(r===n)if(f>=0&&a[f].type==="sibling")$=this.isolateModule.getElement(a,f),_--;else return;r.parentNode&&$&&this.bubble(t,r.parentNode,$,o,i,a,_,c,b),c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,b)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,f){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(c){if(c.passive===f&&c.useCapture===a){var b=wn(c.scopeChecker.namespace);!o.propagationHasBeenStopped&&c.scopeChecker.isDirectlyInScope(r)&&(b!==""&&r.matches(b)||b===""&&r===n)&&(_n(o,c.preventDefault),c.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function _s(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function ws(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ss(e){return tt.merge(e,tt.never())}function Os(e){return e.elm}function As(e){(console.error||console.log)(e)}function Es(){return tt.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Ps(e){return e.data=e.data||{},e.data.isolate=[],e}function $s(e,t){t===void 0&&(t={}),as(e);var r=t.modules||vs;_s(r);var n=new ys,o=t&&t.snabbdomOptions||void 0,i=La([n.createModule()].concat(r),void 0,o),a=Es(),f,c,b=tt.create({start:function(_){c=new MutationObserver(function(){return _.next(null)})},stop:function(){c.disconnect()}});function $(_,E){E===void 0&&(E="DOM"),ws(_);var S=tt.create(),s=a.map(function(){var p=ss(e)||document.body;return f=new hs(p),p}),u=_.remember();u.addListener({}),b.addListener({});var w=s.map(function(p){return tt.merge(u.endWhen(S),S).map(function(m){return f.call(m)}).startWith(Ps(ze(p))).fold(i,ze(p)).drop(1).map(Os).startWith(p).map(function(m){return c.observe(m,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),m}).compose(Ss)}).flatten(),l=fn(a,b).endWhen(S).compose(ps(w)).map(function(p){return p[1]}).remember();l.addListener({error:t.reportSnabbdomError||As});var y=new bs(l,n);return new En(l,S,[],n,y,E)}return $}var Fe="___",Tn=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=lt(tt.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=lt(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=lt(o||tt.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+Fe+r)},e.prototype.isolateSink=function(t,r){return lt(tt.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(Fe+r)!==-1||(n.sel+="."+Fe+r),n}))},e}();function Ms(e){return new Tn(e)}function Ns(e){return typeof e=="string"&&e.length>0}function In(e){return Ns(e)&&(e[0]==="."||e[0]==="#")}function Pe(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",f=typeof o!="undefined";return In(r)?a&&f?wt(e+r,n,o):a?wt(e+r,n):wt(e+r,{}):f?wt(e+r,n,o):a?wt(e,r,n):i?wt(e,r):wt(e,{})}}var Cn=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],xn=Pe("svg");Cn.forEach(function(e){xn[e]=Pe(e)});var kn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],P={SVG_TAG_NAMES:Cn,TAG_NAMES:kn,svg:xn,isSelector:In,createTagFunction:Pe};kn.forEach(function(e){P[e]=Pe(e)});var Ds=P.svg,Ts=P.a,Is=P.abbr,Cs=P.address,xs=P.area,ks=P.article,js=P.aside,Ls=P.audio,Rs=P.b,Fs=P.base,Bs=P.bdi,Ws=P.bdo,qs=P.blockquote,Us=P.body,Gs=P.br,zs=P.button,Hs=P.canvas,Ks=P.caption,Js=P.cite,Vs=P.code,Ys=P.col,Xs=P.colgroup,Zs=P.dd,Qs=P.del,tu=P.dfn,eu=P.dir,ru=P.div,nu=P.dl,ou=P.dt,iu=P.em,au=P.embed,su=P.fieldset,uu=P.figcaption,fu=P.figure,lu=P.footer,cu=P.form,pu=P.h1,du=P.h2,hu=P.h3,vu=P.h4,yu=P.h5,mu=P.h6,gu=P.head,bu=P.header,_u=P.hgroup,wu=P.hr,Su=P.html,Ou=P.i,Au=P.iframe,Eu=P.img,Pu=P.input,$u=P.ins,Mu=P.kbd,Nu=P.keygen,Du=P.label,Tu=P.legend,Iu=P.li,Cu=P.link,xu=P.main,ku=P.map,ju=P.mark,Lu=P.menu,Ru=P.meta,Fu=P.nav,Bu=P.noscript,Wu=P.object,qu=P.ol,Uu=P.optgroup,Gu=P.option,zu=P.p,Hu=P.param,Ku=P.pre,Ju=P.progress,Vu=P.q,Yu=P.rp,Xu=P.rt,Zu=P.ruby,Qu=P.s,tf=P.samp,ef=P.script,rf=P.section,nf=P.select,of=P.small,af=P.source,sf=P.span,uf=P.strong,ff=P.style,lf=P.sub,cf=P.sup,pf=P.table,df=P.tbody,hf=P.td,vf=P.textarea,yf=P.tfoot,mf=P.th,gf=P.thead,bf=P.title,_f=P.tr,wf=P.u,Sf=P.ul,Of=P.video,Af=Object.freeze(Object.defineProperty({__proto__:null,svg:Ds,a:Ts,abbr:Is,address:Cs,area:xs,article:ks,aside:js,audio:Ls,b:Rs,base:Fs,bdi:Bs,bdo:Ws,blockquote:qs,body:Us,br:Gs,button:zs,canvas:Hs,caption:Ks,cite:Js,code:Vs,col:Ys,colgroup:Xs,dd:Zs,del:Qs,dfn:tu,dir:eu,div:ru,dl:nu,dt:ou,em:iu,embed:au,fieldset:su,figcaption:uu,figure:fu,footer:lu,form:cu,h1:pu,h2:du,h3:hu,h4:vu,h5:yu,h6:mu,head:gu,header:bu,hgroup:_u,hr:wu,html:Su,i:Ou,iframe:Au,img:Eu,input:Pu,ins:$u,kbd:Mu,keygen:Nu,label:Du,legend:Tu,li:Iu,link:Cu,main:xu,map:ku,mark:ju,menu:Lu,meta:Ru,nav:Fu,noscript:Bu,object:Wu,ol:qu,optgroup:Uu,option:Gu,p:zu,param:Hu,pre:Ku,progress:Ju,q:Vu,rp:Yu,rt:Xu,ruby:Zu,s:Qu,samp:tf,script:ef,section:rf,select:nf,small:of,source:af,span:sf,strong:uf,style:ff,sub:lf,sup:cf,table:pf,tbody:df,td:hf,textarea:vf,tfoot:yf,th:mf,thead:gf,title:bf,tr:_f,u:wf,ul:Sf,video:Of,thunk:Qa,MainDOMSource:En,makeDOMDriver:$s,mockDOMSource:Ms,MockedDOMSource:Tn,h:wt},Symbol.toStringTag,{value:"Module"})),jn=Se(Af),Ln={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(st),r=Ee;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var a=new EventTarget;return i.subscribe({next:function(c){return a.dispatchEvent(new CustomEvent("data",{detail:c}))}}),{select:function(c){var b=!c,$=Array.isArray(c)?c:[c],_,E=t.default.create({start:function(s){_=function(w){var l=w.detail,y=l&&l.data||null;(b||$.includes(l.type))&&s.next(y)},a.addEventListener("data",_)},stop:function(s){return a.removeEventListener("data",_)}});return(0,r.adapt)(E)}}}})(Ln);var Rn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(Rn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=$;var t=ha,r=er,n=jn,o=a(Ln),i=a(Rn);function a(_){return _&&_.__esModule?_:{default:_}}function f(_,E){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(_);E&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(_,u).enumerable})),S.push.apply(S,s)}return S}function c(_){for(var E=1;E<arguments.length;E++){var S=arguments[E]!=null?arguments[E]:{};E%2?f(Object(S),!0).forEach(function(s){b(_,s,S[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(S)):f(Object(S)).forEach(function(s){Object.defineProperty(_,s,Object.getOwnPropertyDescriptor(S,s))})}return _}function b(_,E,S){return E in _?Object.defineProperty(_,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[E]=S,_}function $(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=(0,r.withState)(_,"STATE"),s={EVENTS:o.default,DOM:(0,n.makeDOMDriver)("#root"),LOG:i.default},u=c(c({},s),E);return(0,t.run)(S,u)}})(hn);var Fn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=E;function t(l,y){return o(l)||n(l,y)||c(l,y)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(l,y){var p=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var m=[],O=!0,d=!1,g,A;try{for(p=p.call(l);!(O=(g=p.next()).done)&&(m.push(g.value),!(y&&m.length===y));O=!0);}catch(T){d=!0,A=T}finally{try{!O&&p.return!=null&&p.return()}finally{if(d)throw A}}return m}}function o(l){if(Array.isArray(l))return l}function i(l){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(l)}function a(l){return $(l)||b(l)||c(l)||f()}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(l,y){if(!!l){if(typeof l=="string")return _(l,y);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return _(l,y)}}function b(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function $(l){if(Array.isArray(l))return _(l)}function _(l,y){(y==null||y>l.length)&&(y=l.length);for(var p=0,m=new Array(y);p<y;p++)m[p]=l[p];return m}function E(){for(var l=arguments.length,y=new Array(l),p=0;p<l;p++)y[p]=arguments[p];return y.reduce(function(m,O){return typeof O=="string"&&!m.includes(O)?m.push.apply(m,a(s(O))):Array.isArray(O)?m.push.apply(m,a(u(O))):i(O)==="object"&&m.push.apply(m,a(w(O))),m},[]).join(" ")}function S(l){return/^[a-zA-Z0-9-_]+$/.test(l)}function s(l){if(typeof l!="string")throw new Error("Class name must be a string");return l.trim().split(" ").reduce(function(y,p){if(p.trim().length===0)return y;if(!S(p))throw new Error("".concat(p," is not a valid CSS class name"));return y.push(p),y},[])}function u(l){return l.map(s).flat()}function w(l){var y=Object.entries(l).filter(function(p){var m=t(p,2);m[0];var O=m[1];return typeof O=="function"?O():!!O}).map(function(p){var m=t(p,2),O=m[0];m[1];var d=O.trim();if(!S(d))throw new Error("".concat(d," is not a valid CSS class name"));return d});return y}})(Fn);(function(e){function t(s){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t(s)}Object.defineProperty(e,"__esModule",{value:!0});var r={component:!0,ABORT:!0,collection:!0,switchable:!0,processForm:!0,run:!0,classes:!0,xs:!0};Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return n.ABORT}}),Object.defineProperty(e,"classes",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"xs",{enumerable:!0,get:function(){return $.default}});var n=S(Br),o=_(Qe),i=_(pn),a=_(dn),f=_(hn),c=_(Fn),b=jn;Object.keys(b).forEach(function(s){s==="default"||s==="__esModule"||Object.prototype.hasOwnProperty.call(r,s)||s in e&&e[s]===b[s]||Object.defineProperty(e,s,{enumerable:!0,get:function(){return b[s]}})});var $=_(st);function _(s){return s&&s.__esModule?s:{default:s}}function E(s){if(typeof WeakMap!="function")return null;var u=new WeakMap,w=new WeakMap;return(E=function(y){return y?w:u})(s)}function S(s,u){if(!u&&s&&s.__esModule)return s;if(s===null||t(s)!=="object"&&typeof s!="function")return{default:s};var w=E(u);if(w&&w.has(s))return w.get(s);var l={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in s)if(p!=="default"&&Object.prototype.hasOwnProperty.call(s,p)){var m=y?Object.getOwnPropertyDescriptor(s,p):null;m&&(m.get||m.set)?Object.defineProperty(l,p,m):l[p]=s[p]}return l.default=s,w&&w.set(s,l),l}})(yt);var ft={},Bn={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.vnode=rt.undefinedv=rt.text=rt.svg=rt.string=rt.object=rt.number=rt.nullv=rt.fun=rt.array=void 0;function Ke(e){return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(e)}var Ef=function(t){return t===null};rt.nullv=Ef;var Pf=function(t){return t===void 0};rt.undefinedv=Pf;var Wn=function(t){return typeof t=="number"};rt.number=Wn;var qn=function(t){return typeof t=="string"};rt.string=qn;var $f=function(t){return qn(t)||Wn(t)};rt.text=$f;var Mf=function(t){return Array.isArray(t)};rt.array=Mf;var Un=function(t){return Ke(t)==="object"&&t!==null};rt.object=Un;var Nf=function(t){return typeof t=="function"};rt.fun=Nf;var Df=function(t){return Un(t)&&"sel"in t&&"data"in t&&"children"in t&&"text"in t};rt.vnode=Df;var Tf={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},If=function(t){return t.sel in Tf};rt.svg=If;var ht={},ye=Object.prototype.hasOwnProperty,Gn=Object.prototype.toString,Cr=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,kr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Gn.call(t)==="[object Array]"},jr=function(t){if(!t||Gn.call(t)!=="[object Object]")return!1;var r=ye.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&ye.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||ye.call(t,o)},Lr=function(t,r){Cr&&r.name==="__proto__"?Cr(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},Rr=function(t,r){if(r==="__proto__")if(ye.call(t,r)){if(xr)return xr(t,r).value}else return;return t[r]},Cf=function e(){var t,r,n,o,i,a,f=arguments[0],c=1,b=arguments.length,$=!1;for(typeof f=="boolean"&&($=f,f=arguments[1]||{},c=2),(f==null||typeof f!="object"&&typeof f!="function")&&(f={});c<b;++c)if(t=arguments[c],t!=null)for(r in t)n=Rr(f,r),o=Rr(t,r),f!==o&&($&&o&&(jr(o)||(i=kr(o)))?(i?(i=!1,a=n&&kr(n)?n:[]):a=n&&jr(n)?n:{},Lr(f,{name:r,newValue:e($,a,o)})):typeof o!="undefined"&&Lr(f,{name:r,newValue:o}));return f};function Je(e){return Je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(e)}Object.defineProperty(ht,"__esModule",{value:!0});ht.reduceDeep=ht.omit=ht.mapObject=ht.flatifyKeys=ht.extend=ht.deepifyKeys=ht.assign=void 0;var zn=kf(Cf),Hn=xf(rt);function Kn(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Kn=function(o){return o?r:t})(e)}function xf(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Je(e)!=="object"&&typeof e!="function")return{default:e};var r=Kn(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function kf(e){return e&&e.__esModule?e:{default:e}}function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jn=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zn.default.apply(void 0,[!0].concat(r))};ht.extend=Jn;var jf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zn.default.apply(void 0,[!1].concat(r))};ht.assign=jf;var Lf=function e(t,r,n){for(var o=n,i=0;i<t.length;i++){var a=t[i];Hn.array(a)?o=e(a,r,o):o=r(o,a)}return o};ht.reduceDeep=Lf;var ae=function(t,r){return Object.keys(t).map(function(n){return r(n,t[n])}).reduce(function(n,o){return Jn(n,o)},{})};ht.mapObject=ae;var Rf=function(t,r){return ae(t,function(n,o){var i=n.indexOf("-");if(i>-1&&r[n.slice(0,i)]!==void 0){var a=Kt({},n.slice(i+1),o);return Kt({},n.slice(0,i),a)}return Kt({},n,o)})};ht.deepifyKeys=Rf;var Ff=function e(t){return ae(t,function(r,n){return Hn.object(n)?ae(e(n),function(o,i){return Kt({},"".concat(r,"-").concat(o),i)}):Kt({},r,n)})};ht.flatifyKeys=Ff;var Bf=function(t,r){return ae(r,function(n,o){return n!==t?Kt({},n,o):{}})};ht.omit=Bf;(function(e){function t(y){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(y)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.createElementWithModules=e.createElement=void 0;var r=i(rt),n=i(ht);function o(y){if(typeof WeakMap!="function")return null;var p=new WeakMap,m=new WeakMap;return(o=function(d){return d?m:p})(y)}function i(y,p){if(!p&&y&&y.__esModule)return y;if(y===null||t(y)!=="object"&&typeof y!="function")return{default:y};var m=o(p);if(m&&m.has(y))return m.get(y);var O={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in y)if(g!=="default"&&Object.prototype.hasOwnProperty.call(y,g)){var A=d?Object.getOwnPropertyDescriptor(y,g):null;A&&(A.get||A.set)?Object.defineProperty(O,g,A):O[g]=y[g]}return O.default=y,m&&m.set(y,O),O}function a(y,p,m){return p in y?Object.defineProperty(y,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):y[p]=m,y}var f=function(p){return r.text(p)?{text:p,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},c=function y(p){return r.svg(p)?n.assign(p,{data:n.omit("props",n.extend(p.data,{ns:"http://www.w3.org/2000/svg",attrs:n.omit("className",n.extend(p.data.props,{class:p.data.props?p.data.props.className:void 0}))}))},{children:r.undefinedv(p.children)?void 0:p.children.map(function(m){return y(m)})}):p},b={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},$=function(p,m){return n.mapObject(p,function(O,d){var g=a({},O,d);if(b[O]&&m[b[O]]!==void 0)return a({},b[O],g);if(b[O]===null)return{};for(var A=Object.keys(b),T=0;T<A.length;T++){var I=A[T];if(I.charAt(I.length-1)==="*"&&O.indexOf(I.slice(0,-1))===0&&m[b[I]]!==void 0)return a({},b[I],g)}return m[O]!==void 0?a({},m[O]?m[O]:O,d):m.props!==void 0?{props:g}:g})},_=function(p,m){return c($(n.deepifyKeys(p,m),m))},E=function(p){return p.length>1||!r.text(p[0])?void 0:p[0].toString()},S=function(p){return n.reduceDeep(p,function(m,O){var d=r.vnode(O)?O:f(O);return m.push(d),m},[])},s={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},u=function(p){return function(m,O){r.fun(m)&&(m=m.name||"unnamed",console.error("JSX Error: A capitalized tag name was used, but was transpiled to a nameless function.  Either use a named function or a lower case tag name to avoid this problem"));for(var d=arguments.length,g=new Array(d>2?d-2:0),A=2;A<d;A++)g[A-2]=arguments[A];var T=E(g);return c({sel:m,data:O?_(O,p):{},children:T?void 0:S(g),text:T,elm:void 0,key:O?O.key:void 0})}};e.createElementWithModules=u;var w=u(s);e.createElement=w;var l={createElement:w,createElementWithModules:u};e.default=l})(Bn);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"jsx",{enumerable:!0,get:function(){return t.createElement}});var t=Bn})(ft);let Wf=0;function qf(e){const t=new Array(16).fill().map((b,$)=>$),r=e.filter(b=>!b.deleted).map(b=>b.row*4+b.column),n=t.filter(b=>!r.includes(b));if(n.length===0)return e;const o=Math.floor(Math.random()*n.length),i=n[o],a=i%4,f=Math.floor(i/4),c=Math.ceil(Math.random()*1e3)<900?2:4;return[...e,{id:Wf++,value:c,row:f,column:a,new:!0}]}function Ve(e,t){let r,n,o,i,a;t=="UP"||t=="DOWN"?(r="column",n="row"):(r="row",n="column"),t=="UP"||t=="LEFT"?(o=0,i=3,a=1):(o=3,i=0,a=-1);const f=e.filter($=>!$.deleted),c=[];let b=!1;for(let $=0;$<=3;$++){let _=null,E=o;for(let S=o;a==1?S<=i:S>=i;S+=a){const s=f.find(u=>u[r]===$&&u[n]===S);if(s){const u=s[n];if(s[n]=E,_!==null&&!_.merged&&s.value===_.value){const l=s.value*2;s.value=l,_.value=l,s[n]-=a,s.merged=!0,b=!0}else b=b||E!==u,E+=a;const w={id:s.id,value:s.value,row:s.row,column:s.column,merged:s.merged};_=w,c.push(w)}}}if(b){const $=e.map(_=>c.find(E=>E.id===_.id)||_);return $.forEach(_=>{_.deleted=_.deleted||_.merged,delete _.merged}),$}return!1}function Uf(e){const t=e.map(o=>qt({},o));let r=Ve(t,"UP"),n=Ve(t,"LEFT");return!(!r&&!n)}const Gf=1e3;var zf=yt.component({name:"TILE",model:{HIDE:(e,t,r)=>e.deleted?(setTimeout(n=>r("DELETE"),Gf),{id:e.id,value:0,row:e.row,column:e.column,deleted:!0,hidden:!0}):yt.ABORT,DELETE:e=>{}},intent:({STATE:e,DOM:t})=>{const r=e.stream.filter(i=>i.deleted&&!i.hidden),n=t.select(".tile").events("transitionend");return{HIDE:r.map(i=>{const a=yt.xs.of(null).compose(ra(500));return yt.xs.merge(a,n).take(1)}).flatten()}},view:({state:e})=>{const{id:t,value:r,row:n,column:o,hidden:i}=e,a=yt.classes("tile",`tile-${t}`,{new:!!e.new}),f=Math.log2(e.value||0),c=Math.floor(50*f/11+30),b={"--row":`       ${n}`,"--col":`       ${o}`,"--tile-color":`${c}%`,display:i?"none":"inherit"};return ft.jsx("div",{className:a,id:`tile-${t}`,style:b},r)}});const Hf="ArrowUp",Kf="ArrowDown",Jf="ArrowLeft",Vf="ArrowRight",Yf=100,Fr={tiles:[],over:!1,max:2,score:0,locked:!1};var Xf=yt.component({name:"BOARD",initialState:Fr,calculated:{max:e=>e.tiles.filter(t=>t&&!t.deleted).reduce((t,r)=>t>r.value?t:r.value,0),lost:e=>!e.over&&e.tiles.filter(t=>!t.deleted).length===16&&!Uf(e.tiles)},model:{RESTART:(e,t,r)=>(r("ADD_TILE"),r("ADD_TILE"),qt({},Fr)),MOVE:(e,t,r)=>{if(e.locked||e.over)return yt.ABORT;const n=Ve(e.tiles,t);if(!n)return yt.ABORT;const o=n.filter(i=>i.deleted).reduce((i,a)=>i+a.value,0);return setTimeout(i=>{r("ADD_TILE")},Yf),ue(qt({},e),{tiles:n,score:e.score+o,locked:!0})},ADD_TILE:(e,t)=>{const r=qf(e.tiles);return ue(qt({},e),{tiles:r,locked:!1})},GAME_OVER:(e,t)=>ue(qt({},e),{over:!0,won:t})},intent:({STATE:e,DOM:t})=>{const r=t.select("document").events("keydown").map(s=>s.key),n=s=>u=>u===s,o=r.filter(n(Hf)).mapTo("UP"),i=r.filter(n(Kf)).mapTo("DOWN"),a=r.filter(n(Jf)).mapTo("LEFT"),f=r.filter(n(Vf)).mapTo("RIGHT"),c=yt.xs.merge(o,i,a,f),b=e.stream.filter(s=>!s.over&&s.max===2048).mapTo(!0),$=e.stream.filter(s=>s.lost===!0).mapTo(!1),_=yt.xs.merge(b,$),E=t.select(".restart, .gameover").events("click"),S=yt.xs.fromArray([1,2]);return{RESTART:E,GAME_OVER:_,MOVE:c,ADD_TILE:S}},view:({state:e,tiles:t})=>{const{score:r,max:n,over:o,won:i}=e;return ft.jsx("div",{className:"container"},ft.jsx("h1",null,"Sygnal 2048"),ft.jsx("div",{className:"info"},ft.jsx("div",{className:"largest"},"Largest: ",n),ft.jsx("div",{className:"score"},"Score: ",r)),ft.jsx("div",{className:"board-container"},ft.jsx("div",{className:"slot-board"},Array(16).fill().map(a=>ft.jsx("div",{className:"slot"}))),ft.jsx("div",{className:"tile-board"},t),o&&i&&ft.jsx("div",{className:"gameover won"},ft.jsx("span",{className:"won-message"},"YOU WON!!")),o&&!i&&ft.jsx("div",{className:"gameover lost"},ft.jsx("span",{className:"lost-message"},"GAME OVER"))),ft.jsx("div",{className:"restart-container"},ft.jsx("input",{type:"button",className:"restart",value:"Start Over"})))},children:{tiles:yt.collection(zf,"tiles")}});yt.run(Xf);
