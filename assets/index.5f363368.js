var Gn=Object.defineProperty,zn=Object.defineProperties;var Hn=Object.getOwnPropertyDescriptors;var fr=Object.getOwnPropertySymbols;var Kn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable;var cr=(e,t,r)=>t in e?Gn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Kn.call(t,r)&&cr(e,r,t[r]);if(fr)for(var r of fr(t))Jn.call(t,r)&&cr(e,r,t[r]);return e},ie=(e,t)=>zn(e,Hn(t));const Vn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};Vn();var mt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function be(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var ht={},Fr={},at={},Br={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(Br);var Yn=Br,pr=Object.prototype.toString,qr=function(t){var r=pr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&pr.call(t.callee)==="[object Function]"),n},Wr;if(!Object.keys){var ae=Object.prototype.hasOwnProperty,dr=Object.prototype.toString,Xn=qr,hr=Object.prototype.propertyIsEnumerable,Zn=!hr.call({toString:null},"toString"),Qn=hr.call(function(){},"prototype"),se=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],$e=function(e){var t=e.constructor;return t&&t.prototype===e},to={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},eo=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!to["$"+e]&&ae.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{$e(window[e])}catch{return!0}}catch{return!0}return!1}(),ro=function(e){if(typeof window=="undefined"||!eo)return $e(e);try{return $e(e)}catch{return!1}};Wr=function(t){var r=t!==null&&typeof t=="object",n=dr.call(t)==="[object Function]",o=Xn(t),i=r&&dr.call(t)==="[object String]",a=[];if(!r&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var u=Qn&&n;if(i&&t.length>0&&!ae.call(t,0))for(var c=0;c<t.length;++c)a.push(String(c));if(o&&t.length>0)for(var v=0;v<t.length;++v)a.push(String(v));else for(var O in t)!(u&&O==="prototype")&&ae.call(t,O)&&a.push(String(O));if(Zn)for(var y=ro(t),P=0;P<se.length;++P)!(y&&se[P]==="constructor")&&ae.call(t,se[P])&&a.push(se[P]);return a}}var no=Wr,oo=Array.prototype.slice,io=qr,vr=Object.keys,le=vr?function(t){return vr(t)}:no,yr=Object.keys;le.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return io(n)?yr(oo.call(n)):yr(n)})}else Object.keys=le;return Object.keys||le};var ao=le,so=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},mr=typeof Symbol!="undefined"&&Symbol,uo=so,lo=function(){return typeof mr!="function"||typeof Symbol!="function"||typeof mr("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:uo()},fo="Function.prototype.bind called on incompatible ",Ne=Array.prototype.slice,co=Object.prototype.toString,po="[object Function]",ho=function(t){var r=this;if(typeof r!="function"||co.call(r)!==po)throw new TypeError(fo+r);for(var n=Ne.call(arguments,1),o,i=function(){if(this instanceof o){var O=r.apply(this,n.concat(Ne.call(arguments)));return Object(O)===O?O:this}else return r.apply(t,n.concat(Ne.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],c=0;c<a;c++)u.push("$"+c);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var v=function(){};v.prototype=r.prototype,o.prototype=new v,v.prototype=null}return o},vo=ho,Ur=Function.prototype.bind||vo,yo=Ur,mo=yo.call(Function.call,Object.prototype.hasOwnProperty),H,re=SyntaxError,Gr=Function,Gt=TypeError,Te=function(e){try{return Gr('"use strict"; return ('+e+").constructor;")()}catch{}},Lt=Object.getOwnPropertyDescriptor;if(Lt)try{Lt({},"")}catch{Lt=null}var Me=function(){throw new Gt},go=Lt?function(){try{return arguments.callee,Me}catch{try{return Lt(arguments,"callee").get}catch{return Me}}}():Me,Wt=lo(),$t=Object.getPrototypeOf||function(e){return e.__proto__},Ut={},bo=typeof Uint8Array=="undefined"?H:$t(Uint8Array),zt={"%AggregateError%":typeof AggregateError=="undefined"?H:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?H:ArrayBuffer,"%ArrayIteratorPrototype%":Wt?$t([][Symbol.iterator]()):H,"%AsyncFromSyncIteratorPrototype%":H,"%AsyncFunction%":Ut,"%AsyncGenerator%":Ut,"%AsyncGeneratorFunction%":Ut,"%AsyncIteratorPrototype%":Ut,"%Atomics%":typeof Atomics=="undefined"?H:Atomics,"%BigInt%":typeof BigInt=="undefined"?H:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?H:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?H:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?H:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?H:FinalizationRegistry,"%Function%":Gr,"%GeneratorFunction%":Ut,"%Int8Array%":typeof Int8Array=="undefined"?H:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?H:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?H:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Wt?$t($t([][Symbol.iterator]())):H,"%JSON%":typeof JSON=="object"?JSON:H,"%Map%":typeof Map=="undefined"?H:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Wt?H:$t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?H:Promise,"%Proxy%":typeof Proxy=="undefined"?H:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?H:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?H:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Wt?H:$t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?H:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Wt?$t(""[Symbol.iterator]()):H,"%Symbol%":Wt?Symbol:H,"%SyntaxError%":re,"%ThrowTypeError%":go,"%TypedArray%":bo,"%TypeError%":Gt,"%Uint8Array%":typeof Uint8Array=="undefined"?H:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?H:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?H:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?H:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?H:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?H:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?H:WeakSet},_o=function e(t){var r;if(t==="%AsyncFunction%")r=Te("async function () {}");else if(t==="%GeneratorFunction%")r=Te("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Te("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&(r=$t(o.prototype))}return zt[t]=r,r},gr={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_e=Ur,he=mo,wo=_e.call(Function.call,Array.prototype.concat),So=_e.call(Function.apply,Array.prototype.splice),br=_e.call(Function.call,String.prototype.replace),ve=_e.call(Function.call,String.prototype.slice),Oo=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ao=/\\(\\)?/g,Eo=function(t){var r=ve(t,0,1),n=ve(t,-1);if(r==="%"&&n!=="%")throw new re("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new re("invalid intrinsic syntax, expected opening `%`");var o=[];return br(t,Oo,function(i,a,u,c){o[o.length]=u?br(c,Ao,"$1"):a||i}),o},Po=function(t,r){var n=t,o;if(he(gr,n)&&(o=gr[n],n="%"+o[0]+"%"),he(zt,n)){var i=zt[n];if(i===Ut&&(i=_o(n)),typeof i=="undefined"&&!r)throw new Gt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new re("intrinsic "+t+" does not exist!")},$o=function(t,r){if(typeof t!="string"||t.length===0)throw new Gt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Gt('"allowMissing" argument must be a boolean');var n=Eo(t),o=n.length>0?n[0]:"",i=Po("%"+o+"%",r),a=i.name,u=i.value,c=!1,v=i.alias;v&&(o=v[0],So(n,wo([0,1],v)));for(var O=1,y=!0;O<n.length;O+=1){var P=n[O],g=ve(P,0,1),s=ve(P,-1);if((g==='"'||g==="'"||g==="`"||s==='"'||s==="'"||s==="`")&&g!==s)throw new re("property names with quotes must have matching quotes");if((P==="constructor"||!y)&&(c=!0),o+="."+P,a="%"+o+"%",he(zt,a))u=zt[a];else if(u!=null){if(!(P in u)){if(!r)throw new Gt("base intrinsic for "+t+" exists, but the property is not available.");return}if(Lt&&O+1>=n.length){var l=Lt(u,P);y=!!l,y&&"get"in l&&!("originalValue"in l.get)?u=l.get:u=u[P]}else y=he(u,P),u=u[P];y&&!c&&(zt[a]=u)}}return u},No=$o,Le=No("%Object.defineProperty%",!0),Re=function(){if(Le)try{return Le({},"a",{value:1}),!0}catch{return!1}return!1};Re.hasArrayLengthDefineBug=function(){if(!Re())return null;try{return Le([],"length",{value:1}).length!==1}catch{return!0}};var To=Re,Mo=ao,Io=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Do=Object.prototype.toString,Co=Array.prototype.concat,zr=Object.defineProperty,ko=function(e){return typeof e=="function"&&Do.call(e)==="[object Function]"},jo=To(),Hr=zr&&jo,xo=function(e,t,r,n){t in e&&(!ko(n)||!n())||(Hr?zr(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},Kr=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Mo(t);Io&&(n=Co.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)xo(e,n[o],t[n[o]],r[n[o]])};Kr.supportsDescriptors=!!Hr;var Jr=Kr,te={exports:{}};typeof self!="undefined"?te.exports=self:typeof window!="undefined"?te.exports=window:te.exports=Function("return this")();var Lo=te.exports,Vr=function(){return typeof mt!="object"||!mt||mt.Math!==Math||mt.Array!==Array?Lo:mt},Ro=Jr,Fo=Vr,Bo=function(){var t=Fo();if(Ro.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},qo=Jr,Wo=te.exports,Yr=Vr,Uo=Bo,Go=Yr(),Xr=function(){return Go};qo(Xr,{getPolyfill:Yr,implementation:Wo,shim:Uo});var zo=Xr,Ho=mt&&mt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(at,"__esModule",{value:!0});at.NO_IL=He=at.NO=at.MemoryStream=we=at.Stream=void 0;var Ko=Yn,Jo=zo,ue=Ko.default(Jo.getPolyfill()),N={},He=at.NO=N;function pt(){}function fe(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Vo(e,t){return function(n){return e(n)&&t(n)}}function Ke(e,t,r){try{return e.f(t)}catch(n){return r._e(n),N}}var xt={_n:pt,_e:pt,_c:pt};at.NO_IL=xt;function _r(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Yo=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),Xo=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),Zo=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new Xo(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),Qo=function(){function e(t){this.type="merge",this.insArr=t,this.out=N,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===N)return;t._c()}},e}(),ti=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==N&&r.up(t,this.i)){var o=fe(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==N&&--t.Nc===0&&t.out._c()},e}(),ei=function(){function e(t){this.type="combine",this.insArr=t,this.out=N,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===N?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=N,r[i]._add(new ti(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=N,this.ils=[],this.vals=[]},e}(),ri=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),ni=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(pt,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),oi=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),ii=function(){function e(t,r){this.type="debug",this.ins=t,this.out=N,this.s=pt,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this.s,o=this.l;if(n!==pt)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),ai=function(){function e(t,r){this.type="drop",this.ins=r,this.out=N,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),si=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),ui=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=N,this.o=t,this.oil=xt}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new si(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=N,this.oil=xt},e.prototype.end=function(){var t=this.out;t!==N&&t._c()},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.end()},e}(),Ie=function(){function e(t,r){this.type="filter",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Ke(this,t,r);n===N||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),li=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=N,this.op.less()},e}(),fi=function(){function e(t){this.type="flatten",this.ins=t,this.out=N,this.open=!0,this.inner=N,this.il=xt}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=N,this.il=xt,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==N&&this.inner._remove(this.il),this.out=N,this.open=!0,this.inner=N,this.il=xt},e.prototype.less=function(){var t=this.out;t!==N&&!this.open&&this.inner===N&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=this,o=n.inner,i=n.il;o!==N&&i!==xt&&o._remove(i),(this.inner=t)._add(this.il=new li(r,this))}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),ci=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=N,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Ke(this,t,r);n!==N&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),pi=function(){function e(t){this.type="last",this.ins=t,this.out=N,this.has=!1,this.val=N}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N,this.val=N},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),di=function(){function e(t,r){this.type="map",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=Ke(this,t,r);n!==N&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),hi=function(){function e(t){this.type="remember",this.ins=t,this.out=N}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),vi=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=N,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;r!==N&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==N)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),yi=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=N,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=N},e}(),mi=function(){function e(t,r){this.type="take",this.ins=r,this.out=N,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=N},e.prototype._n=function(t){var r=this.out;if(r!==N){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==N&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==N&&t._c()},e}(),Je=function(){function e(t){this._prod=t||N,this._ils=[],this._stopID=N,this._dl=N,this._d=!1,this._target=null,this._err=N}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=fe(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===N){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=fe(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=fe(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==N&&this._prod._stop(),this._err=N,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=N,this._stopID=N},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==N)clearTimeout(this._stopID),this._stopID=N;else{var o=this._prod;o!==N&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==N&&o.length<=0?(this._err=N,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==N)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof Et?Et:e},e.prototype.addListener=function(t){t._n=t.next||pt,t._e=t.error||pt,t._c=t.complete||pt,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Yo(this,t)},e.prototype[ue]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");_r(t)}return new e(t)},e.createWithMemory=function(t){return t&&_r(t),new Et(t)},e.never=function(){return new e({_start:pt,_stop:pt})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:pt})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:pt})},e.from=function(t){if(typeof t[ue]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new ri(t))},e.fromPromise=function(t){return new e(new ni(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[ue]=="function"?t[ue]():t;return new e(new Zo(r))},e.periodic=function(t){return new e(new oi(t))},e.prototype._map=function(t){return new(this.ctor())(new di(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof Ie?new e(new Ie(Vo(r.f,t),r.ins)):new e(new Ie(t,this))},e.prototype.take=function(t){return new(this.ctor())(new mi(t,this))},e.prototype.drop=function(t){return new e(new ai(t,this))},e.prototype.last=function(){return new e(new pi(this))},e.prototype.startWith=function(t){return new Et(new yi(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new ui(t,this))},e.prototype.fold=function(t,r){return new Et(new ci(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new vi(t,this))},e.prototype.flatten=function(){return new e(new fi(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new Et(new hi(this))},e.prototype.debug=function(t){return new(this.ctor())(new ii(this,t))},e.prototype.imitate=function(t){if(t instanceof Et)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||pt,t._e=t.error||pt,t._c=t.complete||pt,this._dl=t):(this._d=!1,this._dl=N)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new Qo(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ei(r))},e}(),we=at.Stream=Je,Et=function(e){Ho(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==N)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=N;else if(this._has)r._n(this._v);else{var i=this._prod;i!==N&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Je);at.MemoryStream=Et;var gi=Je,tt=at.default=gi,Se={};Object.defineProperty(Se,"__esModule",{value:!0});function Zr(){var e;return typeof window!="undefined"?e=window:typeof mt!="undefined"?e=mt:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function bi(e){Zr().adaptStream=e}Se.setAdapt=bi;function _i(e){return Zr().adaptStream(e)}var ut=Se.adapt=_i;function wi(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Si(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i!="undefined"){n[o]=i;return}var a=t["*"];if(typeof a!="undefined"){n[o]=a;return}n[o]=r}),n}function Oi(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function Ai(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=ut(i.isolateSink(tt.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var Qr=0;function Fe(){return"cycle"+ ++Qr}function ne(e,t){t===void 0&&(t=Fe()),wi(e,t);var r=typeof t=="object"?Fe():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=Si(i,n,r),v=Oi(i,c),O=e.apply(void 0,[v].concat(a)),y=Ai(i,O,c);return y}}ne.reset=function(){return Qr=0};function Ei(e){return e===void 0&&(e=Fe()),function(t){return ne(t,e)}}var Pi=Object.freeze(Object.defineProperty({__proto__:null,default:ne,toIsolated:Ei},Symbol.toStringTag,{value:"Module"})),tn=be(Pi),Ve={},Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.DropRepeatsOperator=void 0;var $i=at,De={},en=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=De,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=De},e.prototype._n=function(t){var r=this.out;if(!!r){var n=this.v;n!==De&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;!t||t._c()},e}();Kt.DropRepeatsOperator=en;function Ni(e){return e===void 0&&(e=void 0),function(r){return new $i.Stream(new en(r,e))}}var Ti=Kt.default=Ni,Be=globalThis&&globalThis.__assign||function(){return Be=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Be.apply(this,arguments)};function Mi(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r=="undefined"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function rn(e){return typeof e=="string"||typeof e=="number"?function(r){if(typeof r!="undefined")return r[e]}:e.get}function Ii(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?Mi(r,e,n):typeof r=="undefined"?(o={},o[e]=n,o):Be({},r,(i={},i[e]=n,i))}:e.set}function nn(e,t){return e.select(t)}function on(e,t){var r=rn(t),n=Ii(t);return e.map(function(o){return function(a){var u=r(a),c=o(u);return u===c?a:n(a,c)}})}var an=function(){function e(t,r){this.isolateSource=nn,this.isolateSink=on,this._stream=t.filter(function(n){return typeof n!="undefined"}).compose(Ti()).remember(),this._name=r,this.stream=ut(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=rn(t);return new e(this._stream.map(r),this._name)},e}(),Di=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),Ci=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,u=0;u<a;++u){var c=r[u],v=c._key,O=tt.fromObservable(c[i]||tt.never());n.has(v)||(n.set(v,new Di(o,this,O)),O._add(n.get(v)))}n.forEach(function(y,P){(!t.dict.has(P)||!t.dict.get(P))&&(y.ins._remove(y),y.ins=null,y.out=null,n.delete(P))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function ki(e){return function(r){return new we(new Ci(e,r))}}var ji=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=He,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),xi=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],u=a._key;if(!n.has(u))return;var c=n.get(u).val;if(c===He)return;o[i]=c}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,u=r.length,c=!1;if(n.forEach(function(g,s){a.has(s)||(g.ins._remove(g),g.ins=null,g.out=null,g.val=null,n.delete(s),c=!0)}),u===0){o._n([]);return}for(var v=0;v<u;++v){var O=r[v],y=O._key;if(!O[i])throw new Error("pickCombine found an undefined child sink stream");var P=tt.fromObservable(O[i]);n.has(y)||(n.set(y,new ji(y,o,this,P)),P._add(n.get(y)))}c&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function Li(e){return function(r){return new we(new xi(e,r))}}var ye=globalThis&&globalThis.__assign||function(){return ye=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ye.apply(this,arguments)},sn=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return ut(this._instances$.compose(ki(t)))},e.prototype.pickCombine=function(t){return ut(this._instances$.compose(Li(t)))},e}();function Ri(e){return{"*":null}}function Fi(e,t){return{get:function(r){if(typeof r!="undefined"){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r=="undefined"?[n]:typeof n=="undefined"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var Bi={get:function(e){return e},set:function(e,t){return t}};function qi(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||Ri,a=tt.fromObservable(r[n].stream),u=a.fold(function(c,v){var O,y,P,g,s=c.dict;if(Array.isArray(v)){for(var l=Array(v.length),m=new Set,f=0,A=v.length;f<A;++f){var _=""+(o?o(v[f],f):f);if(m.add(_),s.has(_))l[f]=s.get(_);else{var S=o?Fi(o,_):""+f,T=i(_),p=typeof T=="string"?(O={"*":T},O[n]=S,O):ye({},T,(y={},y[n]=S,y)),b=e.itemFactory?e.itemFactory(v[f],f):e.item,w=ne(b,p)(r);s.set(_,w),l[f]=w}l[f]._key=_}return s.forEach(function(I,D){m.has(D)||s.delete(D)}),m.clear(),{dict:s,arr:l}}else{s.clear();var _=""+(o?o(v,0):"this"),S=Bi,T=i(_),p=typeof T=="string"?(P={"*":T},P[n]=S,P):ye({},T,(g={},g[n]=S,g)),b=e.itemFactory?e.itemFactory(v,0):e.item,w=ne(b,p)(r);return s.set(_,w),{dict:s,arr:[w]}}},{dict:new Map,arr:[]});return e.collectSinks(new sn(u))}}var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});var Wi=at,Ui=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;!r||r._n(t)},e.prototype._e=function(t){var r=this.out;!r||r._e(t)},e.prototype._c=function(){var t=this.out;if(!!t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function Gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Wi.Stream(new Ui(e))}var un=Ye.default=Gi,ln={};Object.defineProperty(ln,"__esModule",{value:!0});function zi(){return typeof queueMicrotask!="undefined"?queueMicrotask:typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout}var fn=ln.default=zi,Ce=fn();function Hi(e,t){return t===void 0&&(t="state"),function(n){var o=tt.create(),i=o.fold(function(v,O){return O(v)},void 0).drop(1),a=n;a[t]=new an(i,t);var u=e(a);if(u[t]){var c=un(tt.fromObservable(u[t]),tt.never());c.subscribe({next:function(v){return Ce(function(){return o._n(v)})},error:function(v){return Ce(function(){return o._e(v)})},complete:function(){return Ce(function(){return o._c()})}})}return u}}var Ki=Object.freeze(Object.defineProperty({__proto__:null,StateSource:an,isolateSource:nn,isolateSink:on,Instances:sn,withState:Hi,makeCollection:qi},Symbol.toStringTag,{value:"Module"})),Xe=be(Ki);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var t=n(tn),r=Xe;function n(g){return g&&g.__esModule?g:{default:g}}function o(g,s,l){return s in g?Object.defineProperty(g,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):g[s]=l,g}function i(g,s){return O(g)||v(g,s)||u(g,s)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(g,s){if(!!g){if(typeof g=="string")return c(g,s);var l=Object.prototype.toString.call(g).slice(8,-1);if(l==="Object"&&g.constructor&&(l=g.constructor.name),l==="Map"||l==="Set")return Array.from(g);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return c(g,s)}}function c(g,s){(s==null||s>g.length)&&(s=g.length);for(var l=0,m=new Array(s);l<s;l++)m[l]=g[l];return m}function v(g,s){var l=g==null?null:typeof Symbol!="undefined"&&g[Symbol.iterator]||g["@@iterator"];if(l!=null){var m=[],f=!0,A=!1,_,S;try{for(l=l.call(g);!(f=(_=l.next()).done)&&(m.push(_.value),!(s&&m.length===s));f=!0);}catch(T){A=!0,S=T}finally{try{!f&&l.return!=null&&l.return()}finally{if(A)throw S}}return m}}function O(g){if(Array.isArray(g))return g}function y(g,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["DOM"],m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["EVENTS"],f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";return function(A){var _={item:g,itemKey:function(p){return p.id},itemScope:function(p){return p},channel:f,collectSinks:function(p){return Object.entries(A).reduce(function(b,w){var I=i(w,2),D=I[0];return I[1],l.includes(D)?b[D]=p.pickCombine(D):b[D]=p.pickMerge(D),b},{})}},S=o({},f,s);return m.forEach(function(T){return S[T]=null}),l.forEach(function(T){return S[T]=null}),P(_,S,A)}}function P(g,s,l){return(0,t.default)((0,r.makeCollection)(g),s)(l)}})(Ve);var Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var Ji=at,Vi=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(!!r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(!!t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function Yi(e){return function(r){return new Ji.Stream(new Vi(e,r))}}var Xi=Ze.default=Yi,Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});var Zt=at,Zi=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=Zt.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;!n||(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=Zt.NO},this.dt))},e.prototype._e=function(t){var r=this.out;!r||(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;!t||(this.clearInterval(),this.t!=Zt.NO&&t._n(this.t),this.t=Zt.NO,t._c())},e}();function Qi(e){return function(r){return new Zt.Stream(new Zi(e,r))}}Qe.default=Qi;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ABORT=void 0,e.default=Nt;var t=y(tn),r=y(Ve),n=Xe,o=O(at),i=y(Ze),a=y(Ye),u=y(Qe),c=y(Kt);function v(h){if(typeof WeakMap!="function")return null;var M=new WeakMap,d=new WeakMap;return(v=function(C){return C?d:M})(h)}function O(h,M){if(!M&&h&&h.__esModule)return h;if(h===null||F(h)!=="object"&&typeof h!="function")return{default:h};var d=v(M);if(d&&d.has(h))return d.get(h);var $={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in h)if(k!=="default"&&Object.prototype.hasOwnProperty.call(h,k)){var L=C?Object.getOwnPropertyDescriptor(h,k):null;L&&(L.get||L.set)?Object.defineProperty($,k,L):$[k]=h[k]}return $.default=h,d&&d.set(h,$),$}function y(h){return h&&h.__esModule?h:{default:h}}function P(h){return l(h)||s(h)||A(h)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function l(h){if(Array.isArray(h))return _(h)}function m(h,M){return T(h)||S(h,M)||A(h,M)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(h,M){if(!!h){if(typeof h=="string")return _(h,M);var d=Object.prototype.toString.call(h).slice(8,-1);if(d==="Object"&&h.constructor&&(d=h.constructor.name),d==="Map"||d==="Set")return Array.from(h);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _(h,M)}}function _(h,M){(M==null||M>h.length)&&(M=h.length);for(var d=0,$=new Array(M);d<M;d++)$[d]=h[d];return $}function S(h,M){var d=h==null?null:typeof Symbol!="undefined"&&h[Symbol.iterator]||h["@@iterator"];if(d!=null){var $=[],C=!0,k=!1,L,G;try{for(d=d.call(h);!(C=(L=d.next()).done)&&($.push(L.value),!(M&&$.length===M));C=!0);}catch(j){k=!0,G=j}finally{try{!C&&d.return!=null&&d.return()}finally{if(k)throw G}}return $}}function T(h){if(Array.isArray(h))return h}function p(h,M){if(!(h instanceof M))throw new TypeError("Cannot call a class as a function")}function b(h,M){for(var d=0;d<M.length;d++){var $=M[d];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(h,$.key,$)}}function w(h,M,d){return M&&b(h.prototype,M),d&&b(h,d),Object.defineProperty(h,"prototype",{writable:!1}),h}function I(h,M){var d=Object.keys(h);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(h);M&&($=$.filter(function(C){return Object.getOwnPropertyDescriptor(h,C).enumerable})),d.push.apply(d,$)}return d}function D(h){for(var M=1;M<arguments.length;M++){var d=arguments[M]!=null?arguments[M]:{};M%2?I(Object(d),!0).forEach(function($){R(h,$,d[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)):I(Object(d)).forEach(function($){Object.defineProperty(h,$,Object.getOwnPropertyDescriptor(d,$))})}return h}function R(h,M,d){return M in h?Object.defineProperty(h,M,{value:d,enumerable:!0,configurable:!0,writable:!0}):h[M]=d,h}function F(h){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},F(h)}var X=typeof window!="undefined"&&window||process&&process.env||{},z="request",lt="BOOTSTRAP",ot="INITIALIZE",ft="HYDRATE",vt=!0,gt="~#~#~ABORT~#~#~";e.ABORT=gt;function Nt(h){var M=h.name,d=h.sources,$=h.isolateOpts,C=h.stateSourceName,k=C===void 0?"STATE":C;if(d&&F(d)!=="object")throw new Error("Sources must be a Cycle.js sources object:",M);var L;typeof $=="string"?L=R({},k,$):$===!0?L={}:L=$;var G=typeof d=="undefined";if(F(L)=="object"){var j=function(q){var x=D(D({},h),{},{sources:q});return new wt(x).sinks};return G?(0,t.default)(j,L):(0,t.default)(j,L)(d)}else return G?function(B){return new wt(D(D({},h),{},{sources:B})).sinks}:new wt(h).sinks}var wt=function(){function h(M){var d=this,$=M.name,C=$===void 0?"NO NAME":$,k=M.sources,L=M.intent,G=M.request,j=M.model,B=M.response,q=M.view,x=M.children,W=x===void 0?{}:x,U=M.components,V=U===void 0?{}:U,et=M.initialState,nt=M.calculated,rt=M.storeCalculatedInState,K=rt===void 0?!0:rt,Z=M.DOMSourceName,Q=Z===void 0?"DOM":Z,J=M.stateSourceName,it=J===void 0?"STATE":J,st=M.requestSourceName,Y=st===void 0?"HTTP":st;if(p(this,h),!k||F(k)!="object")throw new Error("Missing or invalid sources");this.name=C,this.sources=k,this.intent=L,this.request=G,this.model=j,this.response=B,this.view=q,this.children=W,this.components=V,this.initialState=et,this.calculated=nt,this.storeCalculatedInState=K,this.DOMSourceName=Q,this.stateSourceName=it,this.requestSourceName=Y,this.sourceNames=Object.keys(k),this.isSubComponent=this.sourceNames.includes("props$");var yt=k[it]&&k[it].stream;yt&&(this.currentState=et||{},this.sources[this.stateSourceName]=new n.StateSource(yt.map(function(St){return d.currentState=St,St}))),vt&&typeof this.intent=="undefined"&&typeof this.model=="undefined"&&(this.initialState=et||!0,this.intent=function(St){return{__NOOP_ACTION__:o.default.never()}},this.model={__NOOP_ACTION__:function(Rt){return Rt}}),vt=!1,this.log=Jt(C),this.initIntent$(),this.initAction$(),this.initResponse$(),this.initState(),this.initModel$(),this.initSendResponse$(),this.initChildren$(),this.initSubComponentSink$(),this.initVdom$(),this.initSinks()}return w(h,[{key:"initIntent$",value:function(){if(!!this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof o.Stream)&&F(this.intent$)!="object")throw new Error("Intent must return either an action$ stream or map of event streams")}}},{key:"initAction$",value:function(){var d=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=o.default.never();return}var $;if(this.intent$ instanceof o.Stream)$=this.intent$;else{var C=Object.entries(this.intent$).map(function(B){var q=m(B,2),x=q[0],W=q[1];return W.map(function(U){return{type:x,data:U}})});$=o.default.merge.apply(o.default,[o.default.never()].concat(P(C)))}var k=$ instanceof o.Stream?$:$.apply&&$(this.sources)||o.default.never(),L=(0,a.default)(o.default.of({type:lt}),k).compose((0,i.default)(10)),G;d&&typeof d.select=="function"?G=d.select("initial").flatten():G=o.default.never();var j=G.map(function(B){return{type:ft,data:B}});this.action$=o.default.merge(L,j).compose(this.log(function(B){var q=B.type;return"Action triggered: <".concat(q,">")}))}},{key:"initResponse$",value:function(){var d=this;if(typeof this.request!="undefined"){if(F(this.request)!="object")throw new Error("The request parameter must be an object");var $=this.sources[this.requestSourceName],C=Object.entries(this.request),k=C.reduce(function(L,G){var j=m(G,2),B=j[0],q=j[1],x=B.toLowerCase();if(typeof $[x]!="function")throw new Error("Invalid method in request object:",B);var W=Object.entries(q),U=W.reduce(function(et,nt){var rt=m(nt,2),K=rt[0],Z=rt[1],Q="[".concat(x.toUpperCase(),"]:").concat(K||"none"),J=F(Z);if(J==="undefined")throw new Error("Action for '".concat(K,"' route in request object not specified"));if(J!=="string"&&J!=="function")throw new Error("Invalid action for '".concat(K,"' route: expecting string or function"));var it=J==="function"?"[ FUNCTION ]":"< ".concat(Z," >");console.log("[".concat(d.name,"] Adding ").concat(d.requestSourceName," route:"),x.toUpperCase(),"'".concat(K,"' <").concat(it,">"));var st=$[x](K).compose((0,c.default)(function(Y,yt){return Y.id==yt.id})).map(function(Y){if(!Y||!Y.id)throw new Error("No id found in request: ".concat(Q));try{var yt=Y.id,St=Y.params,Rt=Y.body,Ae=Y.cookies,Ft=J==="function"?"FUNCTION":Z,sr={params:St,body:Rt,cookies:Ae,req:Y},At={type:Ft,data:Rt,req:Y,_reqId:yt,_action:Ft},Vt=new Date().toISOString(),Tt=Y.get?Y.get("host"):"0.0.0.0";if(console.log("".concat(Vt," ").concat(Tt," ").concat(Y.method," ").concat(Y.url)),X.DEBUG&&d.action$.setDebugListener({next:function(Ot){var Bt=Ot.type;return console.log("[".concat(d.name,"] Action from ").concat(d.requestSourceName," request: <").concat(Bt,">"))}}),J==="function"){var Mt=d.addCalculated(d.currentState),It=Z(Mt,Y);return o.default.of(D(D({},At),{},{data:It}))}else{d.action$.shamefullySendNext(At);var Ee=Object.entries(d.sources),Pe=Ee.reduce(function(Dt,Ot){var Bt=m(Ot,2),ur=Bt[0],Yt=Bt[1];if(!Yt||typeof Yt[z]!="function")return Dt;var Ct=Yt[z](yt);return[].concat(P(Dt),[Ct])},[]);return o.default.merge.apply(o.default,P(Pe))}}catch(Dt){console.error(Dt)}}).flatten();return[].concat(P(et),[st])},[]),V=o.default.merge.apply(o.default,P(U));return[].concat(P(L),[V])},[]);if(this.response$=o.default.merge.apply(o.default,P(k)).compose(this.log(function(L){return L._action?"[".concat(d.requestSourceName,"] response data received for Action: <").concat(L._action,">"):"[".concat(d.requestSourceName,"] response data received from FUNCTION")})),typeof this.response!="undefined"&&typeof this.response$=="undefined")throw new Error("Cannot have a response parameter without a request parameter")}}},{key:"initState",value:function(){var d=this;this.model!=null&&(this.model[ot]===void 0?this.model[ot]=R({},this.stateSourceName,function($,C){return D({},d.addCalculated(C))}):Object.keys(this.model[ot]).forEach(function($){$!==d.stateSourceName&&(console.warn("".concat(ot," can only be used with the ").concat(d.stateSourceName," source... disregarding ").concat($)),delete d.model[ot][$])}))}},{key:"initModel$",value:function(){var d=this;if(typeof this.model=="undefined"){this.model$=this.sourceNames.reduce(function(q,x){return q[x]=o.default.never(),q},{});return}var $={type:ot,data:this.initialState},C=this.initialState?(0,a.default)(o.default.of($),this.action$).compose((0,i.default)(0)):this.action$,k=this.makeOnAction(C,!0,this.action$),L=this.makeOnAction(this.action$,!1,this.action$),G=Object.entries(this.model),j={};G.forEach(function(q){var x=m(q,2),W=x[0],U=x[1];if(typeof U=="function"&&(U=R({},d.stateSourceName,U)),F(U)!=="object")throw new Error("Entry for each action must be an object: ".concat(d.name," ").concat(W));var V=Object.entries(U);V.forEach(function(et){var nt=m(et,2),rt=nt[0],K=nt[1],Z=rt==d.stateSourceName,Q=Z?k:L,J=Q(W,K),it=J.compose(d.log(function(st){if(Z)return"State reducer added: <".concat(W,">");var Y=st&&(st.type||st.command||st.name||st.key||Array.isArray(st)&&"Array"||st);return"Data sent to [".concat(rt,"]: <").concat(W,"> ").concat(Y)}));Array.isArray(j[rt])?j[rt].push(it):j[rt]=[it]})});var B=Object.entries(j).reduce(function(q,x){var W=m(x,2),U=W[0],V=W[1];return q[U]=o.default.merge.apply(o.default,[o.default.never()].concat(P(V))),q},{});this.model$=B}},{key:"initSendResponse$",value:function(){var d=this,$=F(this.response);if($!="function"&&$!="undefined")throw new Error("The response parameter must be a function");if($=="undefined"){this.response$&&this.response$.subscribe({next:this.log(function(j){var B=j._reqId,q=j._action;return"Unhandled response for request: ".concat(q," ").concat(B)})}),this.sendResponse$=o.default.never();return}var C={select:function(B){return typeof B=="undefined"?d.response$:(Array.isArray(B)||(B=[B]),d.response$.filter(function(q){var x=q._action;return B.length>0?x==="FUNCTION"||B.includes(x):!0}))}},k=this.response(C);if(F(k)!="object")throw new Error("The response function must return an object");var L=Object.entries(k),G=L.reduce(function(j,B){var q=m(B,2),x=q[0],W=q[1],U=W.map(function(V){var et=V._reqId,nt=V._action,rt=V.data;if(!et)throw new Error("No request id found for response for: ".concat(x));return{_reqId:et,_action:nt,command:x,data:rt}});return[].concat(P(j),[U])},[]);this.sendResponse$=o.default.merge.apply(o.default,P(G)).compose(this.log(function(j){j._reqId;var B=j._action;return"[".concat(d.requestSourceName,"] response sent for: <").concat(B,">")}))}},{key:"initChildren$",value:function(){var d=this,$=this.sourceNames.reduce(function(C,k){return k==d.DOMSourceName?C[k]={}:C[k]=[],C},{});this.children$=Object.entries(this.children).reduce(function(C,k){var L=m(k,2),G=L[0],j=L[1],B=j(d.sources);return d.sourceNames.forEach(function(q){q==d.DOMSourceName?C[q][G]=B[q]:C[q].push(B[q])}),C},$)}},{key:"initSubComponentSink$",value:function(){var d=this,$=o.default.create({start:function(k){d.newSubComponentSinks=k.next.bind(k)},stop:function(k){}});$.subscribe({next:function(k){return k}}),this.subComponentSink$=$.filter(function(C){return Object.keys(C).length>0})}},{key:"initVdom$",value:function(){var d=this;if(typeof this.view!="function"){this.vdom$=o.default.of(null);return}var $=this.sources[this.stateSourceName],C=D({},this.children$[this.DOMSourceName]),k=$&&$.isolateSource($,{get:function(W){return d.addCalculated(W)}}),L=k&&k.stream||o.default.never();C.state=L,C[this.stateSourceName]=L,this.sources.props$&&(C.props=this.sources.props$),this.sources.children$&&(C.children=this.sources.children$);var G=Object.entries(C).reduce(function(x,W){var U=m(W,2),V=U[0],et=U[1];return x.names.push(V),x.streams.push(et),x},{names:[],streams:[]}),j=o.default.combine.apply(o.default,P(G.streams)),B=j.compose((0,u.default)(1)).map(function(x){return G.names.reduce(function(W,U,V){return W[U]=x[V],W},{})}),q=Object.keys(this.components);this.vdom$=B.fold(function(x,W){var U=d.view(W)||{sel:"div",data:{},children:[]},V=or(U,q),et=Object.entries(V),nt={"::ROOT::":U};if(et.length===0)return nt;var rt=et.reduce(function(K,Z){var Q=m(Z,2),J=Q[0],it=Q[1],st=it.sel,Y=it.data,yt=Y.props||{},St=it.children||[],Rt=Y.isCollection||!1,Ae=Y.isSwitchable||!1;if(x[J]){var Ft=x[J];return K[J]=Ft,Ft.props$.shamefullySendNext(yt),Ft.children$.shamefullySendNext(St),K}var sr=d.components[st],At=o.default.create().startWith(yt),Vt=o.default.create().startWith(St),Tt,Mt;if(Rt){var It;Tt=new n.StateSource(At.map(function(Ct){return Ct.value}).remember());var Ee=D(D({},d.sources),{},(It={},R(It,d.stateSourceName,Tt),R(It,"props$",At),R(It,"children$",Vt),It)),Pe=d.components[Y.component],Dt={get:function(kt){return kt},set:function(kt){return kt}};Mt=(0,r.default)(Pe,Dt)(Ee)}else if(!Ae){var Ot,Bt=function(kt){var oe=kt.state;if(typeof oe=="undefined")return kt;if(F(oe)!=="object")return oe;var lr=D({},kt);return delete lr.state,D(D({},lr),oe)};Tt=new n.StateSource(At.map(Bt));var ur=D(D({},d.sources),{},(Ot={},R(Ot,d.stateSourceName,Tt),R(Ot,"props$",At),R(Ot,"children$",Vt),Ot));Mt=sr(ur)}var Yt=Mt[d.DOMSourceName];return Mt[d.DOMSourceName]=Tt.stream.map(function(Ct){return Yt.compose((0,u.default)(2))}).flatten(),K[J]={sink$:Mt,props$:At,children$:Vt},K},nt);return rt},{}).map(function(x){var W=x["::ROOT::"],U=[],V=Object.entries(x).filter(function(K){var Z=m(K,1),Q=Z[0];return Q!=="::ROOT::"});if(V.length===0)return o.default.of(W);var et=V.reduce(function(K,Z){var Q=m(Z,2);Q[0];var J=Q[1];return Object.entries(J.sink$).forEach(function(it){var st=m(it,2),Y=st[0],yt=st[1];K[Y]||(K[Y]=[]),Y!==d.DOMSourceName&&K[Y].push(yt)}),K},{}),nt=Object.entries(et).reduce(function(K,Z){var Q=m(Z,2),J=Q[0],it=Q[1];return K[J]=o.default.merge.apply(o.default,P(it)),K},{});d.newSubComponentSinks(nt);var rt=V.map(function(K){var Z=m(K,2),Q=Z[0],J=Z[1];return U.push(Q),J.sink$[d.DOMSourceName]});return rt.length===0?o.default.of(W):o.default.combine.apply(o.default,P(rt)).map(function(K){var Z=K.reduce(function(J,it,st){return J[U[st]]=it,J},{}),Q=ir(W,Z,q);return Q})}).flatten().filter(function(x){return!!x}).remember().compose(this.log("View Rendered"))}},{key:"initSinks",value:function(){var d=this;this.sinks=this.sourceNames.reduce(function($,C){if(C==d.DOMSourceName)return $;var k=d.subComponentSink$?d.subComponentSink$.map(function(L){return L[C]}).filter(function(L){return!!L}).flatten():o.default.never();return C===d.stateSourceName?$[C]=o.default.merge.apply(o.default,[d.model$[C]||o.default.never(),d.sources[d.stateSourceName].stream.filter(function(L){return!1})].concat(P(d.children$[C]))):$[C]=o.default.merge.apply(o.default,[d.model$[C]||o.default.never(),k].concat(P(d.children$[C]))),$},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[this.requestSourceName]=o.default.merge(this.sendResponse$,this.sinks[this.requestSourceName])}},{key:"makeOnAction",value:function(d){var $=this,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,k=arguments.length>2?arguments[2]:void 0;return k=k||d,function(L,G){var j=d.filter(function(x){var W=x.type;return W==L}),B;if(typeof G=="function")B=j.map(function(x){var W=function(Z,Q){var J=x._reqId||x.req&&x.req.id,it=J?F(Q)=="object"?D(D({},Q),{},{_reqId:J,_action:L}):{data:Q,_reqId:J,_action:L}:Q;setTimeout(function(){k.shamefullySendNext({type:Z,data:it})},10)},U=x.data;if(U&&U.data&&U._reqId&&(U=U.data),C)return function(K){var Z=$.isSubComponent?$.currentState:K,Q=$.addCalculated(Z),J=G(Q,U,W,x.req);return J==gt?Z:$.cleanupCalculated(J)};var V=$.addCalculated($.currentState),et=G(V,U,W,x.req),nt=F(et),rt=x._reqId||x.req&&x.req.id;if(["string","number","boolean","function"].includes(nt))return et;if(nt=="object")return D(D({},et),{},{_reqId:rt,_action:L});if(nt=="undefined")return console.warn("'undefined' value sent to ".concat(L)),et;throw new Error("Invalid reducer type for ".concat(L," ").concat(nt))}).filter(function(x){return x!=gt});else if(G===void 0||G===!0)B=j.map(function(x){var W=x.data;return W});else{var q=G;B=j.mapTo(q)}return B}}},{key:"addCalculated",value:function(d){if(!this.calculated||F(d)!=="object")return d;if(F(this.calculated)!=="object")throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");var $=Object.entries(this.calculated),C=$.reduce(function(k,L){var G=m(L,2),j=G[0],B=G[1];if(typeof B!="function")throw new Error("Missing or invalid calculator function for calculated field '".concat(j));try{k[j]=B(d)}catch(q){console.warn("Calculated field '".concat(j,"' threw an error during calculation: ").concat(q.message))}return k},{});return D(D({},d),C)}},{key:"cleanupCalculated",value:function(d){var $=this;if(this.storeCalculatedInState)return this.addCalculated(d);if(!this.calculated||!d||F(d)!=="object")return d;var C=Object.keys(this.calculated),k=D({},d);return C.forEach(function(L){$.initialState&&typeof $.initialState[L]!="undefined"?k[L]=$.initialState[L]:delete k[L]}),k}}]),h}();function Jt(h){return function(M){var d=typeof M=="function"?M:function($){return M};return function($){return $.debug(function(C){(X.DEBUG=="true"||X.DEBUG===!0)&&console.log("[".concat(h,"] ").concat(d(C)))})}}}function or(h,M){var d,$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!h)return{};if((d=h.data)!==null&&d!==void 0&&d.componentsProcessed)return{};$||(h.data.componentsProcessed=!0);var C=h.sel,k=C&&C.toLowerCase()==="collection",L=C&&C.toLowerCase()==="switchable",G=C&&["collection","swtichable"].concat(P(M)).includes(h.sel),j=h.data&&h.data.props||{},B=h.children||[],q={};if(G){var x=ar(h);if(k){if(!j.component)throw new Error("Collection element missing required 'component' property");if(typeof j.component!="string")throw new Error("Invalid 'component' property of collection element: found ".concat(F(j.component)," requires string"));if(!M.includes(j.component))throw new Error("Specified component for collection not found: ".concat(j.component));(!j.value||!Array.isArray(j.value))&&console.warn("No valid array found in the 'value' property of collection ".concat(j.component,": no collection components will be created")),h.data.isCollection=!0,h.data.component=j.component}else if(L){if(!j.components)throw new Error("Switchable element missing required 'components' property");if(F(j.components)!=="object")throw new Error("Invalid 'components' property of switchable element: found ".concat(F(j.components)," requires object mapping names to component factories"));var W=Object.values(j.components);if(!W.every(function(V){return typeof V=="function"}))throw new Error("One or more invalid component factories for switchable element is not a valid component factory");if(!j.current||typeof j.current!="string")throw new Error("Missing or invalid 'current' property for switchable element: found ".concat(F(j.current)," requires string"));var U=Object.keys(j.components);if(!U.includes(j.current))throw new Error("Component '".concat(j.current,"' not found in switchable element"));h.data.isSwitchable=!0,h.data.components=j.components,h.data.currentComponent=j.current}q[x]=h}return B.length>0&&B.map(function(V){return or(V,M,!0)}).forEach(function(V){Object.entries(V).forEach(function(et){var nt=m(et,2),rt=nt[0],K=nt[1];return q[rt]=K})}),q}function ir(h,M,d){var $,C,k,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!!h){if(($=h.data)!==null&&$!==void 0&&$.componentsInjected)return h;!L&&h.data&&(h.data.componentsInjected=!0);var G=h.sel||"NO SELECTOR",j=["collection","swtichable"].concat(P(d)).includes(G),B=h==null||(C=h.data)===null||C===void 0?void 0:C.isCollection;h==null||(k=h.data)===null||k===void 0||k.isSwitchable,h.data&&h.data.props;var q=h.children||[];if(j){var x=ar(h),W=M[x];return B?(h.sel="div",delete h.elm,h.children=W,h):W}else return q.length>0&&(h.children=q.map(function(U){return ir(U,M,d)}).flat()),h}}function ar(h){var M=h.sel,d=h.data&&h.data.props||{},$=d.id&&JSON.stringify(d.id)||JSON.stringify(d);return"".concat(M,"::").concat($)}})(Fr);var cn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=S;var t=i(at),r=n(Kt);function n(p){return p&&p.__esModule?p:{default:p}}function o(p){if(typeof WeakMap!="function")return null;var b=new WeakMap,w=new WeakMap;return(o=function(D){return D?w:b})(p)}function i(p,b){if(!b&&p&&p.__esModule)return p;if(p===null||_(p)!=="object"&&typeof p!="function")return{default:p};var w=o(b);if(w&&w.has(p))return w.get(p);var I={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in p)if(R!=="default"&&Object.prototype.hasOwnProperty.call(p,R)){var F=D?Object.getOwnPropertyDescriptor(p,R):null;F&&(F.get||F.set)?Object.defineProperty(I,R,F):I[R]=p[R]}return I.default=p,w&&w.set(p,I),I}function a(p){return v(p)||c(p)||l(p)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(p){if(typeof Symbol!="undefined"&&p[Symbol.iterator]!=null||p["@@iterator"]!=null)return Array.from(p)}function v(p){if(Array.isArray(p))return m(p)}function O(p,b){var w=Object.keys(p);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(p);b&&(I=I.filter(function(D){return Object.getOwnPropertyDescriptor(p,D).enumerable})),w.push.apply(w,I)}return w}function y(p){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?O(Object(w),!0).forEach(function(I){P(p,I,w[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(w)):O(Object(w)).forEach(function(I){Object.defineProperty(p,I,Object.getOwnPropertyDescriptor(w,I))})}return p}function P(p,b,w){return b in p?Object.defineProperty(p,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[b]=w,p}function g(p,b){return A(p)||f(p,b)||l(p,b)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(p,b){if(!!p){if(typeof p=="string")return m(p,b);var w=Object.prototype.toString.call(p).slice(8,-1);if(w==="Object"&&p.constructor&&(w=p.constructor.name),w==="Map"||w==="Set")return Array.from(p);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return m(p,b)}}function m(p,b){(b==null||b>p.length)&&(b=p.length);for(var w=0,I=new Array(b);w<b;w++)I[w]=p[w];return I}function f(p,b){var w=p==null?null:typeof Symbol!="undefined"&&p[Symbol.iterator]||p["@@iterator"];if(w!=null){var I=[],D=!0,R=!1,F,X;try{for(w=w.call(p);!(D=(F=w.next()).done)&&(I.push(F.value),!(b&&I.length===b));D=!0);}catch(z){R=!0,X=z}finally{try{!D&&w.return!=null&&w.return()}finally{if(R)throw X}}return I}}function A(p){if(Array.isArray(p))return p}function _(p){return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},_(p)}function S(p,b,w){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE",R=_(b);if(!b)throw new Error("Missing 'name$' parameter for switchable()");if(!(R==="string"||R==="function"||b instanceof t.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(b instanceof t.Stream){var F=b.compose((0,r.default)()).startWith(w).remember();return function(z){return T(p,z,F,I)}}else{var X=R==="function"&&b||function(z){return z[b]};return function(z){var lt=z&&(typeof D=="string"&&z[D]||z.STATE||z.state).stream;if(!lt instanceof t.Stream)throw new Error("Could not find the state source: ".concat(D));var ot=lt.map(X).filter(function(ft){return typeof ft=="string"}).compose((0,r.default)()).startWith(w).remember();return T(p,z,ot,I,D)}}}function T(p,b,w){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["DOM"],D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"STATE";typeof I=="string"&&(I=[I]);var R=Object.entries(p).map(function(X){var z=g(X,2),lt=z[0],ot=z[1];if(b[D]){var ft=b[D].stream,vt=t.default.combine(w,ft).filter(function(Nt){var wt=g(Nt,2),Jt=wt[0];return wt[1],Jt==lt}).map(function(Nt){var wt=g(Nt,2);wt[0];var Jt=wt[1];return Jt}).remember(),gt=new b[D].constructor(vt,b[D]._name);return[lt,ot(y(y({},b),{},{state:gt}))]}return[lt,ot(b)]}),F=Object.keys(b).reduce(function(X,z){if(I.includes(z))X[z]=w.map(function(ot){var ft=R.find(function(vt){var gt=g(vt,2),Nt=gt[0];return gt[1],Nt===ot});return ft&&ft[1][z]||t.default.never()}).flatten().remember().startWith("");else{var lt=R.filter(function(ot){var ft=g(ot,2);ft[0];var vt=ft[1];return vt[z]!==void 0}).map(function(ot){var ft=g(ot,2);ft[0];var vt=ft[1];return vt[z]});X[z]=t.default.merge.apply(t.default,a(lt))}return X},{});return F}})(cn);var pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=r(at);function r(l){return l&&l.__esModule?l:{default:l}}function n(l,m){return a(l)||i(l,m)||O(l,m)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(l,m){var f=l==null?null:typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(f!=null){var A=[],_=!0,S=!1,T,p;try{for(f=f.call(l);!(_=(T=f.next()).done)&&(A.push(T.value),!(m&&A.length===m));_=!0);}catch(b){S=!0,p=b}finally{try{!_&&f.return!=null&&f.return()}finally{if(S)throw p}}return A}}function a(l){if(Array.isArray(l))return l}function u(l,m){var f=typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(!f){if(Array.isArray(l)||(f=O(l))||m&&l&&typeof l.length=="number"){f&&(l=f);var A=0,_=function(){};return{s:_,n:function(){return A>=l.length?{done:!0}:{done:!1,value:l[A++]}},e:function(w){throw w},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,T=!1,p;return{s:function(){f=f.call(l)},n:function(){var w=f.next();return S=w.done,w},e:function(w){T=!0,p=w},f:function(){try{!S&&f.return!=null&&f.return()}finally{if(T)throw p}}}}function c(l){return P(l)||y(l)||O(l)||v()}function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(l,m){if(!!l){if(typeof l=="string")return g(l,m);var f=Object.prototype.toString.call(l).slice(8,-1);if(f==="Object"&&l.constructor&&(f=l.constructor.name),f==="Map"||f==="Set")return Array.from(l);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return g(l,m)}}function y(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function P(l){if(Array.isArray(l))return g(l)}function g(l,m){(m==null||m>l.length)&&(m=l.length);for(var f=0,A=new Array(m);f<m;f++)A[f]=l[f];return A}function s(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=m.events,A=f===void 0?["input","submit"]:f,_=m.preventDefault,S=_===void 0?!0:_;typeof A=="string"&&(A=[A]);var T=A.map(function(b){return l.events(b)}),p=t.default.merge.apply(t.default,c(T));return p.map(function(b){S&&b.preventDefault();var w=b.type==="submit"?b.srcElement:b.currentTarget,I=new FormData(w),D={};D.event=b,D.eventType=b.type;var R=w.querySelector("input[type=submit]:focus");if(R){var F=R.name,X=R.value;D[F||"submit"]=X}var z=u(I.entries()),lt;try{for(z.s();!(lt=z.n()).done;){var ot=n(lt.value,2),ft=ot[0],vt=ot[1];D[ft]=vt}}catch(gt){z.e(gt)}finally{z.f()}return D})}})(pn);var dn={};function ta(){var e;return typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function ea(e){return ta().adaptStream(e)}function ra(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=tt.create());return t}function na(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function oa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=ea(e[t]));return e}function ia(e,t){var r=fn(),n=Object.keys(e).filter(function(u){return!!t[u]}),o={},i={};n.forEach(function(u){o[u]={_n:[],_e:[]},i[u]={next:function(c){return o[u]._n.push(c)},error:function(c){return o[u]._e.push(c)},complete:function(){}}});var a=n.map(function(u){return tt.fromObservable(e[u]).subscribe(i[u])});return n.forEach(function(u){var c=t[u],v=function(y){r(function(){return c._n(y)})},O=function(y){r(function(){(console.error||console.log)(y),c._e(y)})};o[u]._n.forEach(v),o[u]._e.forEach(O),i[u].next=v,i[u].error=O,i[u]._n=v,i[u]._e=O}),o=null,function(){a.forEach(function(c){return c.unsubscribe()})}}function aa(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function sa(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function hn(e){return Object.keys(e).length===0}function vn(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(hn(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=yn(t),n=e(r.sources);typeof window!="undefined"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function yn(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(hn(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=ra(e),r=na(e,t),n=oa(r);function o(a){return ia(a,t)}function i(){sa(n),aa(t)}return{sources:n,run:o,dispose:i}}function wr(e,t){var r=vn(e,t);return typeof window!="undefined"&&window.CyclejsDevTool_startGraphSerializer&&window.CyclejsDevTool_startGraphSerializer(r.sinks),r.run()}var ua=Object.freeze(Object.defineProperty({__proto__:null,setup:vn,setupReusable:yn,run:wr,default:wr},Symbol.toStringTag,{value:"Module"})),la=be(ua);function fa(e,t){return document.createElement(e,t)}function ca(e,t,r){return document.createElementNS(e,t,r)}function pa(){return document.createDocumentFragment()}function da(e){return document.createTextNode(e)}function ha(e){return document.createComment(e)}function va(e,t,r){e.insertBefore(t,r)}function ya(e,t){e.removeChild(t)}function ma(e,t){e.appendChild(t)}function ga(e){return e.parentNode}function ba(e){return e.nextSibling}function _a(e){return e.tagName}function wa(e,t){e.textContent=t}function Sa(e){return e.textContent}function Oa(e){return e.nodeType===1}function Aa(e){return e.nodeType===3}function Ea(e){return e.nodeType===8}function Pa(e){return e.nodeType===11}const mn={createElement:fa,createElementNS:ca,createTextNode:da,createDocumentFragment:pa,createComment:ha,insertBefore:va,removeChild:ya,appendChild:ma,parentNode:ga,nextSibling:ba,tagName:_a,setTextContent:wa,getTextContent:Sa,isElement:Oa,isText:Aa,isComment:Ea,isDocumentFragment:Pa};function _t(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const qe=Array.isArray;function ce(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function ke(e){return e===void 0}function dt(e){return e!==void 0}const je=_t("",{},[],void 0,void 0);function Xt(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is);return e.sel===t.sel&&o&&i}function $a(){throw new Error("The document fragment is not supported on this platform.")}function Na(e,t){return e.isElement(t)}function Ta(e,t){return e.isDocumentFragment(t)}function Ma(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const Ia=["create","update","remove","destroy","pre","post"];function Da(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=t!==void 0?t:mn;for(const s of Ia)for(const l of e){const m=l[s];m!==void 0&&n[s].push(m)}function i(s){const l=s.id?"#"+s.id:"",m=s.getAttribute("class"),f=m?"."+m.split(" ").join("."):"";return _t(o.tagName(s).toLowerCase()+l+f,{},[],void 0,s)}function a(s){return _t(void 0,{},[],void 0,s)}function u(s,l){return function(){if(--l===0){const f=o.parentNode(s);o.removeChild(f,s)}}}function c(s,l){var m,f,A,_;let S,T=s.data;if(T!==void 0){const w=(m=T.hook)===null||m===void 0?void 0:m.init;dt(w)&&(w(s),T=s.data)}const p=s.children,b=s.sel;if(b==="!")ke(s.text)&&(s.text=""),s.elm=o.createComment(s.text);else if(b!==void 0){const w=b.indexOf("#"),I=b.indexOf(".",w),D=w>0?w:b.length,R=I>0?I:b.length,F=w!==-1||I!==-1?b.slice(0,Math.min(D,R)):b,X=s.elm=dt(T)&&dt(S=T.ns)?o.createElementNS(S,F,T):o.createElement(F,T);for(D<R&&X.setAttribute("id",b.slice(D+1,R)),I>0&&X.setAttribute("class",b.slice(R+1).replace(/\./g," ")),S=0;S<n.create.length;++S)n.create[S](je,s);if(qe(p))for(S=0;S<p.length;++S){const lt=p[S];lt!=null&&o.appendChild(X,c(lt,l))}else ce(s.text)&&o.appendChild(X,o.createTextNode(s.text));const z=s.data.hook;dt(z)&&((f=z.create)===null||f===void 0||f.call(z,je,s),z.insert&&l.push(s))}else if(((A=r==null?void 0:r.experimental)===null||A===void 0?void 0:A.fragments)&&s.children){const w=s.children;for(s.elm=((_=o.createDocumentFragment)!==null&&_!==void 0?_:$a)(),S=0;S<n.create.length;++S)n.create[S](je,s);for(S=0;S<w.length;++S){const I=w[S];I!=null&&o.appendChild(s.elm,c(I,l))}}else s.elm=o.createTextNode(s.text);return s.elm}function v(s,l,m,f,A,_){for(;f<=A;++f){const S=m[f];S!=null&&o.insertBefore(s,c(S,_),l)}}function O(s){var l,m;const f=s.data;if(f!==void 0){(m=(l=f==null?void 0:f.hook)===null||l===void 0?void 0:l.destroy)===null||m===void 0||m.call(l,s);for(let A=0;A<n.destroy.length;++A)n.destroy[A](s);if(s.children!==void 0)for(let A=0;A<s.children.length;++A){const _=s.children[A];_!=null&&typeof _!="string"&&O(_)}}}function y(s,l,m,f){for(var A,_;m<=f;++m){let S,T;const p=l[m];if(p!=null)if(dt(p.sel)){O(p),S=n.remove.length+1,T=u(p.elm,S);for(let w=0;w<n.remove.length;++w)n.remove[w](p,T);const b=(_=(A=p==null?void 0:p.data)===null||A===void 0?void 0:A.hook)===null||_===void 0?void 0:_.remove;dt(b)?b(p,T):T()}else o.removeChild(s,p.elm)}}function P(s,l,m,f){let A=0,_=0,S=l.length-1,T=l[0],p=l[S],b=m.length-1,w=m[0],I=m[b],D,R,F,X;for(;A<=S&&_<=b;)T==null?T=l[++A]:p==null?p=l[--S]:w==null?w=m[++_]:I==null?I=m[--b]:Xt(T,w)?(g(T,w,f),T=l[++A],w=m[++_]):Xt(p,I)?(g(p,I,f),p=l[--S],I=m[--b]):Xt(T,I)?(g(T,I,f),o.insertBefore(s,T.elm,o.nextSibling(p.elm)),T=l[++A],I=m[--b]):Xt(p,w)?(g(p,w,f),o.insertBefore(s,p.elm,T.elm),p=l[--S],w=m[++_]):(D===void 0&&(D=Ma(l,A,S)),R=D[w.key],ke(R)?o.insertBefore(s,c(w,f),T.elm):(F=l[R],F.sel!==w.sel?o.insertBefore(s,c(w,f),T.elm):(g(F,w,f),l[R]=void 0,o.insertBefore(s,F.elm,T.elm))),w=m[++_]);_<=b&&(X=m[b+1]==null?null:m[b+1].elm,v(s,X,m,_,b,f)),A<=S&&y(s,l,A,S)}function g(s,l,m){var f,A,_,S,T,p,b,w;const I=(f=l.data)===null||f===void 0?void 0:f.hook;(A=I==null?void 0:I.prepatch)===null||A===void 0||A.call(I,s,l);const D=l.elm=s.elm,R=s.children,F=l.children;if(s!==l){if(l.data!==void 0||dt(l.text)&&l.text!==s.text){(_=l.data)!==null&&_!==void 0||(l.data={}),(S=s.data)!==null&&S!==void 0||(s.data={});for(let X=0;X<n.update.length;++X)n.update[X](s,l);(b=(p=(T=l.data)===null||T===void 0?void 0:T.hook)===null||p===void 0?void 0:p.update)===null||b===void 0||b.call(p,s,l)}ke(l.text)?dt(R)&&dt(F)?R!==F&&P(D,R,F,m):dt(F)?(dt(s.text)&&o.setTextContent(D,""),v(D,null,F,0,F.length-1,m)):dt(R)?y(D,R,0,R.length-1):dt(s.text)&&o.setTextContent(D,""):s.text!==l.text&&(dt(R)&&y(D,R,0,R.length-1),o.setTextContent(D,l.text)),(w=I==null?void 0:I.postpatch)===null||w===void 0||w.call(I,s,l)}}return function(l,m){let f,A,_;const S=[];for(f=0;f<n.pre.length;++f)n.pre[f]();for(Na(o,l)?l=i(l):Ta(o,l)&&(l=a(l)),Xt(l,m)?g(l,m,S):(A=l.elm,_=o.parentNode(A),c(m,S),_!==null&&(o.insertBefore(_,m.elm,o.nextSibling(A)),y(_,[l],0,0))),f=0;f<S.length;++f)S[f].data.hook.insert(S[f]);for(f=0;f<n.post.length;++f)n.post[f]();return m}}function tr(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&tr(i,o.children,o.sel)}}function bt(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),qe(r)?o=r:ce(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(qe(t)?o=t:ce(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)ce(o[a])&&(o[a]=_t(void 0,void 0,void 0,o[a],void 0));return e[0]==="s"&&e[1]==="v"&&e[2]==="g"&&(e.length===3||e[3]==="."||e[3]==="#")&&tr(n,o,e),_t(e,n,o,i,void 0)}function We(e,t){const r=t!==void 0?t:mn;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",u=r.tagName(e).toLowerCase()+o+a,c={},v={},O={},y=[];let P,g,s;const l=e.attributes,m=e.childNodes;for(g=0,s=l.length;g<s;g++)P=l[g].nodeName,P[0]==="d"&&P[1]==="a"&&P[2]==="t"&&P[3]==="a"&&P[4]==="-"?v[P.slice(5)]=l[g].nodeValue||"":P!=="id"&&P!=="class"&&(c[P]=l[g].nodeValue);for(g=0,s=m.length;g<s;g++)y.push(We(m[g],t));return Object.keys(c).length>0&&(O.attrs=c),Object.keys(v).length>0&&(O.datasets=v),u[0]==="s"&&u[1]==="v"&&u[2]==="g"&&(u.length===3||u[3]==="."||u[3]==="#")&&tr(O,y,u),_t(u,O,y,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),_t(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),_t("!",{},[],n,e)):_t("",{},[],void 0,e)}const Ca="http://www.w3.org/1999/xlink",ka="http://www.w3.org/XML/1998/namespace",Sr=58,ja=120;function Or(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==ja?n.setAttribute(r,a):r.charCodeAt(3)===Sr?n.setAttributeNS(ka,r,a):r.charCodeAt(5)===Sr?n.setAttributeNS(Ca,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const xa={create:Or,update:Or};function Ar(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const La={create:Ar,update:Ar},Er=/[A-Z]/g;function Pr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)o[i]||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(Er,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(Er,"-$&").toLowerCase(),o[i]))}const Ra={create:Pr,update:Pr};function $r(e,t){let r,n,o;const i=t.elm;let a=e.data.props,u=t.data.props;if(!(!a&&!u)&&a!==u){a=a||{},u=u||{};for(r in u)n=u[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const Fa={create:$r,update:$r},Nr=typeof window!="undefined"&&window.requestAnimationFrame.bind(window)||setTimeout,Ba=function(e){Nr(function(){Nr(e)})};let Ue=!1;function qa(e,t,r){Ba(function(){e[t]=r})}function Tr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const u="delayed"in i;for(n in i)a[n]||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const c in a.delayed)r=a.delayed[c],(!u||r!==i.delayed[c])&&qa(o.style,c,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function Wa(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function Ua(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ue||(e.elm.offsetLeft,Ue=!0);let n;const o=e.elm;let i=0;const a=r.remove;let u=0;const c=[];for(n in a)c.push(n),o.style[n]=a[n];const O=getComputedStyle(o)["transition-property"].split(", ");for(;i<O.length;++i)c.indexOf(O[i])!==-1&&u++;o.addEventListener("transitionend",function(y){y.target===o&&--u,u===0&&t()})}function Ga(){Ue=!1}const za={pre:Ga,create:Tr,update:Tr,destroy:Wa,remove:Ua};function pe(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,e.data.isolate=t.data.isolate,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function Ha(e){var t=e.data,r=t.fn.apply(void 0,t.args);pe(r,e)}function Ka(e,t){var r=e.data,n=t.data,o,i=r.args,a=n.args;for((r.fn!==n.fn||i.length!==a.length)&&pe(n.fn.apply(void 0,a),t),o=0;o<a.length;++o)if(i[o]!==a[o]){pe(n.fn.apply(void 0,a),t);return}pe(e,t)}function Ja(e,t,r,n){return n===void 0&&(n=r,r=t,t=void 0),bt(e,{key:t,hook:{init:Ha,prepatch:Ka},fn:r,args:n})}function me(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return we.create({start:function(u){n?i=function(v){bn(v,n),u.next(v)}:i=function(v){u.next(v)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function gn(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!gn(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function bn(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(Va(t))t(e)&&e.preventDefault();else if(typeof t=="object")gn(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function Va(e){return typeof e=="function"}var Ya=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=ut(tt.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=ut(tt.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=me(document,t,r.useCapture,r.preventDefault);var i=ut(o);return i._isCycleSource=this._name,i},e}(),Xa=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=ut(tt.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=ut(tt.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=me(document.body,t,r.useCapture,r.preventDefault);var i=ut(o);return i._isCycleSource=this._name,i},e}();function Za(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function Qa(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function ts(e){return e.nodeType===11}function es(e){if(typeof e!="string"&&!Za(e))throw new Error("Given container is not a DOM element neither a selector string.")}function rs(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function _n(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function er(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var wn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!er(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function ns(e){return Array.prototype.slice.call(e)}var Sn=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=_n(t),n=new wn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:ns(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),ee=globalThis&&globalThis.__assign||function(){return ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ee.apply(this,arguments)};function os(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=On(r),i=ee({},n,{data:ee({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return ee({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function On(e){return{type:Qa(e)?"sibling":"total",scope:e}}var An=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(u,c){return new e(u._rootElement$,u._sanitation$,u._namespace.concat(On(c)),u._isolateModule,u._eventDelegator,u._name)},this.isolateSink=os(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new Sn(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=ut(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=ut(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new Ya(this._name);if(t==="body")return new Xa(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=ut(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Ht={},is=mt&&mt.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.SampleCombineOperator=Ht.SampleCombineListener=void 0;var as=at,Pt={},En=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==Pt&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();Ht.SampleCombineListener=En;var Pn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=Pt,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=Pt,r[i]._add(new En(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=Pt,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==Pt&&(this.Nn>0||r._n(is([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==Pt&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==Pt&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===Pt&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();Ht.SampleCombineOperator=Pn;var $n;$n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new as.Stream(new Pn(o,t))}};var ss=Ht.default=$n;globalThis&&globalThis.__assign;function Nn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,u=o<i?t.slice(o+1,i):void 0,c=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:u,className:c}}function us(e){var t=Nn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(u){return o[u]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var Qt;typeof self!="undefined"?Qt=self:typeof window!="undefined"?Qt=window:typeof global!="undefined"?Qt=global:Qt=Function("return this")();var Mr=Qt.Symbol;typeof Mr=="function"&&Mr("parent");var ls=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(ts(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=Nn(t),n=r.tagName,o=r.id,i=us(t),a=t.data||{},u=a.props||{},c=u.id,v=c===void 0?o:c,O=typeof v=="string"&&v.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return O?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return _t("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",u=i?"."+i.split(" ").join("."):"",c=bt(""+n.toLowerCase()+a+u,{},t);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),fs=[za,La,Fa,xa,Ra],Tn=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];c||(c=[void 0,{}],o[1][u]=c),o=c}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];if(!c)if(r)c=[void 0,{}],o[1][u]=c;else return;o=c}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),cs=function(){function e(){this.namespaceTree=new Tn(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(!!r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,u=a.isolate;Array.isArray(u)&&t.insertElement(u,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,u=n.elm,c=n.data,v=c===void 0?{}:c,O=a.isolate,y=v.isolate;er(O,y)||Array.isArray(O)&&t.removeElement(o),Array.isArray(y)&&t.insertElement(y,u)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),ps=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),ge=globalThis&&globalThis.__assign||function(){return ge=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ge.apply(this,arguments)},ds=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],hs=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new Tn(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=tt.never(),a,u=new wn(r,this.isolateModule),c=o===void 0?ds.indexOf(t)===-1:o;if(c)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,u,t,n),i;var v=[];this.nonBubblingListenersToAdd.forEach(function(T){return v.push(T)});for(var O=void 0,y=0,P=v.length,g=function(T){T[0];var p=T[1],b=T[2];return T[3],t===p&&er(b.namespace,r)};!O&&y<P;){var s=v[y];O=g(s)?s:O,y++}var l=O,m;if(l){var A=l[0];m=A}else{var f=new Sn(r,this.isolateModule);a=this.insertListener(i,u,t,n),l=[i,t,f,a],m=i,this.nonBubblingListenersToAdd.add(l),this.setupNonBubblingListener(l)}var _=this,S=null;return tt.create({start:function(T){S=m.subscribe(T)},stop:function(){l[0];var T=l[1],p=l[2];l[3];var b=p.call();b.forEach(function(w){var I=w.subs;I&&I[T]&&(I[T].unsubscribe(),delete I[T])}),_.nonBubblingListenersToAdd.delete(l),S.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,u){if(a.has(t)){n.push([u,t]);var c=t.subs;c&&Object.keys(c).forEach(function(v){c[v].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);!i||(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,u=a.length;do i.push(this.getVirtualListeners(n,a,!0,u)),u--;while(u>=0&&a[u].type!=="total");for(var c=ge({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),v=0;v<i.length;v++)i[v].add(c,a.length);return c},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var u=this.virtualListeners.getDefault(r,function(){return new Map},i);return u.has(t)||u.set(t,new ps),u.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=me(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(!!this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(u){var c,v=u.subs;if(!v||!v[r]){var O=me(u,r,!1,!1,o.passive).subscribe({next:function(P){return a.onEvent(r,P,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var y=a.nonBubblingListeners.get(r);if(!y)return;y.set(u,{sub:O,destination:o}),u.subs=ge({},v,(c={},c[r]=O,c))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,u=i.passive;a.unsubscribe(),this.setupDOMListener(o,u),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(!!i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var u=this.isolateModule.getNamespace(r.target);if(!u)return;var c=this.getVirtualListeners(t,u);this.bubble(t,r.target,a,i,c,u,u.length-1,!0,n),this.bubble(t,r.target,a,i,c,u,u.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,u,c,v){!c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,v);var O=n,y=u;if(r===n)if(u>=0&&a[u].type==="sibling")O=this.isolateModule.getElement(a,u),y--;else return;r.parentNode&&O&&this.bubble(t,r.parentNode,O,o,i,a,y,c,v),c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,v)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,u){!n||(this.mutateEventCurrentTarget(o,r),i.forEach(function(c){if(c.passive===u&&c.useCapture===a){var v=_n(c.scopeChecker.namespace);!o.propagationHasBeenStopped&&c.scopeChecker.isDirectlyInScope(r)&&(v!==""&&r.matches(v)||v===""&&r===n)&&(bn(o,c.preventDefault),c.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function vs(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function ys(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function ms(e){return tt.merge(e,tt.never())}function gs(e){return e.elm}function bs(e){(console.error||console.log)(e)}function _s(){return tt.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function ws(e){return e.data=e.data||{},e.data.isolate=[],e}function Ss(e,t){t===void 0&&(t={}),es(e);var r=t.modules||fs;vs(r);var n=new cs,o=t&&t.snabbdomOptions||void 0,i=Da([n.createModule()].concat(r),void 0,o),a=_s(),u,c,v=tt.create({start:function(y){c=new MutationObserver(function(){return y.next(null)})},stop:function(){c.disconnect()}});function O(y,P){P===void 0&&(P="DOM"),ys(y);var g=tt.create(),s=a.map(function(){var _=rs(e)||document.body;return u=new ls(_),_}),l=y.remember();l.addListener({}),v.addListener({});var m=s.map(function(_){return tt.merge(l.endWhen(g),g).map(function(S){return u.call(S)}).startWith(ws(We(_))).fold(i,We(_)).drop(1).map(gs).startWith(_).map(function(S){return c.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),S}).compose(ms)}).flatten(),f=un(a,v).endWhen(g).compose(ss(m)).map(function(_){return _[1]}).remember();f.addListener({error:t.reportSnabbdomError||bs});var A=new hs(f,n);return new An(f,g,[],n,A,P)}return O}var xe="___",Mn=function(){function e(t){this._mockConfig=t,t.elements?this._elements=t.elements:this._elements=ut(tt.empty())}return e.prototype.elements=function(){var t=this._elements;return t._isCycleSource="MockedDOM",t},e.prototype.element=function(){var t=this.elements().filter(function(n){return n.length>0}).map(function(n){return n[0]}).remember(),r=ut(t);return r._isCycleSource="MockedDOM",r},e.prototype.events=function(t,r,n){var o=this._mockConfig[t],i=ut(o||tt.empty());return i._isCycleSource="MockedDOM",i},e.prototype.select=function(t){var r=this._mockConfig[t]||{};return new e(r)},e.prototype.isolateSource=function(t,r){return t.select("."+xe+r)},e.prototype.isolateSink=function(t,r){return ut(tt.fromObservable(t).map(function(n){return n.sel&&n.sel.indexOf(xe+r)!==-1||(n.sel+="."+xe+r),n}))},e}();function Os(e){return new Mn(e)}function As(e){return typeof e=="string"&&e.length>0}function In(e){return As(e)&&(e[0]==="."||e[0]==="#")}function Oe(e){return function(r,n,o){var i=typeof r!="undefined",a=typeof n!="undefined",u=typeof o!="undefined";return In(r)?a&&u?bt(e+r,n,o):a?bt(e+r,n):bt(e+r,{}):u?bt(e+r,n,o):a?bt(e,r,n):i?bt(e,r):bt(e,{})}}var Dn=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Cn=Oe("svg");Dn.forEach(function(e){Cn[e]=Oe(e)});var kn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"],E={SVG_TAG_NAMES:Dn,TAG_NAMES:kn,svg:Cn,isSelector:In,createTagFunction:Oe};kn.forEach(function(e){E[e]=Oe(e)});var Es=E.svg,Ps=E.a,$s=E.abbr,Ns=E.address,Ts=E.area,Ms=E.article,Is=E.aside,Ds=E.audio,Cs=E.b,ks=E.base,js=E.bdi,xs=E.bdo,Ls=E.blockquote,Rs=E.body,Fs=E.br,Bs=E.button,qs=E.canvas,Ws=E.caption,Us=E.cite,Gs=E.code,zs=E.col,Hs=E.colgroup,Ks=E.dd,Js=E.del,Vs=E.dfn,Ys=E.dir,Xs=E.div,Zs=E.dl,Qs=E.dt,tu=E.em,eu=E.embed,ru=E.fieldset,nu=E.figcaption,ou=E.figure,iu=E.footer,au=E.form,su=E.h1,uu=E.h2,lu=E.h3,fu=E.h4,cu=E.h5,pu=E.h6,du=E.head,hu=E.header,vu=E.hgroup,yu=E.hr,mu=E.html,gu=E.i,bu=E.iframe,_u=E.img,wu=E.input,Su=E.ins,Ou=E.kbd,Au=E.keygen,Eu=E.label,Pu=E.legend,$u=E.li,Nu=E.link,Tu=E.main,Mu=E.map,Iu=E.mark,Du=E.menu,Cu=E.meta,ku=E.nav,ju=E.noscript,xu=E.object,Lu=E.ol,Ru=E.optgroup,Fu=E.option,Bu=E.p,qu=E.param,Wu=E.pre,Uu=E.progress,Gu=E.q,zu=E.rp,Hu=E.rt,Ku=E.ruby,Ju=E.s,Vu=E.samp,Yu=E.script,Xu=E.section,Zu=E.select,Qu=E.small,tl=E.source,el=E.span,rl=E.strong,nl=E.style,ol=E.sub,il=E.sup,al=E.table,sl=E.tbody,ul=E.td,ll=E.textarea,fl=E.tfoot,cl=E.th,pl=E.thead,dl=E.title,hl=E.tr,vl=E.u,yl=E.ul,ml=E.video,gl=Object.freeze(Object.defineProperty({__proto__:null,svg:Es,a:Ps,abbr:$s,address:Ns,area:Ts,article:Ms,aside:Is,audio:Ds,b:Cs,base:ks,bdi:js,bdo:xs,blockquote:Ls,body:Rs,br:Fs,button:Bs,canvas:qs,caption:Ws,cite:Us,code:Gs,col:zs,colgroup:Hs,dd:Ks,del:Js,dfn:Vs,dir:Ys,div:Xs,dl:Zs,dt:Qs,em:tu,embed:eu,fieldset:ru,figcaption:nu,figure:ou,footer:iu,form:au,h1:su,h2:uu,h3:lu,h4:fu,h5:cu,h6:pu,head:du,header:hu,hgroup:vu,hr:yu,html:mu,i:gu,iframe:bu,img:_u,input:wu,ins:Su,kbd:Ou,keygen:Au,label:Eu,legend:Pu,li:$u,link:Nu,main:Tu,map:Mu,mark:Iu,menu:Du,meta:Cu,nav:ku,noscript:ju,object:xu,ol:Lu,optgroup:Ru,option:Fu,p:Bu,param:qu,pre:Wu,progress:Uu,q:Gu,rp:zu,rt:Hu,ruby:Ku,s:Ju,samp:Vu,script:Yu,section:Xu,select:Zu,small:Qu,source:tl,span:el,strong:rl,style:nl,sub:ol,sup:il,table:al,tbody:sl,td:ul,textarea:ll,tfoot:fl,th:cl,thead:pl,title:dl,tr:hl,u:vl,ul:yl,video:ml,thunk:Ja,MainDOMSource:An,makeDOMDriver:Ss,mockDOMSource:Os,MockedDOMSource:Mn,h:bt},Symbol.toStringTag,{value:"Module"})),jn=be(gl),xn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(at),r=Se;function n(i){return i&&i.__esModule?i:{default:i}}function o(i){var a=new EventTarget;return i.subscribe({next:function(c){return a.dispatchEvent(new CustomEvent("data",{detail:c}))}}),{select:function(c){var v=!c,O=Array.isArray(c)?c:[c],y,P=t.default.create({start:function(s){y=function(m){var f=m.detail,A=f&&f.data||null;(v||O.includes(f.type))&&s.next(A)},a.addEventListener("data",y)},stop:function(s){return a.removeEventListener("data",y)}});return(0,r.adapt)(P)}}}})(xn);var Ln={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){r.addListener({next:function(o){console.log(o)}})}})(Ln);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=O;var t=la,r=Xe,n=jn,o=a(xn),i=a(Ln);function a(y){return y&&y.__esModule?y:{default:y}}function u(y,P){var g=Object.keys(y);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(y);P&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(y,l).enumerable})),g.push.apply(g,s)}return g}function c(y){for(var P=1;P<arguments.length;P++){var g=arguments[P]!=null?arguments[P]:{};P%2?u(Object(g),!0).forEach(function(s){v(y,s,g[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(g)):u(Object(g)).forEach(function(s){Object.defineProperty(y,s,Object.getOwnPropertyDescriptor(g,s))})}return y}function v(y,P,g){return P in y?Object.defineProperty(y,P,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[P]=g,y}function O(y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=(0,r.withState)(y,"STATE"),s={EVENTS:o.default,DOM:(0,n.makeDOMDriver)("#root"),LOG:i.default},l=c(c({},s),P);return(0,t.run)(g,l)}})(dn);var Rn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=P;function t(f,A){return o(f)||n(f,A)||c(f,A)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(f,A){var _=f==null?null:typeof Symbol!="undefined"&&f[Symbol.iterator]||f["@@iterator"];if(_!=null){var S=[],T=!0,p=!1,b,w;try{for(_=_.call(f);!(T=(b=_.next()).done)&&(S.push(b.value),!(A&&S.length===A));T=!0);}catch(I){p=!0,w=I}finally{try{!T&&_.return!=null&&_.return()}finally{if(p)throw w}}return S}}function o(f){if(Array.isArray(f))return f}function i(f){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},i(f)}function a(f){return O(f)||v(f)||c(f)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(f,A){if(!!f){if(typeof f=="string")return y(f,A);var _=Object.prototype.toString.call(f).slice(8,-1);if(_==="Object"&&f.constructor&&(_=f.constructor.name),_==="Map"||_==="Set")return Array.from(f);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return y(f,A)}}function v(f){if(typeof Symbol!="undefined"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function O(f){if(Array.isArray(f))return y(f)}function y(f,A){(A==null||A>f.length)&&(A=f.length);for(var _=0,S=new Array(A);_<A;_++)S[_]=f[_];return S}function P(){for(var f=arguments.length,A=new Array(f),_=0;_<f;_++)A[_]=arguments[_];return A.reduce(function(S,T){return typeof T=="string"&&!S.includes(T)?S.push.apply(S,a(s(T))):Array.isArray(T)?S.push.apply(S,a(l(T))):i(T)==="object"&&S.push.apply(S,a(m(T))),S},[]).join(" ")}function g(f){return/^[a-zA-Z0-9-_]+$/.test(f)}function s(f){if(typeof f!="string")throw new Error("Class name must be a string");return f.trim().split(" ").reduce(function(A,_){if(_.trim().length===0)return A;if(!g(_))throw new Error("".concat(_," is not a valid CSS class name"));return A.push(_),A},[])}function l(f){return f.map(s).flat()}function m(f){var A=Object.entries(f).filter(function(_){var S=t(_,2);S[0];var T=S[1];return typeof T=="function"?T():!!T}).map(function(_){var S=t(_,2),T=S[0];S[1];var p=T.trim();if(!g(p))throw new Error("".concat(p," is not a valid CSS class name"));return p});return A}})(Rn);(function(e){function t(s){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},t(s)}Object.defineProperty(e,"__esModule",{value:!0});var r={component:!0,ABORT:!0,collection:!0,switchable:!0,processForm:!0,run:!0,classes:!0,xs:!0};Object.defineProperty(e,"ABORT",{enumerable:!0,get:function(){return n.ABORT}}),Object.defineProperty(e,"classes",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"collection",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"component",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"processForm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"run",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"switchable",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"xs",{enumerable:!0,get:function(){return O.default}});var n=g(Fr),o=y(Ve),i=y(cn),a=y(pn),u=y(dn),c=y(Rn),v=jn;Object.keys(v).forEach(function(s){s==="default"||s==="__esModule"||Object.prototype.hasOwnProperty.call(r,s)||s in e&&e[s]===v[s]||Object.defineProperty(e,s,{enumerable:!0,get:function(){return v[s]}})});var O=y(at);function y(s){return s&&s.__esModule?s:{default:s}}function P(s){if(typeof WeakMap!="function")return null;var l=new WeakMap,m=new WeakMap;return(P=function(A){return A?m:l})(s)}function g(s,l){if(!l&&s&&s.__esModule)return s;if(s===null||t(s)!=="object"&&typeof s!="function")return{default:s};var m=P(l);if(m&&m.has(s))return m.get(s);var f={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in s)if(_!=="default"&&Object.prototype.hasOwnProperty.call(s,_)){var S=A?Object.getOwnPropertyDescriptor(s,_):null;S&&(S.get||S.set)?Object.defineProperty(f,_,S):f[_]=s[_]}return f.default=s,m&&m.set(s,f),f}})(ht);var de=Object.prototype.hasOwnProperty,Fn=Object.prototype.toString,Ir=Object.defineProperty,Dr=Object.getOwnPropertyDescriptor,Cr=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Fn.call(t)==="[object Array]"},kr=function(t){if(!t||Fn.call(t)!=="[object Object]")return!1;var r=de.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&de.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;var o;for(o in t);return typeof o=="undefined"||de.call(t,o)},jr=function(t,r){Ir&&r.name==="__proto__"?Ir(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},xr=function(t,r){if(r==="__proto__")if(de.call(t,r)){if(Dr)return Dr(t,r).value}else return;return t[r]},Bn=function e(){var t,r,n,o,i,a,u=arguments[0],c=1,v=arguments.length,O=!1;for(typeof u=="boolean"&&(O=u,u=arguments[1]||{},c=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});c<v;++c)if(t=arguments[c],t!=null)for(r in t)n=xr(u,r),o=xr(t,r),u!==o&&(O&&o&&(kr(o)||(i=Cr(o)))?(i?(i=!1,a=n&&Cr(n)?n:[]):a=n&&kr(n)?n:{},jr(u,{name:r,newValue:e(O,a,o)})):typeof o!="undefined"&&jr(u,{name:r,newValue:o}));return u},bl=function(e){return e===void 0},_l=function(e){return typeof e=="number"},wl=function(e){return typeof e=="string"},qn=function(e){return wl(e)||_l(e)},Sl=function(e){return Array.isArray(e)},Ol=function(e){return typeof e=="object"&&e!==null},Al=function(e){return typeof e=="function"},El=function(e){return Ol(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e},Pl={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},$l=function(e){return e.sel in Pl},Ge=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Bn.apply(void 0,[!0].concat(e))},Nl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Bn.apply(void 0,[!1].concat(e))},Wn=function(e,t,r){for(var n=r,o=0;o<e.length;o++){var i=e[o];Sl(i)?n=Wn(i,t,n):n=t(n,i)}return n},rr=function(e,t){return Object.keys(e).map(function(r){return t(r,e[r])}).reduce(function(r,n){return Ge(r,n)},{})},Tl=function(e,t){return rr(e,function(r,n){var o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){var i={};return i[r.slice(o+1)]=n,a={},a[r.slice(0,o)]=i,a;var a}return u={},u[r]=n,u;var u})},Lr=function(e,t){return rr(t,function(r,n){return r!==e?(o={},o[r]=n,o):{};var o})},Ml=function(e){return qn(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0},nr=function(e){return $l(e)?Nl(e,{data:Lr("props",Ge(e.data,{ns:"http://www.w3.org/2000/svg",attrs:Lr("className",Ge(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:bl(e.children)?void 0:e.children.map(function(t){return nr(t)})}):e},jt={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},Il=function(e,t){return rr(e,function(r,n){var o={};if(o[r]=n,jt[r]&&t[jt[r]]!==void 0){return i={},i[jt[r]]=o,i;var i}if(jt[r]===null)return{};for(var a=Object.keys(jt),u=0;u<a.length;u++){var c=a[u];if(c.charAt(c.length-1)==="*"&&r.indexOf(c.slice(0,-1))===0&&t[jt[c]]!==void 0){return v={},v[jt[c]]=o,v;var v}}if(t[r]!==void 0){return O={},O[t[r]?t[r]:r]=n,O;var O}return t.props!==void 0?{props:o}:o})},Dl=function(e,t){return nr(Il(Tl(e,t),t))},Cl=function(e){return e.length>1||!qn(e[0])?void 0:e[0]},kl=function(e){return Wn(e,function(t,r){var n=El(r)?r:Ml(r);return t.push(n),t},[])},jl={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},Un=function(e){return function(t,r){for(var n=[],o=arguments.length-2;o-- >0;)n[o]=arguments[o+2];if(Al(t))return t(r||{},n);var i=Cl(n);return nr({sel:t,data:r?Dl(r,e):{},children:i?void 0:kl(n),text:i,elm:void 0,key:r?r.key:void 0})}},xl=Un(jl),ct={createElement:xl,createElementWithModules:Un};let Ll=0;function Rl(e){const t=new Array(16).fill().map((v,O)=>O),r=e.filter(v=>!v.deleted).map(v=>v.row*4+v.column),n=t.filter(v=>!r.includes(v));if(n.length===0)return e;const o=Math.floor(Math.random()*n.length),i=n[o],a=i%4,u=Math.floor(i/4),c=Math.ceil(Math.random()*1e3)<900?2:4;return[...e,{id:Ll++,value:c,row:u,column:a,new:!0}]}function ze(e,t){let r,n,o,i,a;t=="UP"||t=="DOWN"?(r="column",n="row"):(r="row",n="column"),t=="UP"||t=="LEFT"?(o=0,i=3,a=1):(o=3,i=0,a=-1);const u=e.filter(O=>!O.deleted),c=[];let v=!1;for(let O=0;O<=3;O++){let y=null,P=o;for(let g=o;a==1?g<=i:g>=i;g+=a){const s=u.find(l=>l[r]===O&&l[n]===g);if(s){const l=s[n];if(s[n]=P,y!==null&&!y.merged&&s.value===y.value){const f=s.value*2;s.value=f,y.value=f,s[n]-=a,s.merged=!0,v=!0}else v=v||P!==l,P+=a;const m={id:s.id,value:s.value,row:s.row,column:s.column,merged:s.merged};y=m,c.push(m)}}}if(v){const O=e.map(y=>c.find(P=>P.id===y.id)||y);return O.forEach(y=>{y.deleted=y.deleted||y.merged,delete y.merged}),O}return!1}function Fl(e){const t=e.map(o=>qt({},o));let r=ze(t,"UP"),n=ze(t,"LEFT");return!(!r&&!n)}const Bl=1e3;var ql=ht.component({name:"TILE",model:{HIDE:(e,t,r)=>e.deleted?(setTimeout(n=>r("DELETE"),Bl),{id:e.id,value:0,row:e.row,column:e.column,deleted:!0,hidden:!0}):ht.ABORT,DELETE:e=>{}},intent:({STATE:e,DOM:t})=>{const r=e.stream.filter(i=>i.deleted&&!i.hidden),n=t.select(".tile").events("transitionend");return{HIDE:r.map(i=>{const a=ht.xs.of(null).compose(Xi(500));return ht.xs.merge(a,n).take(1)}).flatten()}},view:({state:e})=>{const{id:t,value:r,row:n,column:o,hidden:i}=e,a=ht.classes("tile",`tile-${t}`,{new:!!e.new}),u=Math.log2(e.value||0),c=Math.floor(50*u/11+30),v={"--row":`       ${n}`,"--col":`       ${o}`,"--tile-color":`${c}%`,display:i?"none":"inherit"};return ct.createElement("div",{className:a,id:`tile-${t}`,style:v},r)}});const Wl="ArrowUp",Ul="ArrowDown",Gl="ArrowLeft",zl="ArrowRight",Hl=100,Rr={tiles:[],over:!1,max:2,score:0,locked:!1};var Kl=ht.component({name:"BOARD",initialState:Rr,calculated:{max:e=>e.tiles.filter(t=>t&&!t.deleted).reduce((t,r)=>t>r.value?t:r.value,0),lost:e=>!e.over&&e.tiles.filter(t=>!t.deleted).length===16&&!Fl(e.tiles)},model:{RESTART:(e,t,r)=>(r("ADD_TILE"),r("ADD_TILE"),qt({},Rr)),MOVE:(e,t,r)=>{if(e.locked||e.over)return ht.ABORT;const n=ze(e.tiles,t);if(!n)return ht.ABORT;const o=n.filter(i=>i.deleted).reduce((i,a)=>i+a.value,0);return setTimeout(i=>{r("ADD_TILE")},Hl),ie(qt({},e),{tiles:n,score:e.score+o,locked:!0})},ADD_TILE:(e,t)=>{const r=Rl(e.tiles);return ie(qt({},e),{tiles:r,locked:!1})},GAME_OVER:(e,t)=>ie(qt({},e),{over:!0,won:t})},intent:({STATE:e,DOM:t})=>{const r=t.select("document").events("keydown").map(s=>s.key),n=s=>l=>l===s,o=r.filter(n(Wl)).mapTo("UP"),i=r.filter(n(Ul)).mapTo("DOWN"),a=r.filter(n(Gl)).mapTo("LEFT"),u=r.filter(n(zl)).mapTo("RIGHT"),c=ht.xs.merge(o,i,a,u),v=e.stream.filter(s=>!s.over&&s.max===2048).mapTo(!0),O=e.stream.filter(s=>s.lost===!0).mapTo(!1),y=ht.xs.merge(v,O),P=t.select(".restart, .gameover").events("click"),g=ht.xs.fromArray([1,2]);return{RESTART:P,GAME_OVER:y,MOVE:c,ADD_TILE:g}},view:({state:e,tiles:t})=>{const{score:r,max:n,over:o,won:i}=e;return ct.createElement("div",{className:"container"},ct.createElement("h1",null,"Sygnal 2048"),ct.createElement("div",{className:"info"},ct.createElement("div",{className:"largest"},"Largest: ",n),ct.createElement("div",{className:"score"},"Score: ",r)),ct.createElement("div",{className:"board-container"},ct.createElement("div",{className:"slot-board"},Array(16).fill().map(a=>ct.createElement("div",{className:"slot"}))),ct.createElement("div",{className:"tile-board"},t),o&&i&&ct.createElement("div",{className:"gameover won"},ct.createElement("span",{className:"won-message"},"YOU WON!!")),o&&!i&&ct.createElement("div",{className:"gameover lost"},ct.createElement("span",{className:"lost-message"},"GAME OVER"))),ct.createElement("div",{className:"restart-container"},ct.createElement("input",{type:"button",className:"restart",value:"Start Over"})))},children:{tiles:ht.collection(ql,"tiles")}});ht.run(Kl);
